{"ast":null,"code":"!function (t, e) {\n  \"object\" == typeof exports && \"undefined\" != typeof module ? e(require(\"@firebase/app\")) : \"function\" == typeof define && define.amd ? define([\"@firebase/app\"], e) : e((t = \"undefined\" != typeof globalThis ? globalThis : t || self).firebase);\n}(this, function (Wd) {\n  \"use strict\";\n\n  try {\n    (function () {\n      function t(t) {\n        return t && \"object\" == typeof t && \"default\" in t ? t : {\n          default: t\n        };\n      }\n\n      var e,\n          l,\n          n,\n          r = t(Wd),\n          _i2 = function i(t, e) {\n        return (_i2 = Object.setPrototypeOf || {\n          __proto__: []\n        } instanceof Array && function (t, e) {\n          t.__proto__ = e;\n        } || function (t, e) {\n          for (var n in e) {\n            e.hasOwnProperty(n) && (t[n] = e[n]);\n          }\n        })(t, e);\n      };\n\n      function o(t, e) {\n        function n() {\n          this.constructor = t;\n        }\n\n        _i2(t, e), t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n());\n      }\n\n      function g(t, s, u, a) {\n        return new (u = u || Promise)(function (n, e) {\n          function r(t) {\n            try {\n              o(a.next(t));\n            } catch (t) {\n              e(t);\n            }\n          }\n\n          function i(t) {\n            try {\n              o(a.throw(t));\n            } catch (t) {\n              e(t);\n            }\n          }\n\n          function o(t) {\n            var e;\n            t.done ? n(t.value) : ((e = t.value) instanceof u ? e : new u(function (t) {\n              t(e);\n            })).then(r, i);\n          }\n\n          o((a = a.apply(t, s || [])).next());\n        });\n      }\n\n      function w(n, r) {\n        var i,\n            o,\n            s,\n            u = {\n          label: 0,\n          sent: function sent() {\n            if (1 & s[0]) throw s[1];\n            return s[1];\n          },\n          trys: [],\n          ops: []\n        },\n            t = {\n          next: e(0),\n          throw: e(1),\n          return: e(2)\n        };\n        return \"function\" == typeof Symbol && (t[Symbol.iterator] = function () {\n          return this;\n        }), t;\n\n        function e(e) {\n          return function (t) {\n            return function (e) {\n              if (i) throw new TypeError(\"Generator is already executing.\");\n\n              for (; u;) {\n                try {\n                  if (i = 1, o && (s = 2 & e[0] ? o.return : e[0] ? o.throw || ((s = o.return) && s.call(o), 0) : o.next) && !(s = s.call(o, e[1])).done) return s;\n\n                  switch (o = 0, s && (e = [2 & e[0], s.value]), e[0]) {\n                    case 0:\n                    case 1:\n                      s = e;\n                      break;\n\n                    case 4:\n                      return u.label++, {\n                        value: e[1],\n                        done: !1\n                      };\n\n                    case 5:\n                      u.label++, o = e[1], e = [0];\n                      continue;\n\n                    case 7:\n                      e = u.ops.pop(), u.trys.pop();\n                      continue;\n\n                    default:\n                      if (!(s = 0 < (s = u.trys).length && s[s.length - 1]) && (6 === e[0] || 2 === e[0])) {\n                        u = 0;\n                        continue;\n                      }\n\n                      if (3 === e[0] && (!s || e[1] > s[0] && e[1] < s[3])) {\n                        u.label = e[1];\n                        break;\n                      }\n\n                      if (6 === e[0] && u.label < s[1]) {\n                        u.label = s[1], s = e;\n                        break;\n                      }\n\n                      if (s && u.label < s[2]) {\n                        u.label = s[2], u.ops.push(e);\n                        break;\n                      }\n\n                      s[2] && u.ops.pop(), u.trys.pop();\n                      continue;\n                  }\n\n                  e = r.call(n, u);\n                } catch (t) {\n                  e = [6, t], o = 0;\n                } finally {\n                  i = s = 0;\n                }\n              }\n\n              if (5 & e[0]) throw e[1];\n              return {\n                value: e[0] ? e[1] : void 0,\n                done: !0\n              };\n            }([e, t]);\n          };\n        }\n      }\n\n      function s() {\n        for (var t = 0, e = 0, n = arguments.length; e < n; e++) {\n          t += arguments[e].length;\n        }\n\n        for (var r = Array(t), i = 0, e = 0; e < n; e++) {\n          for (var o = arguments[e], s = 0, u = o.length; s < u; s++, i++) {\n            r[i] = o[s];\n          }\n        }\n\n        return r;\n      }\n\n      function u() {\n        for (var t = 0, e = 0, n = arguments.length; e < n; e++) {\n          t += arguments[e].length;\n        }\n\n        for (var r = Array(t), i = 0, e = 0; e < n; e++) {\n          for (var o = arguments[e], s = 0, u = o.length; s < u; s++, i++) {\n            r[i] = o[s];\n          }\n        }\n\n        return r;\n      }\n\n      (n = l = l || {})[n.DEBUG = 0] = \"DEBUG\", n[n.VERBOSE = 1] = \"VERBOSE\", n[n.INFO = 2] = \"INFO\", n[n.WARN = 3] = \"WARN\", n[n.ERROR = 4] = \"ERROR\", n[n.SILENT = 5] = \"SILENT\";\n\n      function a(t, e) {\n        for (var n = [], r = 2; r < arguments.length; r++) {\n          n[r - 2] = arguments[r];\n        }\n\n        if (!(e < t.logLevel)) {\n          var i = new Date().toISOString(),\n              o = f[e];\n          if (!o) throw new Error(\"Attempted to log a message with an invalid logType (value: \" + e + \")\");\n          console[o].apply(console, u([\"[\" + i + \"]  \" + t.name + \":\"], n));\n        }\n      }\n\n      var c = {\n        debug: l.DEBUG,\n        verbose: l.VERBOSE,\n        info: l.INFO,\n        warn: l.WARN,\n        error: l.ERROR,\n        silent: l.SILENT\n      },\n          h = l.INFO,\n          f = ((e = {})[l.DEBUG] = \"log\", e[l.VERBOSE] = \"log\", e[l.INFO] = \"info\", e[l.WARN] = \"warn\", e[l.ERROR] = \"error\", e),\n          p = (Object.defineProperty(d.prototype, \"logLevel\", {\n        get: function get() {\n          return this._logLevel;\n        },\n        set: function set(t) {\n          if (!(t in l)) throw new TypeError('Invalid value \"' + t + '\" assigned to `logLevel`');\n          this._logLevel = t;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), d.prototype.setLogLevel = function (t) {\n        this._logLevel = \"string\" == typeof t ? c[t] : t;\n      }, Object.defineProperty(d.prototype, \"logHandler\", {\n        get: function get() {\n          return this._logHandler;\n        },\n        set: function set(t) {\n          if (\"function\" != typeof t) throw new TypeError(\"Value assigned to `logHandler` must be a function\");\n          this._logHandler = t;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(d.prototype, \"userLogHandler\", {\n        get: function get() {\n          return this._userLogHandler;\n        },\n        set: function set(t) {\n          this._userLogHandler = t;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), d.prototype.debug = function () {\n        for (var t = [], e = 0; e < arguments.length; e++) {\n          t[e] = arguments[e];\n        }\n\n        this._userLogHandler && this._userLogHandler.apply(this, u([this, l.DEBUG], t)), this._logHandler.apply(this, u([this, l.DEBUG], t));\n      }, d.prototype.log = function () {\n        for (var t = [], e = 0; e < arguments.length; e++) {\n          t[e] = arguments[e];\n        }\n\n        this._userLogHandler && this._userLogHandler.apply(this, u([this, l.VERBOSE], t)), this._logHandler.apply(this, u([this, l.VERBOSE], t));\n      }, d.prototype.info = function () {\n        for (var t = [], e = 0; e < arguments.length; e++) {\n          t[e] = arguments[e];\n        }\n\n        this._userLogHandler && this._userLogHandler.apply(this, u([this, l.INFO], t)), this._logHandler.apply(this, u([this, l.INFO], t));\n      }, d.prototype.warn = function () {\n        for (var t = [], e = 0; e < arguments.length; e++) {\n          t[e] = arguments[e];\n        }\n\n        this._userLogHandler && this._userLogHandler.apply(this, u([this, l.WARN], t)), this._logHandler.apply(this, u([this, l.WARN], t));\n      }, d.prototype.error = function () {\n        for (var t = [], e = 0; e < arguments.length; e++) {\n          t[e] = arguments[e];\n        }\n\n        this._userLogHandler && this._userLogHandler.apply(this, u([this, l.ERROR], t)), this._logHandler.apply(this, u([this, l.ERROR], t));\n      }, d);\n\n      function d(t) {\n        this.name = t, this._logLevel = h, this._logHandler = a, this._userLogHandler = null;\n      }\n\n      function y() {\n        return \"undefined\" != typeof navigator && \"string\" == typeof navigator.userAgent ? navigator.userAgent : \"\";\n      }\n\n      var v,\n          m = \"FirebaseError\",\n          b = (o(E, v = Error), E);\n\n      function E(t, e) {\n        var n = v.call(this, e) || this;\n        return n.code = t, n.name = m, Object.setPrototypeOf(n, E.prototype), Error.captureStackTrace && Error.captureStackTrace(n, I.prototype.create), n;\n      }\n\n      var I = (T.prototype.create = function (t) {\n        for (var e = [], n = 1; n < arguments.length; n++) {\n          e[n - 1] = arguments[n];\n        }\n\n        for (var r, i = e[0] || {}, o = this.service + \"/\" + t, s = this.errors[t], u = s ? (r = i, s.replace(N, function (t, e) {\n          var n = r[e];\n          return null != n ? String(n) : \"<\" + e + \"?>\";\n        })) : \"Error\", a = this.serviceName + \": \" + u + \" (\" + o + \").\", c = new b(o, a), h = 0, f = Object.keys(i); h < f.length; h++) {\n          var l = f[h];\n          \"_\" !== l.slice(-1) && (l in c && console.warn('Overwriting FirebaseError base field \"' + l + '\" can cause unexpected behavior.'), c[l] = i[l]);\n        }\n\n        return c;\n      }, T);\n\n      function T(t, e, n) {\n        this.service = t, this.serviceName = e, this.errors = n;\n      }\n\n      var N = /\\{\\$([^}]+)}/g,\n          _2 = function _(t, e) {\n        return (_2 = Object.setPrototypeOf || {\n          __proto__: []\n        } instanceof Array && function (t, e) {\n          t.__proto__ = e;\n        } || function (t, e) {\n          for (var n in e) {\n            Object.prototype.hasOwnProperty.call(e, n) && (t[n] = e[n]);\n          }\n        })(t, e);\n      };\n\n      function A(t) {\n        var e = \"function\" == typeof Symbol && Symbol.iterator,\n            n = e && t[e],\n            r = 0;\n        if (n) return n.call(t);\n        if (t && \"number\" == typeof t.length) return {\n          next: function next() {\n            return t && r >= t.length && (t = void 0), {\n              value: t && t[r++],\n              done: !t\n            };\n          }\n        };\n        throw new TypeError(e ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n      }\n\n      var S,\n          D = \"undefined\" != typeof globalThis ? globalThis : \"undefined\" != typeof window ? window : \"undefined\" != typeof global ? global : \"undefined\" != typeof self ? self : {},\n          k = {},\n          R = D || self;\n\n      function L() {}\n\n      function x(t) {\n        var e = typeof t;\n        return \"object\" != e ? e : t ? Array.isArray(t) ? \"array\" : e : \"null\";\n      }\n\n      function O(t) {\n        var e = x(t);\n        return \"array\" == e || \"object\" == e && \"number\" == typeof t.length;\n      }\n\n      function P(t) {\n        var e = typeof t;\n        return \"object\" == e && null != t || \"function\" == e;\n      }\n\n      var C = \"closure_uid_\" + (1e9 * Math.random() >>> 0),\n          V = 0;\n\n      function U(t, e, n) {\n        return t.call.apply(t.bind, arguments);\n      }\n\n      function M(e, n, t) {\n        if (!e) throw Error();\n\n        if (2 < arguments.length) {\n          var r = Array.prototype.slice.call(arguments, 2);\n          return function () {\n            var t = Array.prototype.slice.call(arguments);\n            return Array.prototype.unshift.apply(t, r), e.apply(n, t);\n          };\n        }\n\n        return function () {\n          return e.apply(n, arguments);\n        };\n      }\n\n      function F(t, e, n) {\n        return (F = Function.prototype.bind && -1 != Function.prototype.bind.toString().indexOf(\"native code\") ? U : M).apply(null, arguments);\n      }\n\n      function q(e, t) {\n        var n = Array.prototype.slice.call(arguments, 1);\n        return function () {\n          var t = n.slice();\n          return t.push.apply(t, arguments), e.apply(this, t);\n        };\n      }\n\n      var j = Date.now;\n\n      function G(t, e) {\n        function n() {}\n\n        n.prototype = e.prototype, t.S = e.prototype, t.prototype = new n(), t.prototype.constructor = t;\n      }\n\n      function B() {\n        this.j = this.j, this.i = this.i;\n      }\n\n      B.prototype.j = !1, B.prototype.ja = function () {\n        var t;\n        !this.j && (this.j = !0, this.G(), 0) && (t = this, Object.prototype.hasOwnProperty.call(t, C) && t[C] || (t[C] = ++V));\n      }, B.prototype.G = function () {\n        if (this.i) for (; this.i.length;) {\n          this.i.shift()();\n        }\n      };\n      var z = Array.prototype.indexOf ? function (t, e) {\n        return Array.prototype.indexOf.call(t, e, void 0);\n      } : function (t, e) {\n        if (\"string\" == typeof t) return \"string\" != typeof e || 1 != e.length ? -1 : t.indexOf(e, 0);\n\n        for (var n = 0; n < t.length; n++) {\n          if (n in t && t[n] === e) return n;\n        }\n\n        return -1;\n      },\n          H = Array.prototype.forEach ? function (t, e, n) {\n        Array.prototype.forEach.call(t, e, n);\n      } : function (t, e, n) {\n        for (var r = t.length, i = \"string\" == typeof t ? t.split(\"\") : t, o = 0; o < r; o++) {\n          o in i && e.call(n, i[o], o, t);\n        }\n      };\n\n      function W(t) {\n        return Array.prototype.concat.apply([], arguments);\n      }\n\n      function K(t) {\n        var e = t.length;\n\n        if (0 < e) {\n          for (var n = Array(e), r = 0; r < e; r++) {\n            n[r] = t[r];\n          }\n\n          return n;\n        }\n\n        return [];\n      }\n\n      function Y(t) {\n        return /^[\\s\\xa0]*$/.test(t);\n      }\n\n      var X,\n          Q = String.prototype.trim ? function (t) {\n        return t.trim();\n      } : function (t) {\n        return /^[\\s\\xa0]*([\\s\\S]*?)[\\s\\xa0]*$/.exec(t)[1];\n      };\n\n      function Z(t, e) {\n        return -1 != t.indexOf(e);\n      }\n\n      function J(t, e) {\n        return t < e ? -1 : e < t ? 1 : 0;\n      }\n\n      t: {\n        var $ = R.navigator;\n\n        if ($) {\n          var tt = $.userAgent;\n\n          if (tt) {\n            X = tt;\n            break t;\n          }\n        }\n\n        X = \"\";\n      }\n\n      function et(t, e, n) {\n        for (var r in t) {\n          e.call(n, t[r], r, t);\n        }\n      }\n\n      function nt(t) {\n        var e = {};\n\n        for (var n in t) {\n          e[n] = t[n];\n        }\n\n        return e;\n      }\n\n      var rt = \"constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf\".split(\" \");\n\n      function it(t, e) {\n        for (var n, r, i = 1; i < arguments.length; i++) {\n          for (n in r = arguments[i]) {\n            t[n] = r[n];\n          }\n\n          for (var o = 0; o < rt.length; o++) {\n            n = rt[o], Object.prototype.hasOwnProperty.call(r, n) && (t[n] = r[n]);\n          }\n        }\n      }\n\n      function ot(t) {\n        return ot[\" \"](t), t;\n      }\n\n      ot[\" \"] = L;\n      var st,\n          ut,\n          at = Z(X, \"Opera\"),\n          ct = Z(X, \"Trident\") || Z(X, \"MSIE\"),\n          ht = Z(X, \"Edge\"),\n          ft = ht || ct,\n          lt = Z(X, \"Gecko\") && !(Z(X.toLowerCase(), \"webkit\") && !Z(X, \"Edge\")) && !(Z(X, \"Trident\") || Z(X, \"MSIE\")) && !Z(X, \"Edge\"),\n          pt = Z(X.toLowerCase(), \"webkit\") && !Z(X, \"Edge\");\n\n      function dt() {\n        var t = R.document;\n        return t ? t.documentMode : void 0;\n      }\n\n      t: {\n        var yt = \"\",\n            vt = (ut = X, lt ? /rv:([^\\);]+)(\\)|;)/.exec(ut) : ht ? /Edge\\/([\\d\\.]+)/.exec(ut) : ct ? /\\b(?:MSIE|rv)[: ]([^\\);]+)(\\)|;)/.exec(ut) : pt ? /WebKit\\/(\\S+)/.exec(ut) : at ? /(?:Version)[ \\/]?(\\S+)/.exec(ut) : void 0);\n\n        if (vt && (yt = vt ? vt[1] : \"\"), ct) {\n          var gt = dt();\n\n          if (null != gt && gt > parseFloat(yt)) {\n            st = String(gt);\n            break t;\n          }\n        }\n\n        st = yt;\n      }\n\n      var mt = {};\n\n      function wt(u) {\n        return t = u, e = function e() {\n          for (var t = 0, e = Q(String(st)).split(\".\"), n = Q(String(u)).split(\".\"), r = Math.max(e.length, n.length), i = 0; 0 == t && i < r; i++) {\n            var o = e[i] || \"\",\n                s = n[i] || \"\";\n\n            do {\n              if (o = /(\\d*)(\\D*)(.*)/.exec(o) || [\"\", \"\", \"\", \"\"], s = /(\\d*)(\\D*)(.*)/.exec(s) || [\"\", \"\", \"\", \"\"], 0 == o[0].length && 0 == s[0].length) break;\n              t = J(0 == o[1].length ? 0 : parseInt(o[1], 10), 0 == s[1].length ? 0 : parseInt(s[1], 10)) || J(0 == o[2].length, 0 == s[2].length) || J(o[2], s[2]), o = o[3], s = s[3];\n            } while (0 == t);\n          }\n\n          return 0 <= t;\n        }, n = mt, Object.prototype.hasOwnProperty.call(n, t) ? n[t] : n[t] = e(t);\n        var t, e, n;\n      }\n\n      var bt = R.document && ct ? dt() || parseInt(st, 10) || void 0 : void 0,\n          Et = !ct || 9 <= Number(bt),\n          It = ct && !wt(\"9\"),\n          Tt = function () {\n        if (!R.addEventListener || !Object.defineProperty) return !1;\n        var t = !1,\n            e = Object.defineProperty({}, \"passive\", {\n          get: function get() {\n            t = !0;\n          }\n        });\n\n        try {\n          R.addEventListener(\"test\", L, e), R.removeEventListener(\"test\", L, e);\n        } catch (t) {}\n\n        return t;\n      }();\n\n      function Nt(t, e) {\n        this.type = t, this.a = this.target = e, this.defaultPrevented = !1;\n      }\n\n      function _t(t, e) {\n        if (Nt.call(this, t ? t.type : \"\"), this.relatedTarget = this.a = this.target = null, this.button = this.screenY = this.screenX = this.clientY = this.clientX = 0, this.key = \"\", this.metaKey = this.shiftKey = this.altKey = this.ctrlKey = !1, this.pointerId = 0, this.pointerType = \"\", this.c = null, t) {\n          var n = this.type = t.type,\n              r = t.changedTouches && t.changedTouches.length ? t.changedTouches[0] : null;\n\n          if (this.target = t.target || t.srcElement, this.a = e, e = t.relatedTarget) {\n            if (lt) {\n              t: {\n                try {\n                  ot(e.nodeName);\n                  var i = !0;\n                  break t;\n                } catch (t) {}\n\n                i = !1;\n              }\n\n              i || (e = null);\n            }\n          } else \"mouseover\" == n ? e = t.fromElement : \"mouseout\" == n && (e = t.toElement);\n\n          this.relatedTarget = e, r ? (this.clientX = void 0 !== r.clientX ? r.clientX : r.pageX, this.clientY = void 0 !== r.clientY ? r.clientY : r.pageY, this.screenX = r.screenX || 0, this.screenY = r.screenY || 0) : (this.clientX = void 0 !== t.clientX ? t.clientX : t.pageX, this.clientY = void 0 !== t.clientY ? t.clientY : t.pageY, this.screenX = t.screenX || 0, this.screenY = t.screenY || 0), this.button = t.button, this.key = t.key || \"\", this.ctrlKey = t.ctrlKey, this.altKey = t.altKey, this.shiftKey = t.shiftKey, this.metaKey = t.metaKey, this.pointerId = t.pointerId || 0, this.pointerType = \"string\" == typeof t.pointerType ? t.pointerType : At[t.pointerType] || \"\", (this.c = t).defaultPrevented && this.b();\n        }\n      }\n\n      Nt.prototype.b = function () {\n        this.defaultPrevented = !0;\n      }, G(_t, Nt);\n      var At = {\n        2: \"touch\",\n        3: \"pen\",\n        4: \"mouse\"\n      };\n\n      _t.prototype.b = function () {\n        _t.S.b.call(this);\n\n        var t = this.c;\n        if (t.preventDefault) t.preventDefault();else if (t.returnValue = !1, It) try {\n          (t.ctrlKey || 112 <= t.keyCode && t.keyCode <= 123) && (t.keyCode = -1);\n        } catch (t) {}\n      };\n\n      var St = \"closure_listenable_\" + (1e6 * Math.random() | 0),\n          Dt = 0;\n\n      function kt(t, e, n, r, i) {\n        this.listener = t, this.proxy = null, this.src = e, this.type = n, this.capture = !!r, this.ca = i, this.key = ++Dt, this.Y = this.Z = !1;\n      }\n\n      function Rt(t) {\n        t.Y = !0, t.listener = null, t.proxy = null, t.src = null, t.ca = null;\n      }\n\n      function Lt(t) {\n        this.src = t, this.a = {}, this.b = 0;\n      }\n\n      function xt(t, e) {\n        var n,\n            r,\n            i,\n            o = e.type;\n        o in t.a && (n = t.a[o], (i = 0 <= (r = z(n, e))) && Array.prototype.splice.call(n, r, 1), i && (Rt(e), 0 == t.a[o].length && (delete t.a[o], t.b--)));\n      }\n\n      function Ot(t, e, n, r) {\n        for (var i = 0; i < t.length; ++i) {\n          var o = t[i];\n          if (!o.Y && o.listener == e && o.capture == !!n && o.ca == r) return i;\n        }\n\n        return -1;\n      }\n\n      Lt.prototype.add = function (t, e, n, r, i) {\n        var o = t.toString();\n        (t = this.a[o]) || (t = this.a[o] = [], this.b++);\n        var s = Ot(t, e, r, i);\n        return -1 < s ? (e = t[s], n || (e.Z = !1)) : ((e = new kt(e, this.src, o, !!r, i)).Z = n, t.push(e)), e;\n      };\n\n      var Pt = \"closure_lm_\" + (1e6 * Math.random() | 0),\n          Ct = {};\n\n      function Vt(t, e, n, r, i) {\n        if (r && r.once) return function t(e, n, r, i, o) {\n          if (Array.isArray(n)) {\n            for (var s = 0; s < n.length; s++) {\n              t(e, n[s], r, i, o);\n            }\n\n            return null;\n          }\n\n          r = zt(r);\n          return e && e[St] ? e.wa(n, r, P(i) ? !!i.capture : !!i, o) : Ut(e, n, r, !0, i, o);\n        }(t, e, n, r, i);\n\n        if (Array.isArray(e)) {\n          for (var o = 0; o < e.length; o++) {\n            Vt(t, e[o], n, r, i);\n          }\n\n          return null;\n        }\n\n        return n = zt(n), t && t[St] ? t.va(e, n, P(r) ? !!r.capture : !!r, i) : Ut(t, e, n, !1, r, i);\n      }\n\n      function Ut(t, e, n, r, i, o) {\n        if (!e) throw Error(\"Invalid event type\");\n        var s = P(i) ? !!i.capture : !!i;\n        if (s && !Et) return null;\n        var u,\n            a,\n            c = Gt(t);\n        if (c || (t[Pt] = c = new Lt(t)), (n = c.add(e, n, r, s, o)).proxy) return n;\n        if (u = jt, r = a = Et ? function (t) {\n          return u.call(a.src, a.listener, t);\n        } : function (t) {\n          if (!(t = u.call(a.src, a.listener, t))) return t;\n        }, (n.proxy = r).src = t, r.listener = n, t.addEventListener) Tt || (i = s), void 0 === i && (i = !1), t.addEventListener(e.toString(), r, i);else if (t.attachEvent) t.attachEvent(Ft(e.toString()), r);else {\n          if (!t.addListener || !t.removeListener) throw Error(\"addEventListener and attachEvent are unavailable.\");\n          t.addListener(r);\n        }\n        return n;\n      }\n\n      function Mt(t) {\n        var e, n, r;\n        \"number\" != typeof t && t && !t.Y && ((e = t.src) && e[St] ? xt(e.c, t) : (n = t.type, r = t.proxy, e.removeEventListener ? e.removeEventListener(n, r, t.capture) : e.detachEvent ? e.detachEvent(Ft(n), r) : e.addListener && e.removeListener && e.removeListener(r), (n = Gt(e)) ? (xt(n, t), 0 == n.b && (n.src = null, e[Pt] = null)) : Rt(t)));\n      }\n\n      function Ft(t) {\n        return t in Ct ? Ct[t] : Ct[t] = \"on\" + t;\n      }\n\n      function qt(t, e) {\n        var n = t.listener,\n            r = t.ca || t.src;\n        return t.Z && Mt(t), n.call(r, e);\n      }\n\n      function jt(t, e) {\n        if (t.Y) return !0;\n        if (Et) return qt(t, new _t(e, this));\n        if (!e) t: {\n          e = [\"window\", \"event\"];\n\n          for (var n = R, r = 0; r < e.length; r++) {\n            if (null == (n = n[e[r]])) {\n              e = null;\n              break t;\n            }\n          }\n\n          e = n;\n        }\n        return qt(t, e = new _t(e, this));\n      }\n\n      function Gt(t) {\n        return (t = t[Pt]) instanceof Lt ? t : null;\n      }\n\n      var Bt = \"__closure_events_fn_\" + (1e9 * Math.random() >>> 0);\n\n      function zt(e) {\n        return \"function\" == x(e) ? e : (e[Bt] || (e[Bt] = function (t) {\n          return e.handleEvent(t);\n        }), e[Bt]);\n      }\n\n      function Ht() {\n        B.call(this), this.c = new Lt(this), (this.J = this).C = null;\n      }\n\n      function Wt(t, e, n, r) {\n        if (!(e = t.c.a[String(e)])) return !0;\n        e = e.concat();\n\n        for (var i = !0, o = 0; o < e.length; ++o) {\n          var s,\n              u,\n              a = e[o];\n          a && !a.Y && a.capture == n && (s = a.listener, u = a.ca || a.src, a.Z && xt(t.c, a), i = !1 !== s.call(u, r) && i);\n        }\n\n        return i && !r.defaultPrevented;\n      }\n\n      G(Ht, B), Ht.prototype[St] = !0, (S = Ht.prototype).addEventListener = function (t, e, n, r) {\n        Vt(this, t, e, n, r);\n      }, S.removeEventListener = function (t, e, n, r) {\n        !function t(e, n, r, i, o) {\n          if (Array.isArray(n)) for (var s = 0; s < n.length; s++) {\n            t(e, n[s], r, i, o);\n          } else i = P(i) ? !!i.capture : !!i, r = zt(r), e && e[St] ? (e = e.c, (n = String(n).toString()) in e.a && -1 < (r = Ot(s = e.a[n], r, i, o)) && (Rt(s[r]), Array.prototype.splice.call(s, r, 1), 0 == s.length && (delete e.a[n], e.b--))) : (e = e && Gt(e)) && (n = e.a[n.toString()], e = -1, n && (e = Ot(n, r, i, o)), (r = -1 < e ? n[e] : null) && Mt(r));\n        }(this, t, e, n, r);\n      }, S.dispatchEvent = function (t) {\n        var e,\n            n = this.C;\n        if (n) for (e = []; n; n = n.C) {\n          e.push(n);\n        }\n        n = this.J;\n        var r = t.type || t;\n        if (\"string\" == typeof t ? t = new Nt(t, n) : t instanceof Nt ? t.target = t.target || n : (s = t, it(t = new Nt(r, n), s)), s = !0, e) for (var i = e.length - 1; 0 <= i; i--) {\n          var o = t.a = e[i],\n              s = Wt(o, r, !0, t) && s;\n        }\n        if (s = Wt(o = t.a = n, r, !0, t) && s, s = Wt(o, r, !1, t) && s, e) for (i = 0; i < e.length; i++) {\n          s = Wt(o = t.a = e[i], r, !1, t) && s;\n        }\n        return s;\n      }, S.G = function () {\n        if (Ht.S.G.call(this), this.c) {\n          var t,\n              e = this.c;\n\n          for (t in e.a) {\n            for (var n = e.a[t], r = 0; r < n.length; r++) {\n              Rt(n[r]);\n            }\n\n            delete e.a[t], e.b--;\n          }\n        }\n\n        this.C = null;\n      }, S.va = function (t, e, n, r) {\n        return this.c.add(String(t), e, !1, n, r);\n      }, S.wa = function (t, e, n, r) {\n        return this.c.add(String(t), e, !0, n, r);\n      };\n      var Kt = R.JSON.stringify;\n\n      function Yt() {\n        this.b = this.a = null;\n      }\n\n      var Xt,\n          Qt = (Zt.prototype.get = function () {\n        var t;\n        return 0 < this.b ? (this.b--, t = this.a, this.a = t.next, t.next = null) : t = this.c(), t;\n      }, new Zt(function () {\n        return new Jt();\n      }, function (t) {\n        t.reset();\n      }, 100));\n\n      function Zt(t, e, n) {\n        this.f = n, this.c = t, this.g = e, this.b = 0, this.a = null;\n      }\n\n      function Jt() {\n        this.next = this.b = this.a = null;\n      }\n\n      function $t(t, e) {\n        var n;\n        Xt || (n = R.Promise.resolve(void 0), Xt = function Xt() {\n          n.then(ne);\n        }), te || (Xt(), te = !0), ee.add(t, e);\n      }\n\n      Yt.prototype.add = function (t, e) {\n        var n = Qt.get();\n        n.set(t, e), this.b ? this.b.next = n : this.a = n, this.b = n;\n      }, Jt.prototype.set = function (t, e) {\n        this.a = t, this.b = e, this.next = null;\n      };\n      var te = !(Jt.prototype.reset = function () {\n        this.next = this.b = this.a = null;\n      }),\n          ee = new Yt();\n\n      function ne() {\n        for (var t, e, n; n = e = void 0, n = null, (e = ee).a && (n = e.a, e.a = e.a.next, e.a || (e.b = null), n.next = null), t = n;) {\n          try {\n            t.a.call(t.b);\n          } catch (t) {\n            !function (t) {\n              R.setTimeout(function () {\n                throw t;\n              }, 0);\n            }(t);\n          }\n\n          var r = Qt;\n          r.g(t), r.b < r.f && (r.b++, t.next = r.a, r.a = t);\n        }\n\n        te = !1;\n      }\n\n      function re(t, e) {\n        Ht.call(this), this.b = t || 1, this.a = e || R, this.f = F(this.Ya, this), this.g = j();\n      }\n\n      function ie(t) {\n        t.aa = !1, t.M && (t.a.clearTimeout(t.M), t.M = null);\n      }\n\n      function oe(t, e, n) {\n        if (\"function\" == x(t)) n && (t = F(t, n));else {\n          if (!t || \"function\" != typeof t.handleEvent) throw Error(\"Invalid listener argument\");\n          t = F(t.handleEvent, t);\n        }\n        return 2147483647 < Number(e) ? -1 : R.setTimeout(t, e || 0);\n      }\n\n      G(re, Ht), (S = re.prototype).aa = !1, S.M = null, S.Ya = function () {\n        var t;\n        this.aa && (0 < (t = j() - this.g) && t < .8 * this.b ? this.M = this.a.setTimeout(this.f, this.b - t) : (this.M && (this.a.clearTimeout(this.M), this.M = null), this.dispatchEvent(\"tick\"), this.aa && (ie(this), this.start())));\n      }, S.start = function () {\n        this.aa = !0, this.M || (this.M = this.a.setTimeout(this.f, this.b), this.g = j());\n      }, S.G = function () {\n        re.S.G.call(this), ie(this), delete this.a;\n      };\n      var se,\n          ue,\n          ae,\n          ce = (_2(ue = fe, ae = se = B), ue.prototype = null === ae ? Object.create(ae) : (he.prototype = ae.prototype, new he()), fe.prototype.f = function (t) {\n        this.b = arguments, this.a ? this.c = !0 : function t(e) {\n          e.a = oe(function () {\n            e.a = null, e.c && (e.c = !1, t(e));\n          }, e.h);\n          var n = e.b;\n          e.b = null, e.g.apply(null, n);\n        }(this);\n      }, fe.prototype.G = function () {\n        se.prototype.G.call(this), this.a && (R.clearTimeout(this.a), this.a = null, this.c = !1, this.b = null);\n      }, fe);\n\n      function he() {\n        this.constructor = ue;\n      }\n\n      function fe(t, e, n) {\n        var r = se.call(this) || this;\n        return r.g = null != n ? t.bind(n) : t, r.h = e, r.b = null, r.c = !1, r.a = null, r;\n      }\n\n      function le(t) {\n        B.call(this), this.b = t, this.a = {};\n      }\n\n      G(le, B);\n      var pe = [];\n\n      function de(t, e, n, r) {\n        Array.isArray(n) || (n && (pe[0] = n.toString()), n = pe);\n\n        for (var i = 0; i < n.length; i++) {\n          var o = Vt(e, n[i], r || t.handleEvent, !1, t.b || t);\n          if (!o) break;\n          t.a[o.key] = o;\n        }\n      }\n\n      function ye(t) {\n        et(t.a, function (t, e) {\n          this.a.hasOwnProperty(e) && Mt(t);\n        }, t), t.a = {};\n      }\n\n      function ve() {\n        this.a = !0;\n      }\n\n      function ge(t, e, n, r) {\n        t.info(function () {\n          return \"XMLHTTP TEXT (\" + e + \"): \" + function (t, e) {\n            if (!t.a) return e;\n            if (!e) return null;\n\n            try {\n              var n = JSON.parse(e);\n              if (n) for (t = 0; t < n.length; t++) {\n                if (Array.isArray(n[t])) {\n                  var r = n[t];\n\n                  if (!(r.length < 2)) {\n                    var i = r[1];\n\n                    if (Array.isArray(i) && !(i.length < 1)) {\n                      var o = i[0];\n                      if (\"noop\" != o && \"stop\" != o && \"close\" != o) for (var s = 1; s < i.length; s++) {\n                        i[s] = \"\";\n                      }\n                    }\n                  }\n                }\n              }\n              return Kt(n);\n            } catch (t) {\n              return e;\n            }\n          }(t, n) + (r ? \" \" + r : \"\");\n        });\n      }\n\n      le.prototype.G = function () {\n        le.S.G.call(this), ye(this);\n      }, le.prototype.handleEvent = function () {\n        throw Error(\"EventHandler.handleEvent not implemented\");\n      }, ve.prototype.info = function () {};\n      var me = null;\n\n      function we() {\n        return me = me || new Ht();\n      }\n\n      function be(t) {\n        Nt.call(this, \"serverreachability\", t);\n      }\n\n      function Ee(t) {\n        var e = we();\n        e.dispatchEvent(new be(e));\n      }\n\n      function Ie(t) {\n        Nt.call(this, \"statevent\", t);\n      }\n\n      function Te(t) {\n        var e = we();\n        e.dispatchEvent(new Ie(e));\n      }\n\n      function Ne(t) {\n        Nt.call(this, \"timingevent\", t);\n      }\n\n      function _e(t, e) {\n        if (\"function\" != x(t)) throw Error(\"Fn must not be null and must be a function\");\n        return R.setTimeout(function () {\n          t();\n        }, e);\n      }\n\n      G(be, Nt), G(Ie, Nt), G(Ne, Nt);\n      var Ae = {\n        NO_ERROR: 0,\n        Za: 1,\n        gb: 2,\n        fb: 3,\n        bb: 4,\n        eb: 5,\n        hb: 6,\n        Da: 7,\n        TIMEOUT: 8,\n        kb: 9\n      },\n          Se = {\n        ab: \"complete\",\n        ob: \"success\",\n        Ea: \"error\",\n        Da: \"abort\",\n        mb: \"ready\",\n        nb: \"readystatechange\",\n        TIMEOUT: \"timeout\",\n        ib: \"incrementaldata\",\n        lb: \"progress\",\n        cb: \"downloadprogress\",\n        pb: \"uploadprogress\"\n      };\n\n      function De() {}\n\n      function ke(t) {\n        var e;\n        return (e = t.a) || (e = t.a = {}), e;\n      }\n\n      function Re() {}\n\n      De.prototype.a = null;\n      var Le,\n          xe = {\n        OPEN: \"a\",\n        $a: \"b\",\n        Ea: \"c\",\n        jb: \"d\"\n      };\n\n      function Oe() {\n        Nt.call(this, \"d\");\n      }\n\n      function Pe() {\n        Nt.call(this, \"c\");\n      }\n\n      function Ce() {}\n\n      function Ve(t, e, n, r) {\n        this.g = t, this.c = e, this.f = n, this.T = r || 1, this.J = new le(this), this.P = Ue, t = ft ? 125 : void 0, this.R = new re(t), this.B = null, this.b = !1, this.j = this.l = this.i = this.H = this.u = this.U = this.o = null, this.s = [], this.a = null, this.D = 0, this.h = this.m = null, this.N = -1, this.A = !1, this.O = 0, this.F = null, this.W = this.C = this.V = this.I = !1;\n      }\n\n      G(Oe, Nt), G(Pe, Nt), G(Ce, De), Le = new Ce();\n      var Ue = 45e3,\n          Me = {},\n          Fe = {};\n\n      function qe(t, e, n) {\n        t.H = 1, t.i = an(en(e)), t.j = n, t.I = !0, je(t, null);\n      }\n\n      function je(t, e) {\n        t.u = j(), Be(t), t.l = en(t.i);\n        var s,\n            u,\n            a,\n            c,\n            h,\n            f,\n            n = t.l,\n            r = t.T;\n        Array.isArray(r) || (r = [String(r)]), En(n.b, \"t\", r), t.D = 0, t.a = dr(t.g, t.g.C ? e : null), 0 < t.O && (t.F = new ce(F(t.Ca, t, t.a), t.O)), de(t.J, t.a, \"readystatechange\", t.Wa), e = t.B ? nt(t.B) : {}, t.j ? (t.m || (t.m = \"POST\"), e[\"Content-Type\"] = \"application/x-www-form-urlencoded\", t.a.ba(t.l, t.m, t.j, e)) : (t.m = \"GET\", t.a.ba(t.l, t.m, null, e)), Ee(1), s = t.c, u = t.m, a = t.l, c = t.f, h = t.T, f = t.j, s.info(function () {\n          if (s.a) {\n            if (f) for (var t = \"\", e = f.split(\"&\"), n = 0; n < e.length; n++) {\n              var r,\n                  i,\n                  o = e[n].split(\"=\");\n              1 < o.length && (r = o[0], o = o[1], t = 2 <= (i = r.split(\"_\")).length && \"type\" == i[1] ? t + (r + \"=\") + o + \"&\" : t + (r + \"=redacted&\"));\n            } else t = null;\n          } else t = f;\n          return \"XMLHTTP REQ (\" + c + \") [attempt \" + h + \"]: \" + u + \"\\n\" + a + \"\\n\" + t;\n        });\n      }\n\n      function Ge(t, e, n) {\n        for (var r, i, o, s, u = !0; !t.A && t.D < n.length;) {\n          var a = (i = n, s = o = void 0, o = (r = t).D, -1 == (s = i.indexOf(\"\\n\", o)) ? Fe : (o = Number(i.substring(o, s)), isNaN(o) ? Me : (s += 1) + o > i.length ? Fe : (i = i.substr(s, o), r.D = s + o, i)));\n\n          if (a == Fe) {\n            4 == e && (t.h = 4, Te(14), u = !1), ge(t.c, t.f, null, \"[Incomplete Response]\");\n            break;\n          }\n\n          if (a == Me) {\n            t.h = 4, Te(15), ge(t.c, t.f, n, \"[Invalid Chunk]\"), u = !1;\n            break;\n          }\n\n          ge(t.c, t.f, a, null), Ye(t, a);\n        }\n\n        4 == e && 0 == n.length && (t.h = 1, Te(16), u = !1), t.b = t.b && u, u ? 0 < n.length && !t.W && (t.W = !0, (e = t.g).a == t && e.V && !e.F && (e.c.info(\"Great, no buffering proxy detected. Bytes received: \" + n.length), sr(e), e.F = !0)) : (ge(t.c, t.f, n, \"[Invalid Chunked Response]\"), Ke(t), We(t));\n      }\n\n      function Be(t) {\n        t.U = j() + t.P, ze(t, t.P);\n      }\n\n      function ze(t, e) {\n        if (null != t.o) throw Error(\"WatchDog timer not null\");\n        t.o = _e(F(t.Ua, t), e);\n      }\n\n      function He(t) {\n        t.o && (R.clearTimeout(t.o), t.o = null);\n      }\n\n      function We(t) {\n        0 == t.g.v || t.A || cr(t.g, t);\n      }\n\n      function Ke(t) {\n        He(t);\n        var e = t.F;\n        e && \"function\" == typeof e.ja && e.ja(), t.F = null, ie(t.R), ye(t.J), t.a && (e = t.a, t.a = null, e.abort(), e.ja());\n      }\n\n      function Ye(t, e) {\n        try {\n          var n,\n              r,\n              i,\n              o,\n              s,\n              u,\n              a,\n              c,\n              h,\n              f,\n              l,\n              p = t.g;\n          if (0 != p.v && (p.a == t || Dn(p.b, t))) if (p.I = t.N, !t.C && Dn(p.b, t) && 3 == p.v) {\n            try {\n              var d = p.ka.a.parse(e);\n            } catch (t) {\n              d = null;\n            }\n\n            if (Array.isArray(d) && 3 == d.length) {\n              var y = d;\n\n              if (0 == y[0]) {\n                t: if (!p.j) {\n                  if (p.a) {\n                    if (!(p.a.u + 3e3 < t.u)) break t;\n                    ar(p), Zn(p);\n                  }\n\n                  or(p), Te(18);\n                }\n              } else p.oa = y[1], 0 < p.oa - p.P && y[2] < 37500 && p.H && 0 == p.o && !p.m && (p.m = _e(F(p.Ra, p), 6e3));\n\n              if (Sn(p.b) <= 1 && p.ea) {\n                try {\n                  p.ea();\n                } catch (t) {}\n\n                p.ea = void 0;\n              }\n            } else fr(p, 11);\n          } else if (!t.C && p.a != t || ar(p), !Y(e)) for (e = d = p.ka.a.parse(e), d = 0; d < e.length; d++) {\n            y = e[d], p.P = y[0], y = y[1], 2 == p.v ? \"c\" == y[0] ? (p.J = y[1], p.ga = y[2], null != (n = y[3]) && (p.ha = n, p.c.info(\"VER=\" + p.ha)), null != (r = y[4]) && (p.pa = r, p.c.info(\"SVER=\" + p.pa)), null != (i = y[5]) && \"number\" == typeof i && 0 < i && (o = 1.5 * i, p.D = o, p.c.info(\"backChannelRequestTimeoutMs_=\" + o)), o = p, (s = t.a) && (!(u = s.a ? s.a.getResponseHeader(\"X-Client-Wire-Protocol\") : null) || !(a = o.b).a && (Z(u, \"spdy\") || Z(u, \"quic\") || Z(u, \"h2\")) && (a.f = a.g, a.a = new Set(), a.b && (kn(a, a.b), a.b = null)), !o.A || (c = s.a ? s.a.getResponseHeader(\"X-HTTP-Session-Id\") : null) && (o.na = c, un(o.B, o.A, c))), p.v = 3, p.f && p.f.ta(), p.V && (p.N = j() - t.u, p.c.info(\"Handshake RTT: \" + p.N + \"ms\")), h = t, (o = p).la = pr(o, o.C ? o.ga : null, o.fa), h.C ? (Rn(o.b, h), f = h, (l = o.D) && f.setTimeout(l), f.o && (He(f), Be(f)), o.a = h) : ir(o), 0 < p.g.length && tr(p)) : \"stop\" != y[0] && \"close\" != y[0] || fr(p, 7) : 3 == p.v && (\"stop\" == y[0] || \"close\" == y[0] ? \"stop\" == y[0] ? fr(p, 7) : Qn(p) : \"noop\" != y[0] && p.f && p.f.sa(y), p.o = 0);\n          }\n          Ee(4);\n        } catch (t) {}\n      }\n\n      function Xe(t, e) {\n        if (t.forEach && \"function\" == typeof t.forEach) t.forEach(e, void 0);else if (O(t) || \"string\" == typeof t) H(t, e, void 0);else {\n          if (t.L && \"function\" == typeof t.L) var n = t.L();else if (t.K && \"function\" == typeof t.K) n = void 0;else if (O(t) || \"string\" == typeof t) {\n            n = [];\n\n            for (var r = t.length, i = 0; i < r; i++) {\n              n.push(i);\n            }\n          } else for (i in n = [], r = 0, t) {\n            n[r++] = i;\n          }\n\n          i = (r = function (t) {\n            if (t.K && \"function\" == typeof t.K) return t.K();\n            if (\"string\" == typeof t) return t.split(\"\");\n\n            if (O(t)) {\n              for (var e = [], n = t.length, r = 0; r < n; r++) {\n                e.push(t[r]);\n              }\n\n              return e;\n            }\n\n            for (r in e = [], n = 0, t) {\n              e[n++] = t[r];\n            }\n\n            return e;\n          }(t)).length;\n\n          for (var o = 0; o < i; o++) {\n            e.call(void 0, r[o], n && n[o], t);\n          }\n        }\n      }\n\n      function Qe(t, e) {\n        this.b = {}, this.a = [], this.c = 0;\n        var n = arguments.length;\n\n        if (1 < n) {\n          if (n % 2) throw Error(\"Uneven number of arguments\");\n\n          for (var r = 0; r < n; r += 2) {\n            this.set(arguments[r], arguments[r + 1]);\n          }\n        } else if (t) if (t instanceof Qe) for (n = t.L(), r = 0; r < n.length; r++) {\n          this.set(n[r], t.get(n[r]));\n        } else for (r in t) {\n          this.set(r, t[r]);\n        }\n      }\n\n      function Ze(t) {\n        if (t.c != t.a.length) {\n          for (var e = 0, n = 0; e < t.a.length;) {\n            var r = t.a[e];\n            Je(t.b, r) && (t.a[n++] = r), e++;\n          }\n\n          t.a.length = n;\n        }\n\n        if (t.c != t.a.length) {\n          for (var i = {}, n = e = 0; e < t.a.length;) {\n            Je(i, r = t.a[e]) || (i[t.a[n++] = r] = 1), e++;\n          }\n\n          t.a.length = n;\n        }\n      }\n\n      function Je(t, e) {\n        return Object.prototype.hasOwnProperty.call(t, e);\n      }\n\n      (S = Ve.prototype).setTimeout = function (t) {\n        this.P = t;\n      }, S.Wa = function (t) {\n        t = t.target;\n        var e = this.F;\n        e && 3 == Wn(t) ? e.f() : this.Ca(t);\n      }, S.Ca = function (t) {\n        try {\n          if (t == this.a) t: {\n            var e = Wn(this.a),\n                n = this.a.ua(),\n                r = this.a.X();\n\n            if (!(e < 3 || 3 == e && !ft && !this.a.$())) {\n              this.A || 4 != e || 7 == n || Ee(8 == n || r <= 0 ? 3 : 2), He(this);\n              var i = this.a.X();\n              this.N = i;\n              var o = this.a.$();\n\n              if (this.b = 200 == i, c = this.c, h = this.m, f = this.l, l = this.f, p = this.T, d = e, y = i, c.info(function () {\n                return \"XMLHTTP RESP (\" + l + \") [ attempt \" + p + \"]: \" + h + \"\\n\" + f + \"\\n\" + d + \" \" + y;\n              }), this.b) {\n                if (this.V && !this.C) {\n                  e: {\n                    if (this.a) {\n                      var s,\n                          u = this.a;\n\n                      if ((s = u.a ? u.a.getResponseHeader(\"X-HTTP-Initial-Response\") : null) && !Y(s)) {\n                        var a = s;\n                        break e;\n                      }\n                    }\n\n                    a = null;\n                  }\n\n                  if (!a) {\n                    this.b = !1, this.h = 3, Te(12), Ke(this), We(this);\n                    break t;\n                  }\n\n                  ge(this.c, this.f, a, \"Initial handshake response via X-HTTP-Initial-Response\"), this.C = !0, Ye(this, a);\n                }\n\n                this.I ? (Ge(this, e, o), ft && this.b && 3 == e && (de(this.J, this.R, \"tick\", this.Va), this.R.start())) : (ge(this.c, this.f, o, null), Ye(this, o)), 4 == e && Ke(this), this.b && !this.A && (4 == e ? cr(this.g, this) : (this.b = !1, Be(this)));\n              } else 400 == i && 0 < o.indexOf(\"Unknown SID\") ? (this.h = 3, Te(12)) : (this.h = 0, Te(13)), Ke(this), We(this);\n            }\n          }\n        } catch (t) {}\n\n        var c, h, f, l, p, d, y;\n      }, S.Va = function () {\n        var t, e;\n        this.a && (t = Wn(this.a), e = this.a.$(), this.D < e.length && (He(this), Ge(this, t, e), this.b && 4 != t && Be(this)));\n      }, S.cancel = function () {\n        this.A = !0, Ke(this);\n      }, S.Ua = function () {\n        this.o = null;\n        var t,\n            e,\n            n = j();\n        0 <= n - this.U ? (t = this.c, e = this.l, t.info(function () {\n          return \"TIMEOUT: \" + e;\n        }), 2 != this.H && (Ee(3), Te(17)), Ke(this), this.h = 2, We(this)) : ze(this, this.U - n);\n      }, (S = Qe.prototype).K = function () {\n        Ze(this);\n\n        for (var t = [], e = 0; e < this.a.length; e++) {\n          t.push(this.b[this.a[e]]);\n        }\n\n        return t;\n      }, S.L = function () {\n        return Ze(this), this.a.concat();\n      }, S.get = function (t, e) {\n        return Je(this.b, t) ? this.b[t] : e;\n      }, S.set = function (t, e) {\n        Je(this.b, t) || (this.c++, this.a.push(t)), this.b[t] = e;\n      }, S.forEach = function (t, e) {\n        for (var n = this.L(), r = 0; r < n.length; r++) {\n          var i = n[r],\n              o = this.get(i);\n          t.call(e, o, i, this);\n        }\n      };\n      var $e = /^(?:([^:/?#.]+):)?(?:\\/\\/(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$/;\n\n      function tn(t, e) {\n        var n;\n        this.c = this.j = this.f = \"\", this.h = null, this.i = this.g = \"\", this.a = !1, t instanceof tn ? (this.a = void 0 !== e ? e : t.a, nn(this, t.f), this.j = t.j, rn(this, t.c), on(this, t.h), this.g = t.g, e = t.b, (n = new gn()).c = e.c, e.a && (n.a = new Qe(e.a), n.b = e.b), sn(this, n), this.i = t.i) : t && (n = String(t).match($e)) ? (this.a = !!e, nn(this, n[1] || \"\", !0), this.j = cn(n[2] || \"\"), rn(this, n[3] || \"\", !0), on(this, n[4]), this.g = cn(n[5] || \"\", !0), sn(this, n[6] || \"\", !0), this.i = cn(n[7] || \"\")) : (this.a = !!e, this.b = new gn(null, this.a));\n      }\n\n      function en(t) {\n        return new tn(t);\n      }\n\n      function nn(t, e, n) {\n        t.f = n ? cn(e, !0) : e, t.f && (t.f = t.f.replace(/:$/, \"\"));\n      }\n\n      function rn(t, e, n) {\n        t.c = n ? cn(e, !0) : e;\n      }\n\n      function on(t, e) {\n        if (e) {\n          if (e = Number(e), isNaN(e) || e < 0) throw Error(\"Bad port number \" + e);\n          t.h = e;\n        } else t.h = null;\n      }\n\n      function sn(t, e, n) {\n        var r, i;\n        e instanceof gn ? (t.b = e, r = t.b, (i = t.a) && !r.f && (mn(r), r.c = null, r.a.forEach(function (t, e) {\n          var n = e.toLowerCase();\n          e != n && (wn(this, e), En(this, n, t));\n        }, r)), r.f = i) : (n || (e = hn(e, yn)), t.b = new gn(e, t.a));\n      }\n\n      function un(t, e, n) {\n        t.b.set(e, n);\n      }\n\n      function an(t) {\n        return un(t, \"zx\", Math.floor(2147483648 * Math.random()).toString(36) + Math.abs(Math.floor(2147483648 * Math.random()) ^ j()).toString(36)), t;\n      }\n\n      function cn(t, e) {\n        return t ? e ? decodeURI(t.replace(/%25/g, \"%2525\")) : decodeURIComponent(t) : \"\";\n      }\n\n      function hn(t, e, n) {\n        return \"string\" == typeof t ? (t = encodeURI(t).replace(e, fn), n && (t = t.replace(/%25([0-9a-fA-F]{2})/g, \"%$1\")), t) : null;\n      }\n\n      function fn(t) {\n        return \"%\" + ((t = t.charCodeAt(0)) >> 4 & 15).toString(16) + (15 & t).toString(16);\n      }\n\n      tn.prototype.toString = function () {\n        var t = [],\n            e = this.f;\n        e && t.push(hn(e, ln, !0), \":\");\n        var n = this.c;\n        return !n && \"file\" != e || (t.push(\"//\"), (e = this.j) && t.push(hn(e, ln, !0), \"@\"), t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g, \"%$1\")), null != (n = this.h) && t.push(\":\", String(n))), (n = this.g) && (this.c && \"/\" != n.charAt(0) && t.push(\"/\"), t.push(hn(n, \"/\" == n.charAt(0) ? dn : pn, !0))), (n = this.b.toString()) && t.push(\"?\", n), (n = this.i) && t.push(\"#\", hn(n, vn)), t.join(\"\");\n      };\n\n      var ln = /[#\\/\\?@]/g,\n          pn = /[#\\?:]/g,\n          dn = /[#\\?]/g,\n          yn = /[#\\?@]/g,\n          vn = /#/g;\n\n      function gn(t, e) {\n        this.b = this.a = null, this.c = t || null, this.f = !!e;\n      }\n\n      function mn(n) {\n        n.a || (n.a = new Qe(), n.b = 0, n.c && function (t, e) {\n          if (t) {\n            t = t.split(\"&\");\n\n            for (var n = 0; n < t.length; n++) {\n              var r,\n                  i = t[n].indexOf(\"=\"),\n                  o = null;\n              0 <= i ? (r = t[n].substring(0, i), o = t[n].substring(i + 1)) : r = t[n], e(r, o ? decodeURIComponent(o.replace(/\\+/g, \" \")) : \"\");\n            }\n          }\n        }(n.c, function (t, e) {\n          n.add(decodeURIComponent(t.replace(/\\+/g, \" \")), e);\n        }));\n      }\n\n      function wn(t, e) {\n        mn(t), e = In(t, e), Je(t.a.b, e) && (t.c = null, t.b -= t.a.get(e).length, Je((t = t.a).b, e) && (delete t.b[e], t.c--, t.a.length > 2 * t.c && Ze(t)));\n      }\n\n      function bn(t, e) {\n        return mn(t), e = In(t, e), Je(t.a.b, e);\n      }\n\n      function En(t, e, n) {\n        wn(t, e), 0 < n.length && (t.c = null, t.a.set(In(t, e), K(n)), t.b += n.length);\n      }\n\n      function In(t, e) {\n        return e = String(e), t.f && (e = e.toLowerCase()), e;\n      }\n\n      function Tn(t, e) {\n        this.b = t, this.a = e;\n      }\n\n      function Nn(t) {\n        this.g = t || _n, t = R.PerformanceNavigationTiming ? 0 < (t = R.performance.getEntriesByType(\"navigation\")).length && (\"hq\" == t[0].nextHopProtocol || \"h2\" == t[0].nextHopProtocol) : !!(R.ia && R.ia.ya && R.ia.ya() && R.ia.ya().qb), this.f = t ? this.g : 1, this.a = null, 1 < this.f && (this.a = new Set()), this.b = null, this.c = [];\n      }\n\n      (S = gn.prototype).add = function (t, e) {\n        mn(this), this.c = null, t = In(this, t);\n        var n = this.a.get(t);\n        return n || this.a.set(t, n = []), n.push(e), this.b += 1, this;\n      }, S.forEach = function (n, r) {\n        mn(this), this.a.forEach(function (t, e) {\n          H(t, function (t) {\n            n.call(r, t, e, this);\n          }, this);\n        }, this);\n      }, S.L = function () {\n        mn(this);\n\n        for (var t = this.a.K(), e = this.a.L(), n = [], r = 0; r < e.length; r++) {\n          for (var i = t[r], o = 0; o < i.length; o++) {\n            n.push(e[r]);\n          }\n        }\n\n        return n;\n      }, S.K = function (t) {\n        mn(this);\n        var e = [];\n        if (\"string\" == typeof t) bn(this, t) && (e = W(e, this.a.get(In(this, t))));else {\n          t = this.a.K();\n\n          for (var n = 0; n < t.length; n++) {\n            e = W(e, t[n]);\n          }\n        }\n        return e;\n      }, S.set = function (t, e) {\n        return mn(this), this.c = null, bn(this, t = In(this, t)) && (this.b -= this.a.get(t).length), this.a.set(t, [e]), this.b += 1, this;\n      }, S.get = function (t, e) {\n        return t && 0 < (t = this.K(t)).length ? String(t[0]) : e;\n      }, S.toString = function () {\n        if (this.c) return this.c;\n        if (!this.a) return \"\";\n\n        for (var t = [], e = this.a.L(), n = 0; n < e.length; n++) {\n          for (var r = e[n], i = encodeURIComponent(String(r)), r = this.K(r), o = 0; o < r.length; o++) {\n            var s = i;\n            \"\" !== r[o] && (s += \"=\" + encodeURIComponent(String(r[o]))), t.push(s);\n          }\n        }\n\n        return this.c = t.join(\"&\");\n      };\n      var _n = 10;\n\n      function An(t) {\n        return t.b || t.a && t.a.size >= t.f;\n      }\n\n      function Sn(t) {\n        return t.b ? 1 : t.a ? t.a.size : 0;\n      }\n\n      function Dn(t, e) {\n        return t.b ? t.b == e : t.a && t.a.has(e);\n      }\n\n      function kn(t, e) {\n        t.a ? t.a.add(e) : t.b = e;\n      }\n\n      function Rn(t, e) {\n        t.b && t.b == e ? t.b = null : t.a && t.a.has(e) && t.a.delete(e);\n      }\n\n      function Ln(t) {\n        var e, n;\n        if (null != t.b) return t.c.concat(t.b.s);\n        if (null == t.a || 0 === t.a.size) return K(t.c);\n        var r = t.c;\n\n        try {\n          for (var i = A(t.a.values()), o = i.next(); !o.done; o = i.next()) {\n            var s = o.value,\n                r = r.concat(s.s);\n          }\n        } catch (t) {\n          e = {\n            error: t\n          };\n        } finally {\n          try {\n            o && !o.done && (n = i.return) && n.call(i);\n          } finally {\n            if (e) throw e.error;\n          }\n        }\n\n        return r;\n      }\n\n      function xn() {}\n\n      function On() {\n        this.a = new xn();\n      }\n\n      function Pn(t, e, n, r, i) {\n        try {\n          e.onload = null, e.onerror = null, e.onabort = null, e.ontimeout = null, i(r);\n        } catch (t) {}\n      }\n\n      Nn.prototype.cancel = function () {\n        var e, t;\n        if (this.c = Ln(this), this.b) this.b.cancel(), this.b = null;else if (this.a && 0 !== this.a.size) {\n          try {\n            for (var n = A(this.a.values()), r = n.next(); !r.done; r = n.next()) {\n              r.value.cancel();\n            }\n          } catch (t) {\n            e = {\n              error: t\n            };\n          } finally {\n            try {\n              r && !r.done && (t = n.return) && t.call(n);\n            } finally {\n              if (e) throw e.error;\n            }\n          }\n\n          this.a.clear();\n        }\n      }, xn.prototype.stringify = function (t) {\n        return R.JSON.stringify(t, void 0);\n      }, xn.prototype.parse = function (t) {\n        return R.JSON.parse(t, void 0);\n      };\n      var Cn = R.JSON.parse;\n\n      function Vn(t) {\n        Ht.call(this), this.headers = new Qe(), this.H = t || null, this.b = !1, this.s = this.a = null, this.B = \"\", this.h = 0, this.f = \"\", this.g = this.A = this.l = this.u = !1, this.o = 0, this.m = null, this.I = Un, this.D = this.F = !1;\n      }\n\n      G(Vn, Ht);\n      var Un = \"\",\n          Mn = /^https?$/i,\n          Fn = [\"POST\", \"PUT\"];\n\n      function qn(t) {\n        return \"content-type\" == t.toLowerCase();\n      }\n\n      function jn(t, e) {\n        t.b = !1, t.a && (t.g = !0, t.a.abort(), t.g = !1), t.f = e, t.h = 5, Gn(t), zn(t);\n      }\n\n      function Gn(t) {\n        t.u || (t.u = !0, t.dispatchEvent(\"complete\"), t.dispatchEvent(\"error\"));\n      }\n\n      function Bn(t) {\n        if (t.b && void 0 !== k && (!t.s[1] || 4 != Wn(t) || 2 != t.X())) if (t.l && 4 == Wn(t)) oe(t.za, 0, t);else if (t.dispatchEvent(\"readystatechange\"), 4 == Wn(t)) {\n          t.b = !1;\n\n          try {\n            var e,\n                n,\n                r,\n                i,\n                o = t.X();\n\n            t: switch (o) {\n              case 200:\n              case 201:\n              case 202:\n              case 204:\n              case 206:\n              case 304:\n              case 1223:\n                var s = !0;\n                break t;\n\n              default:\n                s = !1;\n            }\n\n            if ((e = s) || ((n = 0 === o) && (!(i = String(t.B).match($e)[1] || null) && R.self && R.self.location && (i = (r = R.self.location.protocol).substr(0, r.length - 1)), n = !Mn.test(i ? i.toLowerCase() : \"\")), e = n), e) t.dispatchEvent(\"complete\"), t.dispatchEvent(\"success\");else {\n              t.h = 6;\n\n              try {\n                var u = 2 < Wn(t) ? t.a.statusText : \"\";\n              } catch (t) {\n                u = \"\";\n              }\n\n              t.f = u + \" [\" + t.X() + \"]\", Gn(t);\n            }\n          } finally {\n            zn(t);\n          }\n        }\n      }\n\n      function zn(t, e) {\n        if (t.a) {\n          Hn(t);\n          var n = t.a,\n              r = t.s[0] ? L : null;\n          t.a = null, t.s = null, e || t.dispatchEvent(\"ready\");\n\n          try {\n            n.onreadystatechange = r;\n          } catch (t) {}\n        }\n      }\n\n      function Hn(t) {\n        t.a && t.D && (t.a.ontimeout = null), t.m && (R.clearTimeout(t.m), t.m = null);\n      }\n\n      function Wn(t) {\n        return t.a ? t.a.readyState : 0;\n      }\n\n      function Kn(t, e, n) {\n        t: {\n          for (r in n) {\n            var r = !1;\n            break t;\n          }\n\n          r = !0;\n        }\n\n        var i;\n        r || (i = \"\", et(n, function (t, e) {\n          i += e, i += \":\", i += t, i += \"\\r\\n\";\n        }), n = i, \"string\" == typeof t ? null != n && encodeURIComponent(String(n)) : un(t, e, n));\n      }\n\n      function Yn(t, e, n) {\n        return n && n.internalChannelParams && n.internalChannelParams[t] || e;\n      }\n\n      function Xn(t) {\n        this.pa = 0, this.g = [], this.c = new ve(), this.ga = this.la = this.B = this.fa = this.a = this.na = this.A = this.W = this.i = this.O = this.l = null, this.La = this.R = 0, this.Ia = Yn(\"failFast\", !1, t), this.H = this.m = this.j = this.h = this.f = null, this.T = !0, this.I = this.oa = this.P = -1, this.U = this.o = this.u = 0, this.Fa = Yn(\"baseRetryDelayMs\", 5e3, t), this.Ma = Yn(\"retryDelaySeedMs\", 1e4, t), this.Ja = Yn(\"forwardChannelMaxRetries\", 2, t), this.ma = Yn(\"forwardChannelRequestTimeoutMs\", 2e4, t), this.Ka = t && t.g || void 0, this.D = void 0, this.C = t && t.supportsCrossDomainXhr || !1, this.J = \"\", this.b = new Nn(t && t.concurrentRequestLimit), this.ka = new On(), this.da = t && t.fastHandshake || !1, this.Ga = t && t.b || !1, t && t.f && (this.c.a = !1), t && t.forceLongPolling && (this.T = !1), this.V = !this.da && this.T && t && t.c || !1, this.ea = void 0, this.N = 0, this.F = !1, this.s = null;\n      }\n\n      function Qn(t) {\n        var e, n;\n        Jn(t), 3 == t.v && (e = t.R++, un(n = en(t.B), \"SID\", t.J), un(n, \"RID\", e), un(n, \"TYPE\", \"terminate\"), nr(t, n), (e = new Ve(t, t.c, e, void 0)).H = 2, e.i = an(en(n)), n = !1, R.navigator && R.navigator.sendBeacon && (n = R.navigator.sendBeacon(e.i.toString(), \"\")), !n && R.Image && (new Image().src = e.i, n = !0), n || (e.a = dr(e.g, null), e.a.ba(e.i)), e.u = j(), Be(e)), lr(t);\n      }\n\n      function Zn(t) {\n        t.a && (sr(t), t.a.cancel(), t.a = null);\n      }\n\n      function Jn(t) {\n        Zn(t), t.j && (R.clearTimeout(t.j), t.j = null), ar(t), t.b.cancel(), t.h && (\"number\" == typeof t.h && R.clearTimeout(t.h), t.h = null);\n      }\n\n      function $n(t, e) {\n        t.g.push(new Tn(t.La++, e)), 3 == t.v && tr(t);\n      }\n\n      function tr(t) {\n        An(t.b) || t.h || (t.h = !0, $t(t.Ba, t), t.u = 0);\n      }\n\n      function er(t, e) {\n        var n = e ? e.f : t.R++,\n            r = en(t.B);\n        un(r, \"SID\", t.J), un(r, \"RID\", n), un(r, \"AID\", t.P), nr(t, r), t.i && t.l && Kn(r, t.i, t.l), n = new Ve(t, t.c, n, t.u + 1), null === t.i && (n.B = t.l), e && (t.g = e.s.concat(t.g)), e = rr(t, n, 1e3), n.setTimeout(Math.round(.5 * t.ma) + Math.round(.5 * t.ma * Math.random())), kn(t.b, n), qe(n, r, e);\n      }\n\n      function nr(t, n) {\n        t.f && Xe({}, function (t, e) {\n          un(n, e, t);\n        });\n      }\n\n      function rr(t, e, n) {\n        n = Math.min(t.g.length, n);\n        var r = t.f ? F(t.f.Ha, t.f, t) : null;\n\n        t: for (var i = t.g, o = -1;;) {\n          var s = [\"count=\" + n];\n          -1 == o ? 0 < n ? (o = i[0].b, s.push(\"ofs=\" + o)) : o = 0 : s.push(\"ofs=\" + o);\n\n          for (var u = !0, a = 0; a < n; a++) {\n            var c = i[a].b,\n                h = i[a].a;\n            if ((c -= o) < 0) o = Math.max(0, i[a].b - 100), u = !1;else try {\n              !function (t, r, e) {\n                var i = e || \"\";\n\n                try {\n                  Xe(t, function (t, e) {\n                    var n = t;\n                    P(t) && (n = Kt(t)), r.push(i + e + \"=\" + encodeURIComponent(n));\n                  });\n                } catch (t) {\n                  throw r.push(i + \"type=\" + encodeURIComponent(\"_badmap\")), t;\n                }\n              }(h, s, \"req\" + c + \"_\");\n            } catch (t) {\n              r && r(h);\n            }\n          }\n\n          if (u) {\n            r = s.join(\"&\");\n            break t;\n          }\n        }\n\n        return t = t.g.splice(0, n), e.s = t, r;\n      }\n\n      function ir(t) {\n        t.a || t.j || (t.U = 1, $t(t.Aa, t), t.o = 0);\n      }\n\n      function or(t) {\n        return !(t.a || t.j || 3 <= t.o) && (t.U++, t.j = _e(F(t.Aa, t), hr(t, t.o)), t.o++, 1);\n      }\n\n      function sr(t) {\n        null != t.s && (R.clearTimeout(t.s), t.s = null);\n      }\n\n      function ur(t) {\n        t.a = new Ve(t, t.c, \"rpc\", t.U), null === t.i && (t.a.B = t.l), t.a.O = 0;\n        var e = en(t.la);\n        un(e, \"RID\", \"rpc\"), un(e, \"SID\", t.J), un(e, \"CI\", t.H ? \"0\" : \"1\"), un(e, \"AID\", t.P), nr(t, e), un(e, \"TYPE\", \"xmlhttp\"), t.i && t.l && Kn(e, t.i, t.l), t.D && t.a.setTimeout(t.D);\n        var n = t.a;\n        t = t.ga, n.H = 1, n.i = an(en(e)), n.j = null, n.I = !0, je(n, t);\n      }\n\n      function ar(t) {\n        null != t.m && (R.clearTimeout(t.m), t.m = null);\n      }\n\n      function cr(t, e) {\n        var n,\n            r = null;\n\n        if (t.a == e) {\n          ar(t), sr(t), t.a = null;\n          var i = 2;\n        } else {\n          if (!Dn(t.b, e)) return;\n          r = e.s, Rn(t.b, e), i = 1;\n        }\n\n        if (t.I = e.N, 0 != t.v) if (e.b) {\n          1 == i ? (r = e.j ? e.j.length : 0, e = j() - e.u, n = t.u, (i = we()).dispatchEvent(new Ne(i)), tr(t)) : ir(t);\n        } else if (3 == (n = e.h) || 0 == n && 0 < t.I || !(1 == i && function (t, e) {\n          if (!(Sn(t.b) >= t.b.f - (t.h ? 1 : 0))) {\n            if (t.h) return t.g = e.s.concat(t.g), 1;\n            if (!(1 == t.v || 2 == t.v || t.u >= (t.Ia ? 0 : t.Ja))) return t.h = _e(F(t.Ba, t, e), hr(t, t.u)), t.u++, 1;\n          }\n        }(t, e) || 2 == i && or(t))) switch (r && 0 < r.length && (e = t.b, e.c = e.c.concat(r)), n) {\n          case 1:\n            fr(t, 5);\n            break;\n\n          case 4:\n            fr(t, 10);\n            break;\n\n          case 3:\n            fr(t, 6);\n            break;\n\n          default:\n            fr(t, 2);\n        }\n      }\n\n      function hr(t, e) {\n        var n = t.Fa + Math.floor(Math.random() * t.Ma);\n        return t.f || (n *= 2), n * e;\n      }\n\n      function fr(t, e) {\n        var n, r, i, o, s, u;\n        t.c.info(\"Error code \" + e), 2 == e ? (n = null, t.f && (n = null), r = F(t.Xa, t), n || (n = new tn(\"//www.google.com/images/cleardot.gif\"), R.location && \"http\" == R.location.protocol || nn(n, \"https\"), an(n)), i = n.toString(), o = r, u = new ve(), R.Image ? ((s = new Image()).onload = q(Pn, u, s, \"TestLoadImage: loaded\", !0, o), s.onerror = q(Pn, u, s, \"TestLoadImage: error\", !1, o), s.onabort = q(Pn, u, s, \"TestLoadImage: abort\", !1, o), s.ontimeout = q(Pn, u, s, \"TestLoadImage: timeout\", !1, o), R.setTimeout(function () {\n          s.ontimeout && s.ontimeout();\n        }, 1e4), s.src = i) : o(!1)) : Te(2), t.v = 0, t.f && t.f.ra(e), lr(t), Jn(t);\n      }\n\n      function lr(t) {\n        t.v = 0, t.I = -1, t.f && (0 == Ln(t.b).length && 0 == t.g.length || (t.b.c.length = 0, K(t.g), t.g.length = 0), t.f.qa());\n      }\n\n      function pr(t, e, n) {\n        var r,\n            i,\n            o,\n            s,\n            u,\n            a,\n            c,\n            h = (r = n) instanceof tn ? en(r) : new tn(r, void 0);\n        return \"\" != h.c ? (e && rn(h, e + \".\" + h.c), on(h, h.h)) : (i = R.location, o = i.protocol, s = e ? e + \".\" + i.hostname : i.hostname, u = +i.port, a = n, c = new tn(null, void 0), o && nn(c, o), s && rn(c, s), u && on(c, u), a && (c.g = a), h = c), t.W && et(t.W, function (t, e) {\n          un(h, e, t);\n        }), e = t.A, n = t.na, e && n && un(h, e, n), un(h, \"VER\", t.ha), nr(t, h), h;\n      }\n\n      function dr(t, e) {\n        if (e && !t.C) throw Error(\"Can't create secondary domain capable XhrIo object.\");\n        return (e = new Vn(t.Ka)).F = t.C, e;\n      }\n\n      function yr() {}\n\n      function vr() {\n        if (ct && !(10 <= Number(bt))) throw Error(\"Environmental error: no available transport.\");\n      }\n\n      function gr(t, e) {\n        Ht.call(this), this.a = new Xn(e), this.l = t, this.b = e && e.messageUrlParams || null, t = e && e.messageHeaders || null, e && e.clientProtocolHeaderRequired && (t ? t[\"X-Client-Protocol\"] = \"webchannel\" : t = {\n          \"X-Client-Protocol\": \"webchannel\"\n        }), this.a.l = t, t = e && e.initMessageHeaders || null, e && e.messageContentType && (t ? t[\"X-WebChannel-Content-Type\"] = e.messageContentType : t = {\n          \"X-WebChannel-Content-Type\": e.messageContentType\n        }), e && e.a && (t ? t[\"X-WebChannel-Client-Profile\"] = e.a : t = {\n          \"X-WebChannel-Client-Profile\": e.a\n        }), this.a.O = t, (t = e && e.httpHeadersOverwriteParam) && !Y(t) && (this.a.i = t), this.h = e && e.supportsCrossDomainXhr || !1, this.g = e && e.sendRawJson || !1, (e = e && e.httpSessionIdParam) && !Y(e) && (this.a.A = e, null !== (t = this.b) && e in t && e in (t = this.b) && delete t[e]), this.f = new br(this);\n      }\n\n      function mr(t) {\n        Oe.call(this);\n        var e = t.__sm__;\n\n        if (e) {\n          t: {\n            for (var n in e) {\n              t = n;\n              break t;\n            }\n\n            t = void 0;\n          }\n\n          (this.c = t) ? (t = this.c, this.data = null !== e && t in e ? e[t] : void 0) : this.data = e;\n        } else this.data = t;\n      }\n\n      function wr() {\n        Pe.call(this), this.status = 1;\n      }\n\n      function br(t) {\n        this.a = t;\n      }\n\n      (S = Vn.prototype).ba = function (t, e, n, r) {\n        if (this.a) throw Error(\"[goog.net.XhrIo] Object is active with another request=\" + this.B + \"; newUri=\" + t);\n        e = e ? e.toUpperCase() : \"GET\", this.B = t, this.f = \"\", this.h = 0, this.u = !1, this.b = !0, this.a = new XMLHttpRequest(), this.s = this.H ? ke(this.H) : ke(Le), this.a.onreadystatechange = F(this.za, this);\n\n        try {\n          this.A = !0, this.a.open(e, String(t), !0), this.A = !1;\n        } catch (t) {\n          return void jn(this, t);\n        }\n\n        t = n || \"\";\n        var i,\n            o = new Qe(this.headers);\n        r && Xe(r, function (t, e) {\n          o.set(e, t);\n        }), r = function (t) {\n          t: {\n            for (var e = qn, n = t.length, r = \"string\" == typeof t ? t.split(\"\") : t, i = 0; i < n; i++) {\n              if (i in r && e.call(void 0, r[i], i, t)) {\n                e = i;\n                break t;\n              }\n            }\n\n            e = -1;\n          }\n\n          return e < 0 ? null : \"string\" == typeof t ? t.charAt(e) : t[e];\n        }(o.L()), n = R.FormData && t instanceof R.FormData, 0 <= z(Fn, e) && !r && !n && o.set(\"Content-Type\", \"application/x-www-form-urlencoded;charset=utf-8\"), o.forEach(function (t, e) {\n          this.a.setRequestHeader(e, t);\n        }, this), this.I && (this.a.responseType = this.I), \"withCredentials\" in this.a && this.a.withCredentials !== this.F && (this.a.withCredentials = this.F);\n\n        try {\n          Hn(this), 0 < this.o && ((this.D = (i = this.a, ct && wt(9) && \"number\" == typeof i.timeout && void 0 !== i.ontimeout)) ? (this.a.timeout = this.o, this.a.ontimeout = F(this.xa, this)) : this.m = oe(this.xa, this.o, this)), this.l = !0, this.a.send(t), this.l = !1;\n        } catch (t) {\n          jn(this, t);\n        }\n      }, S.xa = function () {\n        void 0 !== k && this.a && (this.f = \"Timed out after \" + this.o + \"ms, aborting\", this.h = 8, this.dispatchEvent(\"timeout\"), this.abort(8));\n      }, S.abort = function (t) {\n        this.a && this.b && (this.b = !1, this.g = !0, this.a.abort(), this.g = !1, this.h = t || 7, this.dispatchEvent(\"complete\"), this.dispatchEvent(\"abort\"), zn(this));\n      }, S.G = function () {\n        this.a && (this.b && (this.b = !1, this.g = !0, this.a.abort(), this.g = !1), zn(this, !0)), Vn.S.G.call(this);\n      }, S.za = function () {\n        this.j || (this.A || this.l || this.g ? Bn(this) : this.Ta());\n      }, S.Ta = function () {\n        Bn(this);\n      }, S.X = function () {\n        try {\n          return 2 < Wn(this) ? this.a.status : -1;\n        } catch (t) {\n          return -1;\n        }\n      }, S.$ = function () {\n        try {\n          return this.a ? this.a.responseText : \"\";\n        } catch (t) {\n          return \"\";\n        }\n      }, S.Na = function (t) {\n        if (this.a) {\n          var e = this.a.responseText;\n          return t && 0 == e.indexOf(t) && (e = e.substring(t.length)), Cn(e);\n        }\n      }, S.ua = function () {\n        return this.h;\n      }, S.Qa = function () {\n        return \"string\" == typeof this.f ? this.f : String(this.f);\n      }, (S = Xn.prototype).ha = 8, S.v = 1, S.Ba = function (t) {\n        if (this.h) if (this.h = null, 1 == this.v) {\n          if (!t) {\n            this.R = Math.floor(1e5 * Math.random()), t = this.R++;\n            var e,\n                n = new Ve(this, this.c, t, void 0),\n                r = this.l;\n            if (this.O && (r ? it(r = nt(r), this.O) : r = this.O), null === this.i && (n.B = r), this.da) t: {\n              for (var i = e = 0; i < this.g.length; i++) {\n                var o = this.g[i];\n                if (\"__data__\" in o.a && \"string\" == typeof (o = o.a.__data__) ? o = o.length : o = void 0, void 0 === o) break;\n\n                if (4096 < (e += o)) {\n                  e = i;\n                  break t;\n                }\n\n                if (4096 === e || i === this.g.length - 1) {\n                  e = i + 1;\n                  break t;\n                }\n              }\n\n              e = 1e3;\n            } else e = 1e3;\n            e = rr(this, n, e), un(i = en(this.B), \"RID\", t), un(i, \"CVER\", 22), this.A && un(i, \"X-HTTP-Session-Id\", this.A), nr(this, i), this.i && r && Kn(i, this.i, r), kn(this.b, n), this.Ga && un(i, \"TYPE\", \"init\"), this.da ? (un(i, \"$req\", e), un(i, \"SID\", \"null\"), n.V = !0, qe(n, i, null)) : qe(n, i, e), this.v = 2;\n          }\n        } else 3 == this.v && (t ? er(this, t) : 0 == this.g.length || An(this.b) || er(this));\n      }, S.Aa = function () {\n        var t;\n        this.j = null, ur(this), this.V && !(this.F || null == this.a || this.N <= 0) && (t = 2 * this.N, this.c.info(\"BP detection timer enabled: \" + t), this.s = _e(F(this.Sa, this), t));\n      }, S.Sa = function () {\n        this.s && (this.s = null, this.c.info(\"BP detection timeout reached.\"), this.c.info(\"Buffering proxy detected and switch to long-polling!\"), this.H = !1, this.F = !0, Zn(this), ur(this));\n      }, S.Ra = function () {\n        null != this.m && (this.m = null, Zn(this), or(this), Te(19));\n      }, S.Xa = function (t) {\n        t ? (this.c.info(\"Successfully pinged google.com\"), Te(2)) : (this.c.info(\"Failed to ping google.com\"), Te(1));\n      }, (S = yr.prototype).ta = function () {}, S.sa = function () {}, S.ra = function () {}, S.qa = function () {}, S.Ha = function () {}, vr.prototype.a = function (t, e) {\n        return new gr(t, e);\n      }, G(gr, Ht), (S = gr.prototype).addEventListener = function (t, e, n, r) {\n        gr.S.addEventListener.call(this, t, e, n, r);\n      }, S.removeEventListener = function (t, e, n, r) {\n        gr.S.removeEventListener.call(this, t, e, n, r);\n      }, S.Oa = function () {\n        this.a.f = this.f, this.h && (this.a.C = !0);\n        var t = this.a,\n            e = this.l,\n            n = this.b || void 0;\n        Te(0), t.fa = e, t.W = n || {}, t.H = t.T, t.B = pr(t, null, t.fa), tr(t);\n      }, S.close = function () {\n        Qn(this.a);\n      }, S.Pa = function (t) {\n        var e;\n        \"string\" == typeof t ? ((e = {}).__data__ = t, $n(this.a, e)) : this.g ? ((e = {}).__data__ = Kt(t), $n(this.a, e)) : $n(this.a, t);\n      }, S.G = function () {\n        this.a.f = null, delete this.f, Qn(this.a), delete this.a, gr.S.G.call(this);\n      }, G(mr, Oe), G(wr, Pe), G(br, yr), br.prototype.ta = function () {\n        this.a.dispatchEvent(\"a\");\n      }, br.prototype.sa = function (t) {\n        this.a.dispatchEvent(new mr(t));\n      }, br.prototype.ra = function (t) {\n        this.a.dispatchEvent(new wr());\n      }, br.prototype.qa = function () {\n        this.a.dispatchEvent(\"b\");\n      }, vr.prototype.createWebChannel = vr.prototype.a, gr.prototype.send = gr.prototype.Pa, gr.prototype.open = gr.prototype.Oa, Ae.NO_ERROR = 0, Ae.TIMEOUT = 8, Ae.HTTP_ERROR = 6, Se.COMPLETE = \"complete\", (Re.EventType = xe).OPEN = \"a\", xe.CLOSE = \"b\", xe.ERROR = \"c\", xe.MESSAGE = \"d\", Ht.prototype.listen = Ht.prototype.va, Vn.prototype.listenOnce = Vn.prototype.wa, Vn.prototype.getLastError = Vn.prototype.Qa, Vn.prototype.getLastErrorCode = Vn.prototype.ua, Vn.prototype.getStatus = Vn.prototype.X, Vn.prototype.getResponseJson = Vn.prototype.Na, Vn.prototype.getResponseText = Vn.prototype.$, Vn.prototype.send = Vn.prototype.ba;\n      var Er = {\n        createWebChannelTransport: function createWebChannelTransport() {\n          return new vr();\n        },\n        ErrorCode: Ae,\n        EventType: Se,\n        WebChannel: Re,\n        XhrIo: Vn\n      },\n          Ir = Er.createWebChannelTransport,\n          Tr = Er.ErrorCode,\n          Nr = Er.EventType,\n          _r = Er.WebChannel,\n          Ar = Er.XhrIo,\n          Sr = (Dr.prototype.setInstantiationMode = function (t) {\n        return this.instantiationMode = t, this;\n      }, Dr.prototype.setMultipleInstances = function (t) {\n        return this.multipleInstances = t, this;\n      }, Dr.prototype.setServiceProps = function (t) {\n        return this.serviceProps = t, this;\n      }, Dr);\n\n      function Dr(t, e, n) {\n        this.name = t, this.instanceFactory = e, this.type = n, this.multipleInstances = !1, this.serviceProps = {}, this.instantiationMode = \"LAZY\";\n      }\n\n      var kr = new p(\"@firebase/firestore\");\n\n      function Rr() {\n        return kr.logLevel;\n      }\n\n      function Lr(t) {\n        for (var e, n = [], r = 1; r < arguments.length; r++) {\n          n[r - 1] = arguments[r];\n        }\n\n        kr.logLevel <= l.DEBUG && (e = n.map(Pr), kr.debug.apply(kr, s([\"Firestore (7.19.1): \" + t], e)));\n      }\n\n      function xr(t) {\n        for (var e, n = [], r = 1; r < arguments.length; r++) {\n          n[r - 1] = arguments[r];\n        }\n\n        kr.logLevel <= l.ERROR && (e = n.map(Pr), kr.error.apply(kr, s([\"Firestore (7.19.1): \" + t], e)));\n      }\n\n      function Or(t) {\n        for (var e, n = [], r = 1; r < arguments.length; r++) {\n          n[r - 1] = arguments[r];\n        }\n\n        kr.logLevel <= l.WARN && (e = n.map(Pr), kr.warn.apply(kr, s([\"Firestore (7.19.1): \" + t], e)));\n      }\n\n      function Pr(e) {\n        if (\"string\" == typeof e) return e;\n\n        try {\n          return JSON.stringify(e);\n        } catch (t) {\n          return e;\n        }\n      }\n\n      function Cr(t) {\n        void 0 === t && (t = \"Unexpected state\");\n        var e = \"FIRESTORE (7.19.1) INTERNAL ASSERTION FAILED: \" + t;\n        throw xr(e), new Error(e);\n      }\n\n      function Vr(t) {\n        t || Cr();\n      }\n\n      var Ur = (Mr.t = function () {\n        for (var t = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\", e = Math.floor(256 / t.length) * t.length, n = \"\"; n.length < 20;) {\n          for (var r = function (t) {\n            var e = \"undefined\" != typeof self && (self.crypto || self.msCrypto),\n                n = new Uint8Array(t);\n            if (e && \"function\" == typeof e.getRandomValues) e.getRandomValues(n);else for (var r = 0; r < t; r++) {\n              n[r] = Math.floor(256 * Math.random());\n            }\n            return n;\n          }(40), i = 0; i < r.length; ++i) {\n            n.length < 20 && r[i] < e && (n += t.charAt(r[i] % t.length));\n          }\n        }\n\n        return n;\n      }, Mr);\n\n      function Mr() {}\n\n      function Fr(t, e) {\n        return t < e ? -1 : e < t ? 1 : 0;\n      }\n\n      function qr(t, n, r) {\n        return t.length === n.length && t.every(function (t, e) {\n          return r(t, n[e]);\n        });\n      }\n\n      function jr(t) {\n        return t + \"\\0\";\n      }\n\n      function Gr(t, e, n, r, i) {\n        this.s = t, this.persistenceKey = e, this.host = n, this.ssl = r, this.forceLongPolling = i;\n      }\n\n      var Br = (Object.defineProperty(zr.prototype, \"i\", {\n        get: function get() {\n          return \"(default)\" === this.database;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), zr.prototype.isEqual = function (t) {\n        return t instanceof zr && t.projectId === this.projectId && t.database === this.database;\n      }, zr.prototype.o = function (t) {\n        return Fr(this.projectId, t.projectId) || Fr(this.database, t.database);\n      }, zr);\n\n      function zr(t, e) {\n        this.projectId = t, this.database = e || \"(default)\";\n      }\n\n      function Hr(t) {\n        var e = 0;\n\n        for (var n in t) {\n          Object.prototype.hasOwnProperty.call(t, n) && e++;\n        }\n\n        return e;\n      }\n\n      function Wr(t, e) {\n        for (var n in t) {\n          Object.prototype.hasOwnProperty.call(t, n) && e(n, t[n]);\n        }\n      }\n\n      function Kr(t) {\n        for (var e in t) {\n          if (Object.prototype.hasOwnProperty.call(t, e)) return !1;\n        }\n\n        return !0;\n      }\n\n      var Yr,\n          Xr,\n          Qr,\n          Zr = (di.prototype.get = function (t) {\n        var e = this.h(t),\n            n = this.l[e];\n        if (void 0 !== n) for (var r = 0, i = n; r < i.length; r++) {\n          var o = i[r],\n              s = o[0],\n              u = o[1];\n          if (this.u(s, t)) return u;\n        }\n      }, di.prototype.has = function (t) {\n        return void 0 !== this.get(t);\n      }, di.prototype.set = function (t, e) {\n        var n = this.h(t),\n            r = this.l[n];\n\n        if (void 0 !== r) {\n          for (var i = 0; i < r.length; i++) {\n            if (this.u(r[i][0], t)) return void (r[i] = [t, e]);\n          }\n\n          r.push([t, e]);\n        } else this.l[n] = [[t, e]];\n      }, di.prototype.delete = function (t) {\n        var e = this.h(t),\n            n = this.l[e];\n        if (void 0 === n) return !1;\n\n        for (var r = 0; r < n.length; r++) {\n          if (this.u(n[r][0], t)) return 1 === n.length ? delete this.l[e] : n.splice(r, 1), !0;\n        }\n\n        return !1;\n      }, di.prototype.forEach = function (u) {\n        Wr(this.l, function (t, e) {\n          for (var n = 0, r = e; n < r.length; n++) {\n            var i = r[n],\n                o = i[0],\n                s = i[1];\n            u(o, s);\n          }\n        });\n      }, di.prototype._ = function () {\n        return Kr(this.l);\n      }, di),\n          Jr = {\n        OK: \"ok\",\n        CANCELLED: \"cancelled\",\n        UNKNOWN: \"unknown\",\n        INVALID_ARGUMENT: \"invalid-argument\",\n        DEADLINE_EXCEEDED: \"deadline-exceeded\",\n        NOT_FOUND: \"not-found\",\n        ALREADY_EXISTS: \"already-exists\",\n        PERMISSION_DENIED: \"permission-denied\",\n        UNAUTHENTICATED: \"unauthenticated\",\n        RESOURCE_EXHAUSTED: \"resource-exhausted\",\n        FAILED_PRECONDITION: \"failed-precondition\",\n        ABORTED: \"aborted\",\n        OUT_OF_RANGE: \"out-of-range\",\n        UNIMPLEMENTED: \"unimplemented\",\n        INTERNAL: \"internal\",\n        UNAVAILABLE: \"unavailable\",\n        DATA_LOSS: \"data-loss\"\n      },\n          $r = (o(pi, Qr = Error), pi),\n          ti = (li.now = function () {\n        return li.fromMillis(Date.now());\n      }, li.fromDate = function (t) {\n        return li.fromMillis(t.getTime());\n      }, li.fromMillis = function (t) {\n        var e = Math.floor(t / 1e3);\n        return new li(e, 1e6 * (t - 1e3 * e));\n      }, li.prototype.toDate = function () {\n        return new Date(this.toMillis());\n      }, li.prototype.toMillis = function () {\n        return 1e3 * this.seconds + this.nanoseconds / 1e6;\n      }, li.prototype.T = function (t) {\n        return this.seconds === t.seconds ? Fr(this.nanoseconds, t.nanoseconds) : Fr(this.seconds, t.seconds);\n      }, li.prototype.isEqual = function (t) {\n        return t.seconds === this.seconds && t.nanoseconds === this.nanoseconds;\n      }, li.prototype.toString = function () {\n        return \"Timestamp(seconds=\" + this.seconds + \", nanoseconds=\" + this.nanoseconds + \")\";\n      }, li.prototype.toJSON = function () {\n        return {\n          seconds: this.seconds,\n          nanoseconds: this.nanoseconds\n        };\n      }, li.prototype.valueOf = function () {\n        var t = this.seconds - -62135596800;\n        return String(t).padStart(12, \"0\") + \".\" + String(this.nanoseconds).padStart(9, \"0\");\n      }, li),\n          ei = (fi.I = function (t) {\n        return new fi(t);\n      }, fi.min = function () {\n        return new fi(new ti(0, 0));\n      }, fi.prototype.o = function (t) {\n        return this.timestamp.T(t.timestamp);\n      }, fi.prototype.isEqual = function (t) {\n        return this.timestamp.isEqual(t.timestamp);\n      }, fi.prototype.m = function () {\n        return 1e6 * this.timestamp.seconds + this.timestamp.nanoseconds / 1e3;\n      }, fi.prototype.toString = function () {\n        return \"SnapshotVersion(\" + this.timestamp.toString() + \")\";\n      }, fi.prototype.A = function () {\n        return this.timestamp;\n      }, fi),\n          ni = (Object.defineProperty(hi.prototype, \"length\", {\n        get: function get() {\n          return this.R;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), hi.prototype.isEqual = function (t) {\n        return 0 === hi.P(this, t);\n      }, hi.prototype.child = function (t) {\n        var e = this.segments.slice(this.offset, this.limit());\n        return t instanceof hi ? t.forEach(function (t) {\n          e.push(t);\n        }) : e.push(t), this.g(e);\n      }, hi.prototype.limit = function () {\n        return this.offset + this.length;\n      }, hi.prototype.V = function (t) {\n        return t = void 0 === t ? 1 : t, this.g(this.segments, this.offset + t, this.length - t);\n      }, hi.prototype.p = function () {\n        return this.g(this.segments, this.offset, this.length - 1);\n      }, hi.prototype.v = function () {\n        return this.segments[this.offset];\n      }, hi.prototype.S = function () {\n        return this.get(this.length - 1);\n      }, hi.prototype.get = function (t) {\n        return this.segments[this.offset + t];\n      }, hi.prototype._ = function () {\n        return 0 === this.length;\n      }, hi.prototype.D = function (t) {\n        if (t.length < this.length) return !1;\n\n        for (var e = 0; e < this.length; e++) {\n          if (this.get(e) !== t.get(e)) return !1;\n        }\n\n        return !0;\n      }, hi.prototype.C = function (t) {\n        if (this.length + 1 !== t.length) return !1;\n\n        for (var e = 0; e < this.length; e++) {\n          if (this.get(e) !== t.get(e)) return !1;\n        }\n\n        return !0;\n      }, hi.prototype.forEach = function (t) {\n        for (var e = this.offset, n = this.limit(); e < n; e++) {\n          t(this.segments[e]);\n        }\n      }, hi.prototype.N = function () {\n        return this.segments.slice(this.offset, this.limit());\n      }, hi.P = function (t, e) {\n        for (var n = Math.min(t.length, e.length), r = 0; r < n; r++) {\n          var i = t.get(r),\n              o = e.get(r);\n          if (i < o) return -1;\n          if (o < i) return 1;\n        }\n\n        return t.length < e.length ? -1 : t.length > e.length ? 1 : 0;\n      }, hi),\n          ri = (o(ci, Xr = ni), ci.prototype.g = function (t, e, n) {\n        return new ci(t, e, n);\n      }, ci.prototype.F = function () {\n        return this.N().join(\"/\");\n      }, ci.prototype.toString = function () {\n        return this.F();\n      }, ci.k = function (t) {\n        if (0 <= t.indexOf(\"//\")) throw new $r(Jr.INVALID_ARGUMENT, \"Invalid path (\" + t + \"). Paths must not contain // in them.\");\n        return new ci(t.split(\"/\").filter(function (t) {\n          return 0 < t.length;\n        }));\n      }, ci.$ = function () {\n        return new ci([]);\n      }, ci),\n          ii = /^[_a-zA-Z][_a-zA-Z0-9]*$/,\n          oi = (o(ai, Yr = ni), ai.prototype.g = function (t, e, n) {\n        return new ai(t, e, n);\n      }, ai.O = function (t) {\n        return ii.test(t);\n      }, ai.prototype.F = function () {\n        return this.N().map(function (t) {\n          return t = t.replace(\"\\\\\", \"\\\\\\\\\").replace(\"`\", \"\\\\`\"), ai.O(t) || (t = \"`\" + t + \"`\"), t;\n        }).join(\".\");\n      }, ai.prototype.toString = function () {\n        return this.F();\n      }, ai.prototype.M = function () {\n        return 1 === this.length && \"__name__\" === this.get(0);\n      }, ai.L = function () {\n        return new ai([\"__name__\"]);\n      }, ai.q = function (t) {\n        for (var e = [], n = \"\", r = 0, i = function i() {\n          if (0 === n.length) throw new $r(Jr.INVALID_ARGUMENT, \"Invalid field path (\" + t + \"). Paths must not be empty, begin with '.', end with '.', or contain '..'\");\n          e.push(n), n = \"\";\n        }, o = !1; r < t.length;) {\n          var s = t[r];\n\n          if (\"\\\\\" === s) {\n            if (r + 1 === t.length) throw new $r(Jr.INVALID_ARGUMENT, \"Path has trailing escape character: \" + t);\n            var u = t[r + 1];\n            if (\"\\\\\" !== u && \".\" !== u && \"`\" !== u) throw new $r(Jr.INVALID_ARGUMENT, \"Path has invalid escape sequence: \" + t);\n            n += u, r += 2;\n          } else \"`\" === s ? o = !o : \".\" !== s || o ? n += s : i(), r++;\n        }\n\n        if (i(), o) throw new $r(Jr.INVALID_ARGUMENT, \"Unterminated ` in path: \" + t);\n        return new ai(e);\n      }, ai.$ = function () {\n        return new ai([]);\n      }, ai),\n          si = (ui.B = function (t) {\n        return new ui(ri.k(t));\n      }, ui.U = function (t) {\n        return new ui(ri.k(t).V(5));\n      }, ui.prototype.W = function (t) {\n        return 2 <= this.path.length && this.path.get(this.path.length - 2) === t;\n      }, ui.prototype.isEqual = function (t) {\n        return null !== t && 0 === ri.P(this.path, t.path);\n      }, ui.prototype.toString = function () {\n        return this.path.toString();\n      }, ui.P = function (t, e) {\n        return ri.P(t.path, e.path);\n      }, ui.j = function (t) {\n        return t.length % 2 == 0;\n      }, ui.K = function (t) {\n        return new ui(new ri(t.slice()));\n      }, ui);\n\n      function ui(t) {\n        this.path = t;\n      }\n\n      function ai() {\n        return null !== Yr && Yr.apply(this, arguments) || this;\n      }\n\n      function ci() {\n        return null !== Xr && Xr.apply(this, arguments) || this;\n      }\n\n      function hi(t, e, n) {\n        void 0 === e ? e = 0 : e > t.length && Cr(), void 0 === n ? n = t.length - e : n > t.length - e && Cr(), this.segments = t, this.offset = e, this.R = n;\n      }\n\n      function fi(t) {\n        this.timestamp = t;\n      }\n\n      function li(t, e) {\n        if (this.seconds = t, (this.nanoseconds = e) < 0) throw new $r(Jr.INVALID_ARGUMENT, \"Timestamp nanoseconds out of range: \" + e);\n        if (1e9 <= e) throw new $r(Jr.INVALID_ARGUMENT, \"Timestamp nanoseconds out of range: \" + e);\n        if (t < -62135596800) throw new $r(Jr.INVALID_ARGUMENT, \"Timestamp seconds out of range: \" + t);\n        if (253402300800 <= t) throw new $r(Jr.INVALID_ARGUMENT, \"Timestamp seconds out of range: \" + t);\n      }\n\n      function pi(t, e) {\n        var n = this;\n        return (n = Qr.call(this, e) || this).code = t, n.message = e, n.name = \"FirebaseError\", n.toString = function () {\n          return n.name + \": [code=\" + n.code + \"]: \" + n.message;\n        }, n;\n      }\n\n      function di(t, e) {\n        this.h = t, this.u = e, this.l = {};\n      }\n\n      function yi(t) {\n        return null == t;\n      }\n\n      function vi(t) {\n        return -0 === t && 1 / t == -1 / 0;\n      }\n\n      function gi(t) {\n        return \"number\" == typeof t && Number.isInteger(t) && !vi(t) && t <= Number.MAX_SAFE_INTEGER && t >= Number.MIN_SAFE_INTEGER;\n      }\n\n      var mi = function mi(t, e, n, r, i, o, s) {\n        void 0 === e && (e = null), void 0 === n && (n = []), void 0 === r && (r = []), void 0 === i && (i = null), void 0 === o && (o = null), void 0 === s && (s = null), this.path = t, this.collectionGroup = e, this.orderBy = n, this.filters = r, this.limit = i, this.startAt = o, this.endAt = s, this.G = null;\n      };\n\n      function wi(t, e, n, r, i, o, s) {\n        return void 0 === e && (e = null), void 0 === n && (n = []), void 0 === r && (r = []), void 0 === i && (i = null), void 0 === o && (o = null), void 0 === s && (s = null), new mi(t, e, n, r, i, o, s);\n      }\n\n      function bi(t) {\n        var e,\n            n = t;\n        return null === n.G && (e = n.path.F(), null !== n.collectionGroup && (e += \"|cg:\" + n.collectionGroup), e += \"|f:\", e += n.filters.map(function (t) {\n          return (e = t).field.F() + e.op.toString() + To(e.value);\n          var e;\n        }).join(\",\"), e += \"|ob:\", e += n.orderBy.map(function (t) {\n          return (e = t).field.F() + e.dir;\n          var e;\n        }).join(\",\"), yi(n.limit) || (e += \"|l:\", e += n.limit), n.startAt && (e += \"|lb:\", e += ea(n.startAt)), n.endAt && (e += \"|ub:\", e += ea(n.endAt)), n.G = e), n.G;\n      }\n\n      function Ei(t, e) {\n        if (t.limit !== e.limit) return !1;\n        if (t.orderBy.length !== e.orderBy.length) return !1;\n\n        for (var n, r, i = 0; i < t.orderBy.length; i++) {\n          if (n = t.orderBy[i], r = e.orderBy[i], n.dir !== r.dir || !n.field.isEqual(r.field)) return !1;\n        }\n\n        if (t.filters.length !== e.filters.length) return !1;\n\n        for (var o, s, u = 0; u < t.filters.length; u++) {\n          if (o = t.filters[u], s = e.filters[u], o.op !== s.op || !o.field.isEqual(s.field) || !wo(o.value, s.value)) return !1;\n        }\n\n        return t.collectionGroup === e.collectionGroup && !!t.path.isEqual(e.path) && !!ra(t.startAt, e.startAt) && ra(t.endAt, e.endAt);\n      }\n\n      function Ii(t) {\n        return si.j(t.path) && null === t.collectionGroup && 0 === t.filters.length;\n      }\n\n      var Ti = (Ni.fromBase64String = function (t) {\n        return new Ni(atob(t));\n      }, Ni.fromUint8Array = function (t) {\n        return new Ni(function (t) {\n          for (var e = \"\", n = 0; n < t.length; ++n) {\n            e += String.fromCharCode(t[n]);\n          }\n\n          return e;\n        }(t));\n      }, Ni.prototype.toBase64 = function () {\n        return t = this.H, btoa(t);\n        var t;\n      }, Ni.prototype.toUint8Array = function () {\n        return function (t) {\n          for (var e = new Uint8Array(t.length), n = 0; n < t.length; n++) {\n            e[n] = t.charCodeAt(n);\n          }\n\n          return e;\n        }(this.H);\n      }, Ni.prototype.Y = function () {\n        return 2 * this.H.length;\n      }, Ni.prototype.o = function (t) {\n        return Fr(this.H, t.H);\n      }, Ni.prototype.isEqual = function (t) {\n        return this.H === t.H;\n      }, Ni);\n\n      function Ni(t) {\n        this.H = t;\n      }\n\n      Ti.J = new Ti(\"\");\n\n      function _i(t) {\n        this.count = t;\n      }\n\n      var Ai,\n          Si,\n          Di = (ki.prototype.tt = function (t) {\n        return new ki(this.target, this.targetId, this.X, t, this.Z, this.lastLimboFreeSnapshotVersion, this.resumeToken);\n      }, ki.prototype.et = function (t, e) {\n        return new ki(this.target, this.targetId, this.X, this.sequenceNumber, e, this.lastLimboFreeSnapshotVersion, t);\n      }, ki.prototype.nt = function (t) {\n        return new ki(this.target, this.targetId, this.X, this.sequenceNumber, this.Z, t, this.resumeToken);\n      }, ki);\n\n      function ki(t, e, n, r, i, o, s) {\n        void 0 === i && (i = ei.min()), void 0 === o && (o = ei.min()), void 0 === s && (s = Ti.J), this.target = t, this.targetId = e, this.X = n, this.sequenceNumber = r, this.Z = i, this.lastLimboFreeSnapshotVersion = o, this.resumeToken = s;\n      }\n\n      function Ri(t) {\n        switch (t) {\n          case Jr.OK:\n            return Cr(), 0;\n\n          case Jr.CANCELLED:\n          case Jr.UNKNOWN:\n          case Jr.DEADLINE_EXCEEDED:\n          case Jr.RESOURCE_EXHAUSTED:\n          case Jr.INTERNAL:\n          case Jr.UNAVAILABLE:\n          case Jr.UNAUTHENTICATED:\n            return;\n\n          case Jr.INVALID_ARGUMENT:\n          case Jr.NOT_FOUND:\n          case Jr.ALREADY_EXISTS:\n          case Jr.PERMISSION_DENIED:\n          case Jr.FAILED_PRECONDITION:\n          case Jr.ABORTED:\n          case Jr.OUT_OF_RANGE:\n          case Jr.UNIMPLEMENTED:\n          case Jr.DATA_LOSS:\n            return 1;\n\n          default:\n            return Cr(), 0;\n        }\n      }\n\n      function Li(t) {\n        if (void 0 === t) return xr(\"GRPC error has no .code\"), Jr.UNKNOWN;\n\n        switch (t) {\n          case Ai.OK:\n            return Jr.OK;\n\n          case Ai.CANCELLED:\n            return Jr.CANCELLED;\n\n          case Ai.UNKNOWN:\n            return Jr.UNKNOWN;\n\n          case Ai.DEADLINE_EXCEEDED:\n            return Jr.DEADLINE_EXCEEDED;\n\n          case Ai.RESOURCE_EXHAUSTED:\n            return Jr.RESOURCE_EXHAUSTED;\n\n          case Ai.INTERNAL:\n            return Jr.INTERNAL;\n\n          case Ai.UNAVAILABLE:\n            return Jr.UNAVAILABLE;\n\n          case Ai.UNAUTHENTICATED:\n            return Jr.UNAUTHENTICATED;\n\n          case Ai.INVALID_ARGUMENT:\n            return Jr.INVALID_ARGUMENT;\n\n          case Ai.NOT_FOUND:\n            return Jr.NOT_FOUND;\n\n          case Ai.ALREADY_EXISTS:\n            return Jr.ALREADY_EXISTS;\n\n          case Ai.PERMISSION_DENIED:\n            return Jr.PERMISSION_DENIED;\n\n          case Ai.FAILED_PRECONDITION:\n            return Jr.FAILED_PRECONDITION;\n\n          case Ai.ABORTED:\n            return Jr.ABORTED;\n\n          case Ai.OUT_OF_RANGE:\n            return Jr.OUT_OF_RANGE;\n\n          case Ai.UNIMPLEMENTED:\n            return Jr.UNIMPLEMENTED;\n\n          case Ai.DATA_LOSS:\n            return Jr.DATA_LOSS;\n\n          default:\n            return Cr();\n        }\n      }\n\n      (Si = Ai = Ai || {})[Si.OK = 0] = \"OK\", Si[Si.CANCELLED = 1] = \"CANCELLED\", Si[Si.UNKNOWN = 2] = \"UNKNOWN\", Si[Si.INVALID_ARGUMENT = 3] = \"INVALID_ARGUMENT\", Si[Si.DEADLINE_EXCEEDED = 4] = \"DEADLINE_EXCEEDED\", Si[Si.NOT_FOUND = 5] = \"NOT_FOUND\", Si[Si.ALREADY_EXISTS = 6] = \"ALREADY_EXISTS\", Si[Si.PERMISSION_DENIED = 7] = \"PERMISSION_DENIED\", Si[Si.UNAUTHENTICATED = 16] = \"UNAUTHENTICATED\", Si[Si.RESOURCE_EXHAUSTED = 8] = \"RESOURCE_EXHAUSTED\", Si[Si.FAILED_PRECONDITION = 9] = \"FAILED_PRECONDITION\", Si[Si.ABORTED = 10] = \"ABORTED\", Si[Si.OUT_OF_RANGE = 11] = \"OUT_OF_RANGE\", Si[Si.UNIMPLEMENTED = 12] = \"UNIMPLEMENTED\", Si[Si.INTERNAL = 13] = \"INTERNAL\", Si[Si.UNAVAILABLE = 14] = \"UNAVAILABLE\", Si[Si.DATA_LOSS = 15] = \"DATA_LOSS\";\n      var xi = (Ui.prototype.st = function (t, e) {\n        return new Ui(this.P, this.root.st(t, e, this.P).copy(null, null, Pi.it, null, null));\n      }, Ui.prototype.remove = function (t) {\n        return new Ui(this.P, this.root.remove(t, this.P).copy(null, null, Pi.it, null, null));\n      }, Ui.prototype.get = function (t) {\n        for (var e = this.root; !e._();) {\n          var n = this.P(t, e.key);\n          if (0 === n) return e.value;\n          n < 0 ? e = e.left : 0 < n && (e = e.right);\n        }\n\n        return null;\n      }, Ui.prototype.indexOf = function (t) {\n        for (var e = 0, n = this.root; !n._();) {\n          var r = this.P(t, n.key);\n          if (0 === r) return e + n.left.size;\n          n = r < 0 ? n.left : (e += n.left.size + 1, n.right);\n        }\n\n        return -1;\n      }, Ui.prototype._ = function () {\n        return this.root._();\n      }, Object.defineProperty(Ui.prototype, \"size\", {\n        get: function get() {\n          return this.root.size;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Ui.prototype.rt = function () {\n        return this.root.rt();\n      }, Ui.prototype.ot = function () {\n        return this.root.ot();\n      }, Ui.prototype.ht = function (t) {\n        return this.root.ht(t);\n      }, Ui.prototype.forEach = function (n) {\n        this.ht(function (t, e) {\n          return n(t, e), !1;\n        });\n      }, Ui.prototype.toString = function () {\n        var n = [];\n        return this.ht(function (t, e) {\n          return n.push(t + \":\" + e), !1;\n        }), \"{\" + n.join(\", \") + \"}\";\n      }, Ui.prototype.at = function (t) {\n        return this.root.at(t);\n      }, Ui.prototype.ut = function () {\n        return new Oi(this.root, null, this.P, !1);\n      }, Ui.prototype.ct = function (t) {\n        return new Oi(this.root, t, this.P, !1);\n      }, Ui.prototype.lt = function () {\n        return new Oi(this.root, null, this.P, !0);\n      }, Ui.prototype._t = function (t) {\n        return new Oi(this.root, t, this.P, !0);\n      }, Ui),\n          Oi = (Vi.prototype.wt = function () {\n        var t = this.dt.pop(),\n            e = {\n          key: t.key,\n          value: t.value\n        };\n        if (this.ft) for (t = t.left; !t._();) {\n          this.dt.push(t), t = t.right;\n        } else for (t = t.right; !t._();) {\n          this.dt.push(t), t = t.left;\n        }\n        return e;\n      }, Vi.prototype.Tt = function () {\n        return 0 < this.dt.length;\n      }, Vi.prototype.Et = function () {\n        if (0 === this.dt.length) return null;\n        var t = this.dt[this.dt.length - 1];\n        return {\n          key: t.key,\n          value: t.value\n        };\n      }, Vi),\n          Pi = (Ci.prototype.copy = function (t, e, n, r, i) {\n        return new Ci(null != t ? t : this.key, null != e ? e : this.value, null != n ? n : this.color, null != r ? r : this.left, null != i ? i : this.right);\n      }, Ci.prototype._ = function () {\n        return !1;\n      }, Ci.prototype.ht = function (t) {\n        return this.left.ht(t) || t(this.key, this.value) || this.right.ht(t);\n      }, Ci.prototype.at = function (t) {\n        return this.right.at(t) || t(this.key, this.value) || this.left.at(t);\n      }, Ci.prototype.min = function () {\n        return this.left._() ? this : this.left.min();\n      }, Ci.prototype.rt = function () {\n        return this.min().key;\n      }, Ci.prototype.ot = function () {\n        return this.right._() ? this.key : this.right.ot();\n      }, Ci.prototype.st = function (t, e, n) {\n        var r = this,\n            i = n(t, r.key);\n        return (r = i < 0 ? r.copy(null, null, null, r.left.st(t, e, n), null) : 0 === i ? r.copy(null, e, null, null, null) : r.copy(null, null, null, null, r.right.st(t, e, n))).It();\n      }, Ci.prototype.At = function () {\n        if (this.left._()) return Ci.EMPTY;\n        var t = this;\n        return t.left.Rt() || t.left.left.Rt() || (t = t.Pt()), (t = t.copy(null, null, null, t.left.At(), null)).It();\n      }, Ci.prototype.remove = function (t, e) {\n        var n,\n            r = this;\n        if (e(t, r.key) < 0) r.left._() || r.left.Rt() || r.left.left.Rt() || (r = r.Pt()), r = r.copy(null, null, null, r.left.remove(t, e), null);else {\n          if (r.left.Rt() && (r = r.gt()), r.right._() || r.right.Rt() || r.right.left.Rt() || (r = r.Vt()), 0 === e(t, r.key)) {\n            if (r.right._()) return Ci.EMPTY;\n            n = r.right.min(), r = r.copy(n.key, n.value, null, null, r.right.At());\n          }\n\n          r = r.copy(null, null, null, null, r.right.remove(t, e));\n        }\n        return r.It();\n      }, Ci.prototype.Rt = function () {\n        return this.color;\n      }, Ci.prototype.It = function () {\n        var t = this;\n        return t.right.Rt() && !t.left.Rt() && (t = t.yt()), t.left.Rt() && t.left.left.Rt() && (t = t.gt()), t.left.Rt() && t.right.Rt() && (t = t.pt()), t;\n      }, Ci.prototype.Pt = function () {\n        var t = this.pt();\n        return t.right.left.Rt() && (t = (t = (t = t.copy(null, null, null, null, t.right.gt())).yt()).pt()), t;\n      }, Ci.prototype.Vt = function () {\n        var t = this.pt();\n        return t.left.left.Rt() && (t = (t = t.gt()).pt()), t;\n      }, Ci.prototype.yt = function () {\n        var t = this.copy(null, null, Ci.RED, null, this.right.left);\n        return this.right.copy(null, null, this.color, t, null);\n      }, Ci.prototype.gt = function () {\n        var t = this.copy(null, null, Ci.RED, this.left.right, null);\n        return this.left.copy(null, null, this.color, null, t);\n      }, Ci.prototype.pt = function () {\n        var t = this.left.copy(null, null, !this.left.color, null, null),\n            e = this.right.copy(null, null, !this.right.color, null, null);\n        return this.copy(null, null, !this.color, t, e);\n      }, Ci.prototype.bt = function () {\n        var t = this.vt();\n        return Math.pow(2, t) <= this.size + 1;\n      }, Ci.prototype.vt = function () {\n        if (this.Rt() && this.left.Rt()) throw Cr();\n        if (this.right.Rt()) throw Cr();\n        var t = this.left.vt();\n        if (t !== this.right.vt()) throw Cr();\n        return t + (this.Rt() ? 0 : 1);\n      }, Ci);\n\n      function Ci(t, e, n, r, i) {\n        this.key = t, this.value = e, this.color = null != n ? n : Ci.RED, this.left = null != r ? r : Ci.EMPTY, this.right = null != i ? i : Ci.EMPTY, this.size = this.left.size + 1 + this.right.size;\n      }\n\n      function Vi(t, e, n, r) {\n        this.ft = r, this.dt = [];\n\n        for (var i = 1; !t._();) {\n          if (i = e ? n(t.key, e) : 1, r && (i *= -1), i < 0) t = this.ft ? t.left : t.right;else {\n            if (0 === i) {\n              this.dt.push(t);\n              break;\n            }\n\n            this.dt.push(t), t = this.ft ? t.right : t.left;\n          }\n        }\n      }\n\n      function Ui(t, e) {\n        this.P = t, this.root = e || Pi.EMPTY;\n      }\n\n      function Mi() {\n        this.size = 0;\n      }\n\n      Pi.EMPTY = null, Pi.RED = !0, Pi.it = !1, Pi.EMPTY = (Object.defineProperty(Mi.prototype, \"key\", {\n        get: function get() {\n          throw Cr();\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(Mi.prototype, \"value\", {\n        get: function get() {\n          throw Cr();\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(Mi.prototype, \"color\", {\n        get: function get() {\n          throw Cr();\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(Mi.prototype, \"left\", {\n        get: function get() {\n          throw Cr();\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(Mi.prototype, \"right\", {\n        get: function get() {\n          throw Cr();\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Mi.prototype.copy = function (t, e, n, r, i) {\n        return this;\n      }, Mi.prototype.st = function (t, e, n) {\n        return new Pi(t, e);\n      }, Mi.prototype.remove = function (t, e) {\n        return this;\n      }, Mi.prototype._ = function () {\n        return !0;\n      }, Mi.prototype.ht = function (t) {\n        return !1;\n      }, Mi.prototype.at = function (t) {\n        return !1;\n      }, Mi.prototype.rt = function () {\n        return null;\n      }, Mi.prototype.ot = function () {\n        return null;\n      }, Mi.prototype.Rt = function () {\n        return !1;\n      }, Mi.prototype.bt = function () {\n        return !0;\n      }, Mi.prototype.vt = function () {\n        return 0;\n      }, new Mi());\n      var Fi = (Bi.prototype.has = function (t) {\n        return null !== this.data.get(t);\n      }, Bi.prototype.first = function () {\n        return this.data.rt();\n      }, Bi.prototype.last = function () {\n        return this.data.ot();\n      }, Object.defineProperty(Bi.prototype, \"size\", {\n        get: function get() {\n          return this.data.size;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Bi.prototype.indexOf = function (t) {\n        return this.data.indexOf(t);\n      }, Bi.prototype.forEach = function (n) {\n        this.data.ht(function (t, e) {\n          return n(t), !1;\n        });\n      }, Bi.prototype.St = function (t, e) {\n        for (var n = this.data.ct(t[0]); n.Tt();) {\n          var r = n.wt();\n          if (0 <= this.P(r.key, t[1])) return;\n          e(r.key);\n        }\n      }, Bi.prototype.Dt = function (t, e) {\n        for (var n = void 0 !== e ? this.data.ct(e) : this.data.ut(); n.Tt();) {\n          if (!t(n.wt().key)) return;\n        }\n      }, Bi.prototype.Ct = function (t) {\n        var e = this.data.ct(t);\n        return e.Tt() ? e.wt().key : null;\n      }, Bi.prototype.ut = function () {\n        return new qi(this.data.ut());\n      }, Bi.prototype.ct = function (t) {\n        return new qi(this.data.ct(t));\n      }, Bi.prototype.add = function (t) {\n        return this.copy(this.data.remove(t).st(t, !0));\n      }, Bi.prototype.delete = function (t) {\n        return this.has(t) ? this.copy(this.data.remove(t)) : this;\n      }, Bi.prototype._ = function () {\n        return this.data._();\n      }, Bi.prototype.Nt = function (t) {\n        var e = this;\n        return e.size < t.size && (e = t, t = this), t.forEach(function (t) {\n          e = e.add(t);\n        }), e;\n      }, Bi.prototype.isEqual = function (t) {\n        if (!(t instanceof Bi)) return !1;\n        if (this.size !== t.size) return !1;\n\n        for (var e = this.data.ut(), n = t.data.ut(); e.Tt();) {\n          var r = e.wt().key,\n              i = n.wt().key;\n          if (0 !== this.P(r, i)) return !1;\n        }\n\n        return !0;\n      }, Bi.prototype.N = function () {\n        var e = [];\n        return this.forEach(function (t) {\n          e.push(t);\n        }), e;\n      }, Bi.prototype.toString = function () {\n        var e = [];\n        return this.forEach(function (t) {\n          return e.push(t);\n        }), \"SortedSet(\" + e.toString() + \")\";\n      }, Bi.prototype.copy = function (t) {\n        var e = new Bi(this.P);\n        return e.data = t, e;\n      }, Bi),\n          qi = (Gi.prototype.wt = function () {\n        return this.Ft.wt().key;\n      }, Gi.prototype.Tt = function () {\n        return this.Ft.Tt();\n      }, Gi),\n          ji = new xi(si.P);\n\n      function Gi(t) {\n        this.Ft = t;\n      }\n\n      function Bi(t) {\n        this.P = t, this.data = new xi(this.P);\n      }\n\n      var zi = new xi(si.P);\n      var Hi = new xi(si.P),\n          Wi = new Fi(si.P);\n\n      function Ki() {\n        for (var t = [], e = 0; e < arguments.length; e++) {\n          t[e] = arguments[e];\n        }\n\n        for (var n = Wi, r = 0, i = t; r < i.length; r++) {\n          var o = i[r],\n              n = n.add(o);\n        }\n\n        return n;\n      }\n\n      var Yi = new Fi(Fr);\n\n      function Xi(t, e, n, r) {\n        this.te = t, this.removedTargetIds = e, this.key = n, this.ee = r;\n      }\n\n      function Qi(t, e) {\n        this.targetId = t, this.ne = e;\n      }\n\n      function Zi(t, e, n, r) {\n        void 0 === n && (n = Ti.J), void 0 === r && (r = null), this.state = t, this.targetIds = e, this.resumeToken = n, this.cause = r;\n      }\n\n      var Ji = (fo.xt = function (t) {\n        return new fo(t.P);\n      }, fo.prototype.has = function (t) {\n        return null != this.kt.get(t);\n      }, fo.prototype.get = function (t) {\n        return this.kt.get(t);\n      }, fo.prototype.first = function () {\n        return this.$t.rt();\n      }, fo.prototype.last = function () {\n        return this.$t.ot();\n      }, fo.prototype._ = function () {\n        return this.$t._();\n      }, fo.prototype.indexOf = function (t) {\n        var e = this.kt.get(t);\n        return e ? this.$t.indexOf(e) : -1;\n      }, Object.defineProperty(fo.prototype, \"size\", {\n        get: function get() {\n          return this.$t.size;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), fo.prototype.forEach = function (n) {\n        this.$t.ht(function (t, e) {\n          return n(t), !1;\n        });\n      }, fo.prototype.add = function (t) {\n        var e = this.delete(t.key);\n        return e.copy(e.kt.st(t.key, t), e.$t.st(t, null));\n      }, fo.prototype.delete = function (t) {\n        var e = this.get(t);\n        return e ? this.copy(this.kt.remove(t), this.$t.remove(e)) : this;\n      }, fo.prototype.isEqual = function (t) {\n        if (!(t instanceof fo)) return !1;\n        if (this.size !== t.size) return !1;\n\n        for (var e = this.$t.ut(), n = t.$t.ut(); e.Tt();) {\n          var r = e.wt().key,\n              i = n.wt().key;\n          if (!r.isEqual(i)) return !1;\n        }\n\n        return !0;\n      }, fo.prototype.toString = function () {\n        var e = [];\n        return this.forEach(function (t) {\n          e.push(t.toString());\n        }), 0 === e.length ? \"DocumentSet ()\" : \"DocumentSet (\\n  \" + e.join(\"  \\n\") + \"\\n)\";\n      }, fo.prototype.copy = function (t, e) {\n        var n = new fo();\n        return n.P = this.P, n.kt = t, n.$t = e, n;\n      }, fo),\n          $i = (ho.prototype.track = function (t) {\n        var e = t.doc.key,\n            n = this.Ot.get(e);\n        !n || 0 !== t.type && 3 === n.type ? this.Ot = this.Ot.st(e, t) : 3 === t.type && 1 !== n.type ? this.Ot = this.Ot.st(e, {\n          type: n.type,\n          doc: t.doc\n        }) : 2 === t.type && 2 === n.type ? this.Ot = this.Ot.st(e, {\n          type: 2,\n          doc: t.doc\n        }) : 2 === t.type && 0 === n.type ? this.Ot = this.Ot.st(e, {\n          type: 0,\n          doc: t.doc\n        }) : 1 === t.type && 0 === n.type ? this.Ot = this.Ot.remove(e) : 1 === t.type && 2 === n.type ? this.Ot = this.Ot.st(e, {\n          type: 1,\n          doc: n.doc\n        }) : 0 === t.type && 1 === n.type ? this.Ot = this.Ot.st(e, {\n          type: 2,\n          doc: t.doc\n        }) : Cr();\n      }, ho.prototype.Mt = function () {\n        var n = [];\n        return this.Ot.ht(function (t, e) {\n          n.push(e);\n        }), n;\n      }, ho),\n          to = (co.Qt = function (t, e, n, r) {\n        var i = [];\n        return e.forEach(function (t) {\n          i.push({\n            type: 0,\n            doc: t\n          });\n        }), new co(t, e, Ji.xt(e), i, n, r, !0, !1);\n      }, Object.defineProperty(co.prototype, \"hasPendingWrites\", {\n        get: function get() {\n          return !this.qt._();\n        },\n        enumerable: !1,\n        configurable: !0\n      }), co.prototype.isEqual = function (t) {\n        if (!(this.fromCache === t.fromCache && this.Bt === t.Bt && this.qt.isEqual(t.qt) && Nu(this.query, t.query) && this.docs.isEqual(t.docs) && this.Lt.isEqual(t.Lt))) return !1;\n        var e = this.docChanges,\n            n = t.docChanges;\n        if (e.length !== n.length) return !1;\n\n        for (var r = 0; r < e.length; r++) {\n          if (e[r].type !== n[r].type || !e[r].doc.isEqual(n[r].doc)) return !1;\n        }\n\n        return !0;\n      }, co),\n          eo = (ao.zt = function (t, e) {\n        var n = new Map();\n        return n.set(t, no.Ht(t, e)), new ao(ei.min(), n, Yi, ji, Ki());\n      }, ao),\n          no = (uo.Ht = function (t, e) {\n        return new uo(Ti.J, e, Ki(), Ki(), Ki());\n      }, uo),\n          ro = (Object.defineProperty(so.prototype, \"Yt\", {\n        get: function get() {\n          return this.oe;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(so.prototype, \"resumeToken\", {\n        get: function get() {\n          return this.re;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(so.prototype, \"ae\", {\n        get: function get() {\n          return 0 !== this.se;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(so.prototype, \"ue\", {\n        get: function get() {\n          return this.he;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), so.prototype.ce = function (t) {\n        0 < t.Y() && (this.he = !0, this.re = t);\n      }, so.prototype.le = function () {\n        var n = Ki(),\n            r = Ki(),\n            i = Ki();\n        return this.ie.forEach(function (t, e) {\n          switch (e) {\n            case 0:\n              n = n.add(t);\n              break;\n\n            case 2:\n              r = r.add(t);\n              break;\n\n            case 1:\n              i = i.add(t);\n              break;\n\n            default:\n              Cr();\n          }\n        }), new no(this.re, this.oe, n, r, i);\n      }, so.prototype._e = function () {\n        this.he = !1, this.ie = po();\n      }, so.prototype.fe = function (t, e) {\n        this.he = !0, this.ie = this.ie.st(t, e);\n      }, so.prototype.de = function (t) {\n        this.he = !0, this.ie = this.ie.remove(t);\n      }, so.prototype.we = function () {\n        this.se += 1;\n      }, so.prototype.Te = function () {\n        --this.se;\n      }, so.prototype.Ee = function () {\n        this.he = !0, this.oe = !0;\n      }, so),\n          io = (oo.prototype.ge = function (t) {\n        for (var e = 0, n = t.te; e < n.length; e++) {\n          var r = n[e];\n          t.ee instanceof uu ? this.Ve(r, t.ee) : t.ee instanceof au && this.ye(r, t.key, t.ee);\n        }\n\n        for (var i = 0, o = t.removedTargetIds; i < o.length; i++) {\n          var s = o[i];\n          this.ye(s, t.key, t.ee);\n        }\n      }, oo.prototype.pe = function (n) {\n        var r = this;\n        this.be(n, function (t) {\n          var e = r.ve(t);\n\n          switch (n.state) {\n            case 0:\n              r.Se(t) && e.ce(n.resumeToken);\n              break;\n\n            case 1:\n              e.Te(), e.ae || e._e(), e.ce(n.resumeToken);\n              break;\n\n            case 2:\n              e.Te(), e.ae || r.removeTarget(t);\n              break;\n\n            case 3:\n              r.Se(t) && (e.Ee(), e.ce(n.resumeToken));\n              break;\n\n            case 4:\n              r.Se(t) && (r.De(t), e.ce(n.resumeToken));\n              break;\n\n            default:\n              Cr();\n          }\n        });\n      }, oo.prototype.be = function (t, n) {\n        var r = this;\n        0 < t.targetIds.length ? t.targetIds.forEach(n) : this.me.forEach(function (t, e) {\n          r.Se(e) && n(e);\n        });\n      }, oo.prototype.Ce = function (t) {\n        var e,\n            n,\n            r = t.targetId,\n            i = t.ne.count,\n            o = this.Ne(r);\n        o && (Ii(e = o.target) ? 0 === i ? (n = new si(e.path), this.ye(r, n, new au(n, ei.min()))) : Vr(1 === i) : this.Fe(r) !== i && (this.De(r), this.Pe = this.Pe.add(r)));\n      }, oo.prototype.ke = function (i) {\n        var o = this,\n            s = new Map();\n        this.me.forEach(function (t, e) {\n          var n,\n              r = o.Ne(e);\n          r && (t.Yt && Ii(r.target) && (n = new si(r.target.path), null !== o.Ae.get(n) || o.$e(e, n) || o.ye(e, n, new au(n, i))), t.ue && (s.set(e, t.le()), t._e()));\n        });\n        var r = Ki();\n        this.Re.forEach(function (t, e) {\n          var n = !0;\n          e.Dt(function (t) {\n            var e = o.Ne(t);\n            return !e || 2 === e.X || (n = !1);\n          }), n && (r = r.add(t));\n        });\n        var t = new eo(i, s, this.Pe, this.Ae, r);\n        return this.Ae = ji, this.Re = lo(), this.Pe = new Fi(Fr), t;\n      }, oo.prototype.Ve = function (t, e) {\n        var n;\n        this.Se(t) && (n = this.$e(t, e.key) ? 2 : 0, this.ve(t).fe(e.key, n), this.Ae = this.Ae.st(e.key, e), this.Re = this.Re.st(e.key, this.xe(e.key).add(t)));\n      }, oo.prototype.ye = function (t, e, n) {\n        var r;\n        this.Se(t) && (r = this.ve(t), this.$e(t, e) ? r.fe(e, 1) : r.de(e), this.Re = this.Re.st(e, this.xe(e).delete(t)), n && (this.Ae = this.Ae.st(e, n)));\n      }, oo.prototype.removeTarget = function (t) {\n        this.me.delete(t);\n      }, oo.prototype.Fe = function (t) {\n        var e = this.ve(t).le();\n        return this.Ie.Oe(t).size + e.Jt.size - e.Zt.size;\n      }, oo.prototype.we = function (t) {\n        this.ve(t).we();\n      }, oo.prototype.ve = function (t) {\n        var e = this.me.get(t);\n        return e || (e = new ro(), this.me.set(t, e)), e;\n      }, oo.prototype.xe = function (t) {\n        var e = this.Re.get(t);\n        return e || (e = new Fi(Fr), this.Re = this.Re.st(t, e)), e;\n      }, oo.prototype.Se = function (t) {\n        var e = null !== this.Ne(t);\n        return e || Lr(\"WatchChangeAggregator\", \"Detected inactive target\", t), e;\n      }, oo.prototype.Ne = function (t) {\n        var e = this.me.get(t);\n        return e && e.ae ? null : this.Ie.Me(t);\n      }, oo.prototype.De = function (e) {\n        var n = this;\n        this.me.set(e, new ro()), this.Ie.Oe(e).forEach(function (t) {\n          n.ye(e, t, null);\n        });\n      }, oo.prototype.$e = function (t, e) {\n        return this.Ie.Oe(t).has(e);\n      }, oo);\n\n      function oo(t) {\n        this.Ie = t, this.me = new Map(), this.Ae = ji, this.Re = lo(), this.Pe = new Fi(Fr);\n      }\n\n      function so() {\n        this.se = 0, this.ie = po(), this.re = Ti.J, this.oe = !1, this.he = !0;\n      }\n\n      function uo(t, e, n, r, i) {\n        this.resumeToken = t, this.Yt = e, this.Jt = n, this.Xt = r, this.Zt = i;\n      }\n\n      function ao(t, e, n, r, i) {\n        this.Z = t, this.Wt = e, this.jt = n, this.Kt = r, this.Gt = i;\n      }\n\n      function co(t, e, n, r, i, o, s, u) {\n        this.query = t, this.docs = e, this.Lt = n, this.docChanges = r, this.qt = i, this.fromCache = o, this.Bt = s, this.Ut = u;\n      }\n\n      function ho() {\n        this.Ot = new xi(si.P);\n      }\n\n      function fo(n) {\n        this.P = n ? function (t, e) {\n          return n(t, e) || si.P(t.key, e.key);\n        } : function (t, e) {\n          return si.P(t.key, e.key);\n        }, this.kt = zi, this.$t = new xi(this.P);\n      }\n\n      function lo() {\n        return new xi(si.P);\n      }\n\n      function po() {\n        return new xi(si.P);\n      }\n\n      function yo(t) {\n        var e, n;\n        return \"server_timestamp\" === (null === (n = ((null === (e = null == t ? void 0 : t.mapValue) || void 0 === e ? void 0 : e.fields) || {}).__type__) || void 0 === n ? void 0 : n.stringValue);\n      }\n\n      function vo(t) {\n        var e = No(t.mapValue.fields.__local_write_time__.timestampValue);\n        return new ti(e.seconds, e.nanos);\n      }\n\n      var go = new RegExp(/^\\d{4}-\\d\\d-\\d\\dT\\d\\d:\\d\\d:\\d\\d(?:\\.(\\d+))?Z$/);\n\n      function mo(t) {\n        return \"nullValue\" in t ? 0 : \"booleanValue\" in t ? 1 : \"integerValue\" in t || \"doubleValue\" in t ? 2 : \"timestampValue\" in t ? 3 : \"stringValue\" in t ? 5 : \"bytesValue\" in t ? 6 : \"referenceValue\" in t ? 7 : \"geoPointValue\" in t ? 8 : \"arrayValue\" in t ? 9 : \"mapValue\" in t ? yo(t) ? 4 : 10 : Cr();\n      }\n\n      function wo(r, i) {\n        var t,\n            e,\n            n,\n            o = mo(r);\n        if (o !== mo(i)) return !1;\n\n        switch (o) {\n          case 0:\n            return !0;\n\n          case 1:\n            return r.booleanValue === i.booleanValue;\n\n          case 4:\n            return vo(r).isEqual(vo(i));\n\n          case 3:\n            return function (t) {\n              if (\"string\" == typeof r.timestampValue && \"string\" == typeof t.timestampValue && r.timestampValue.length === t.timestampValue.length) return r.timestampValue === t.timestampValue;\n              var e = No(r.timestampValue),\n                  n = No(t.timestampValue);\n              return e.seconds === n.seconds && e.nanos === n.nanos;\n            }(i);\n\n          case 5:\n            return r.stringValue === i.stringValue;\n\n          case 6:\n            return n = i, Ao(r.bytesValue).isEqual(Ao(n.bytesValue));\n\n          case 7:\n            return r.referenceValue === i.referenceValue;\n\n          case 8:\n            return e = i, _o((t = r).geoPointValue.latitude) === _o(e.geoPointValue.latitude) && _o(t.geoPointValue.longitude) === _o(e.geoPointValue.longitude);\n\n          case 2:\n            return function (t, e) {\n              if (\"integerValue\" in t && \"integerValue\" in e) return _o(t.integerValue) === _o(e.integerValue);\n\n              if (\"doubleValue\" in t && \"doubleValue\" in e) {\n                var n = _o(t.doubleValue),\n                    r = _o(e.doubleValue);\n\n                return n === r ? vi(n) === vi(r) : isNaN(n) && isNaN(r);\n              }\n\n              return !1;\n            }(r, i);\n\n          case 9:\n            return qr(r.arrayValue.values || [], i.arrayValue.values || [], wo);\n\n          case 10:\n            return function () {\n              var t = r.mapValue.fields || {},\n                  e = i.mapValue.fields || {};\n              if (Hr(t) !== Hr(e)) return !1;\n\n              for (var n in t) {\n                if (t.hasOwnProperty(n) && (void 0 === e[n] || !wo(t[n], e[n]))) return !1;\n              }\n\n              return !0;\n            }();\n\n          default:\n            return Cr();\n        }\n      }\n\n      function bo(t, e) {\n        return void 0 !== (t.values || []).find(function (t) {\n          return wo(t, e);\n        });\n      }\n\n      function Eo(t, e) {\n        var n,\n            r,\n            i,\n            o,\n            s,\n            u,\n            a,\n            c,\n            h,\n            f,\n            l = mo(t),\n            p = mo(e);\n        if (l !== p) return Fr(l, p);\n\n        switch (l) {\n          case 0:\n            return 0;\n\n          case 1:\n            return Fr(t.booleanValue, e.booleanValue);\n\n          case 2:\n            return c = e, h = _o(t.integerValue || t.doubleValue), f = _o(c.integerValue || c.doubleValue), h < f ? -1 : f < h ? 1 : h === f ? 0 : isNaN(h) ? isNaN(f) ? 0 : -1 : 1;\n\n          case 3:\n            return Io(t.timestampValue, e.timestampValue);\n\n          case 4:\n            return Io(vo(t), vo(e));\n\n          case 5:\n            return Fr(t.stringValue, e.stringValue);\n\n          case 6:\n            return o = t.bytesValue, s = e.bytesValue, u = Ao(o), a = Ao(s), u.o(a);\n\n          case 7:\n            return function (t, e) {\n              for (var n = t.split(\"/\"), r = e.split(\"/\"), i = 0; i < n.length && i < r.length; i++) {\n                var o = Fr(n[i], r[i]);\n                if (0 !== o) return o;\n              }\n\n              return Fr(n.length, r.length);\n            }(t.referenceValue, e.referenceValue);\n\n          case 8:\n            return n = t.geoPointValue, r = e.geoPointValue, 0 !== (i = Fr(_o(n.latitude), _o(r.latitude))) ? i : Fr(_o(n.longitude), _o(r.longitude));\n\n          case 9:\n            return function (t, e) {\n              for (var n = t.values || [], r = e.values || [], i = 0; i < n.length && i < r.length; ++i) {\n                var o = Eo(n[i], r[i]);\n                if (o) return o;\n              }\n\n              return Fr(n.length, r.length);\n            }(t.arrayValue, e.arrayValue);\n\n          case 10:\n            return function (t, e) {\n              var n = t.fields || {},\n                  r = Object.keys(n),\n                  i = e.fields || {},\n                  o = Object.keys(i);\n              r.sort(), o.sort();\n\n              for (var s = 0; s < r.length && s < o.length; ++s) {\n                var u = Fr(r[s], o[s]);\n                if (0 !== u) return u;\n                var a = Eo(n[r[s]], i[o[s]]);\n                if (0 !== a) return a;\n              }\n\n              return Fr(r.length, o.length);\n            }(t.mapValue, e.mapValue);\n\n          default:\n            throw Cr();\n        }\n      }\n\n      function Io(t, e) {\n        if (\"string\" == typeof t && \"string\" == typeof e && t.length === e.length) return Fr(t, e);\n        var n = No(t),\n            r = No(e),\n            i = Fr(n.seconds, r.seconds);\n        return 0 !== i ? i : Fr(n.nanos, r.nanos);\n      }\n\n      function To(t) {\n        return function s(i) {\n          return \"nullValue\" in i ? \"null\" : \"booleanValue\" in i ? \"\" + i.booleanValue : \"integerValue\" in i ? \"\" + i.integerValue : \"doubleValue\" in i ? \"\" + i.doubleValue : \"timestampValue\" in i ? \"time(\" + (t = No(i.timestampValue)).seconds + \",\" + t.nanos + \")\" : \"stringValue\" in i ? i.stringValue : \"bytesValue\" in i ? Ao(i.bytesValue).toBase64() : \"referenceValue\" in i ? (n = i.referenceValue, si.U(n).toString()) : \"geoPointValue\" in i ? \"geo(\" + (e = i.geoPointValue).latitude + \",\" + e.longitude + \")\" : \"arrayValue\" in i ? function () {\n            for (var t = \"[\", e = !0, n = 0, r = i.arrayValue.values || []; n < r.length; n++) {\n              e ? e = !1 : t += \",\", t += s(r[n]);\n            }\n\n            return t + \"]\";\n          }() : \"mapValue\" in i ? function (t) {\n            for (var e = \"{\", n = !0, r = 0, i = Object.keys(t.fields || {}).sort(); r < i.length; r++) {\n              var o = i[r];\n              n ? n = !1 : e += \",\", e += o + \":\" + s(t.fields[o]);\n            }\n\n            return e + \"}\";\n          }(i.mapValue) : Cr();\n          var t, e, n;\n        }(t);\n      }\n\n      function No(t) {\n        if (Vr(!!t), \"string\" != typeof t) return {\n          seconds: _o(t.seconds),\n          nanos: _o(t.nanos)\n        };\n        var e,\n            n = 0,\n            r = go.exec(t);\n        Vr(!!r), r[1] && (e = ((e = r[1]) + \"000000000\").substr(0, 9), n = Number(e));\n        var i = new Date(t);\n        return {\n          seconds: Math.floor(i.getTime() / 1e3),\n          nanos: n\n        };\n      }\n\n      function _o(t) {\n        return \"number\" == typeof t ? t : \"string\" == typeof t ? Number(t) : 0;\n      }\n\n      function Ao(t) {\n        return \"string\" == typeof t ? Ti.fromBase64String(t) : Ti.fromUint8Array(t);\n      }\n\n      function So(t, e) {\n        return {\n          referenceValue: \"projects/\" + t.projectId + \"/databases/\" + t.database + \"/documents/\" + e.path.F()\n        };\n      }\n\n      function Do(t) {\n        return t && \"integerValue\" in t;\n      }\n\n      function ko(t) {\n        return !!t && \"arrayValue\" in t;\n      }\n\n      function Ro(t) {\n        return t && \"nullValue\" in t;\n      }\n\n      function Lo(t) {\n        return t && \"doubleValue\" in t && isNaN(Number(t.doubleValue));\n      }\n\n      function xo(t) {\n        return t && \"mapValue\" in t;\n      }\n\n      var Oo = {\n        asc: \"ASCENDING\",\n        desc: \"DESCENDING\"\n      },\n          Po = {\n        \"<\": \"LESS_THAN\",\n        \"<=\": \"LESS_THAN_OR_EQUAL\",\n        \">\": \"GREATER_THAN\",\n        \">=\": \"GREATER_THAN_OR_EQUAL\",\n        \"==\": \"EQUAL\",\n        \"!=\": \"NOT_EQUAL\",\n        \"array-contains\": \"ARRAY_CONTAINS\",\n        in: \"IN\",\n        \"not-in\": \"NOT_IN\",\n        \"array-contains-any\": \"ARRAY_CONTAINS_ANY\"\n      },\n          Co = function Co(t, e) {\n        this.s = t, this.Le = e;\n      };\n\n      function Vo(t) {\n        return {\n          integerValue: \"\" + t\n        };\n      }\n\n      function Uo(t, e) {\n        if (t.Le) {\n          if (isNaN(e)) return {\n            doubleValue: \"NaN\"\n          };\n          if (e === 1 / 0) return {\n            doubleValue: \"Infinity\"\n          };\n          if (e === -1 / 0) return {\n            doubleValue: \"-Infinity\"\n          };\n        }\n\n        return {\n          doubleValue: vi(e) ? \"-0\" : e\n        };\n      }\n\n      function Mo(t, e) {\n        return gi(e) ? Vo(e) : Uo(t, e);\n      }\n\n      function Fo(t, e) {\n        return t.Le ? new Date(1e3 * e.seconds).toISOString().replace(/\\.\\d*/, \"\").replace(\"Z\", \"\") + \".\" + (\"000000000\" + e.nanoseconds).slice(-9) + \"Z\" : {\n          seconds: \"\" + e.seconds,\n          nanos: e.nanoseconds\n        };\n      }\n\n      function qo(t, e) {\n        return t.Le ? e.toBase64() : e.toUint8Array();\n      }\n\n      function jo(t) {\n        return Vr(!!t), ei.I((e = No(t), new ti(e.seconds, e.nanos)));\n        var e;\n      }\n\n      function Go(t, e) {\n        return new ri([\"projects\", t.projectId, \"databases\", t.database]).child(\"documents\").child(e).F();\n      }\n\n      function Bo(t) {\n        var e = ri.k(t);\n        return Vr(os(e)), e;\n      }\n\n      function zo(t, e) {\n        return Go(t.s, e.path);\n      }\n\n      function Ho(t, e) {\n        var n = Bo(e);\n        return Vr(n.get(1) === t.s.projectId), Vr(!n.get(3) && !t.s.database || n.get(3) === t.s.database), new si(Xo(n));\n      }\n\n      function Wo(t, e) {\n        return Go(t.s, e);\n      }\n\n      function Ko(t) {\n        var e = Bo(t);\n        return 4 === e.length ? ri.$() : Xo(e);\n      }\n\n      function Yo(t) {\n        return new ri([\"projects\", t.s.projectId, \"databases\", t.s.database]).F();\n      }\n\n      function Xo(t) {\n        return Vr(4 < t.length && \"documents\" === t.get(4)), t.V(5);\n      }\n\n      function Qo(t, e, n) {\n        return {\n          name: zo(t, e),\n          fields: n.proto.mapValue.fields\n        };\n      }\n\n      function Zo(t, e) {\n        var n, r, i, o, s, u;\n        if (e instanceof Ms) n = {\n          update: Qo(t, e.key, e.value)\n        };else if (e instanceof Xs) n = {\n          delete: zo(t, e.key)\n        };else if (e instanceof Fs) n = {\n          update: Qo(t, e.key, e.data),\n          updateMask: (r = e.qe, i = [], r.fields.forEach(function (t) {\n            return i.push(t.F());\n          }), {\n            fieldPaths: i\n          })\n        };else if (e instanceof zs) n = {\n          transform: {\n            document: zo(t, e.key),\n            fieldTransforms: e.fieldTransforms.map(function (t) {\n              var e = t.transform;\n              if (e instanceof hs) return {\n                fieldPath: t.field.F(),\n                setToServerValue: \"REQUEST_TIME\"\n              };\n              if (e instanceof fs) return {\n                fieldPath: t.field.F(),\n                appendMissingElements: {\n                  values: e.elements\n                }\n              };\n              if (e instanceof vs) return {\n                fieldPath: t.field.F(),\n                removeAllFromArray: {\n                  values: e.elements\n                }\n              };\n              if (e instanceof bs) return {\n                fieldPath: t.field.F(),\n                increment: e.Be\n              };\n              throw Cr();\n            })\n          }\n        };else {\n          if (!(e instanceof Qs)) return Cr();\n          n = {\n            verify: zo(t, e.key)\n          };\n        }\n        return e.Qe.Ue || (n.currentDocument = void 0 !== (o = e.Qe).updateTime ? {\n          updateTime: (s = t, u = o.updateTime, Fo(s, u.A()))\n        } : void 0 !== o.exists ? {\n          exists: o.exists\n        } : Cr()), n;\n      }\n\n      function Jo(e, t) {\n        var n,\n            r,\n            i = t.currentDocument ? void 0 !== (n = t.currentDocument).updateTime ? Ds.updateTime(jo(n.updateTime)) : void 0 !== n.exists ? Ds.exists(n.exists) : Ds.We() : Ds.We();\n\n        if (t.update) {\n          t.update.name;\n          var o = Ho(e, t.update.name),\n              s = new Zs({\n            mapValue: {\n              fields: t.update.fields\n            }\n          });\n\n          if (t.updateMask) {\n            var u = (r = t.updateMask.fieldPaths || [], new Ns(r.map(function (t) {\n              return oi.q(t);\n            })));\n            return new Fs(o, s, u, i);\n          }\n\n          return new Ms(o, s, i);\n        }\n\n        if (t.delete) {\n          var a = Ho(e, t.delete);\n          return new Xs(a, i);\n        }\n\n        if (t.transform) {\n          var c = Ho(e, t.transform.document),\n              h = t.transform.fieldTransforms.map(function (t) {\n            return function (t, e) {\n              var n,\n                  r,\n                  i = null;\n              \"setToServerValue\" in e ? (Vr(\"REQUEST_TIME\" === e.setToServerValue), i = new hs()) : \"appendMissingElements\" in e ? (n = e.appendMissingElements.values || [], i = new fs(n)) : \"removeAllFromArray\" in e ? (r = e.removeAllFromArray.values || [], i = new vs(r)) : \"increment\" in e ? i = new bs(t, e.increment) : Cr();\n              var o = oi.q(e.fieldPath);\n              return new _s(o, i);\n            }(e, t);\n          });\n          return Vr(!0 === i.exists), new zs(c, h);\n        }\n\n        if (t.verify) {\n          var f = Ho(e, t.verify);\n          return new Qs(f, i);\n        }\n\n        return Cr();\n      }\n\n      function $o(t, e) {\n        return {\n          documents: [Wo(t, e.path)]\n        };\n      }\n\n      function ts(t, e) {\n        var n = {\n          structuredQuery: {}\n        },\n            r = e.path;\n        null !== e.collectionGroup ? (n.parent = Wo(t, r), n.structuredQuery.from = [{\n          collectionId: e.collectionGroup,\n          allDescendants: !0\n        }]) : (n.parent = Wo(t, r.p()), n.structuredQuery.from = [{\n          collectionId: r.S()\n        }]);\n\n        var i = function (t) {\n          if (0 !== t.length) {\n            var e = t.map(function (t) {\n              if (\"==\" === t.op) {\n                if (Lo(t.value)) return {\n                  unaryFilter: {\n                    field: rs(t.field),\n                    op: \"IS_NAN\"\n                  }\n                };\n                if (Ro(t.value)) return {\n                  unaryFilter: {\n                    field: rs(t.field),\n                    op: \"IS_NULL\"\n                  }\n                };\n              } else if (\"!=\" === t.op) {\n                if (Lo(t.value)) return {\n                  unaryFilter: {\n                    field: rs(t.field),\n                    op: \"IS_NOT_NAN\"\n                  }\n                };\n                if (Ro(t.value)) return {\n                  unaryFilter: {\n                    field: rs(t.field),\n                    op: \"IS_NOT_NULL\"\n                  }\n                };\n              }\n\n              return {\n                fieldFilter: {\n                  field: rs(t.field),\n                  op: (e = t.op, Po[e]),\n                  value: t.value\n                }\n              };\n              var e;\n            });\n            return 1 === e.length ? e[0] : {\n              compositeFilter: {\n                op: \"AND\",\n                filters: e\n              }\n            };\n          }\n        }(e.filters);\n\n        i && (n.structuredQuery.where = i);\n\n        var o = function (t) {\n          if (0 !== t.length) return t.map(function (t) {\n            return {\n              field: rs((e = t).field),\n              direction: (n = e.dir, Oo[n])\n            };\n            var e, n;\n          });\n        }(e.orderBy);\n\n        o && (n.structuredQuery.orderBy = o);\n        var s,\n            u = (s = e.limit, t.Le || yi(s) ? s : {\n          value: s\n        });\n        return null !== u && (n.structuredQuery.limit = u), e.startAt && (n.structuredQuery.startAt = es(e.startAt)), e.endAt && (n.structuredQuery.endAt = es(e.endAt)), n;\n      }\n\n      function es(t) {\n        return {\n          before: t.before,\n          values: t.position\n        };\n      }\n\n      function ns(t) {\n        var e = !!t.before,\n            n = t.values || [];\n        return new Qu(n, e);\n      }\n\n      function rs(t) {\n        return {\n          fieldPath: t.F()\n        };\n      }\n\n      function is(t) {\n        return oi.q(t.fieldPath);\n      }\n\n      function os(t) {\n        return 4 <= t.length && \"projects\" === t.get(0) && \"databases\" === t.get(2);\n      }\n\n      function ss() {\n        this.je = void 0;\n      }\n\n      function us(t, e) {\n        return t instanceof bs ? Do(n = e) || n && \"doubleValue\" in n ? e : {\n          integerValue: 0\n        } : null;\n        var n;\n      }\n\n      var as,\n          cs,\n          hs = (o(ps, cs = ss), ps),\n          fs = (o(ls, as = ss), ls);\n\n      function ls(t) {\n        var e = this;\n        return (e = as.call(this) || this).elements = t, e;\n      }\n\n      function ps() {\n        return null !== cs && cs.apply(this, arguments) || this;\n      }\n\n      function ds(t, e) {\n        for (var n = Ts(e), r = 0, i = t.elements; r < i.length; r++) {\n          !function (e) {\n            n.some(function (t) {\n              return wo(t, e);\n            }) || n.push(e);\n          }(i[r]);\n        }\n\n        return {\n          arrayValue: {\n            values: n\n          }\n        };\n      }\n\n      var ys,\n          vs = (o(gs, ys = ss), gs);\n\n      function gs(t) {\n        var e = this;\n        return (e = ys.call(this) || this).elements = t, e;\n      }\n\n      function ms(t, e) {\n        for (var n = Ts(e), r = 0, i = t.elements; r < i.length; r++) {\n          !function (e) {\n            n = n.filter(function (t) {\n              return !wo(t, e);\n            });\n          }(i[r]);\n        }\n\n        return {\n          arrayValue: {\n            values: n\n          }\n        };\n      }\n\n      var ws,\n          bs = (o(Es, ws = ss), Es);\n\n      function Es(t, e) {\n        var n = this;\n        return (n = ws.call(this) || this).serializer = t, n.Be = e, n;\n      }\n\n      function Is(t) {\n        return _o(t.integerValue || t.doubleValue);\n      }\n\n      function Ts(t) {\n        return ko(t) && t.arrayValue.values ? t.arrayValue.values.slice() : [];\n      }\n\n      var Ns = (As.prototype.Ke = function (t) {\n        for (var e = 0, n = this.fields; e < n.length; e++) {\n          if (n[e].D(t)) return !0;\n        }\n\n        return !1;\n      }, As.prototype.isEqual = function (t) {\n        return qr(this.fields, t.fields, function (t, e) {\n          return t.isEqual(e);\n        });\n      }, As),\n          _s = function _s(t, e) {\n        this.field = t, this.transform = e;\n      };\n\n      function As(t) {\n        (this.fields = t).sort(oi.P);\n      }\n\n      function Ss(t, e) {\n        this.version = t, this.transformResults = e;\n      }\n\n      var Ds = (ks.We = function () {\n        return new ks();\n      }, ks.exists = function (t) {\n        return new ks(void 0, t);\n      }, ks.updateTime = function (t) {\n        return new ks(t);\n      }, Object.defineProperty(ks.prototype, \"Ue\", {\n        get: function get() {\n          return void 0 === this.updateTime && void 0 === this.exists;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), ks.prototype.isEqual = function (t) {\n        return this.exists === t.exists && (this.updateTime ? !!t.updateTime && this.updateTime.isEqual(t.updateTime) : !t.updateTime);\n      }, ks);\n\n      function ks(t, e) {\n        this.updateTime = t, this.exists = e;\n      }\n\n      function Rs(t, e) {\n        return void 0 !== t.updateTime ? e instanceof uu && e.version.isEqual(t.updateTime) : void 0 === t.exists || t.exists === e instanceof uu;\n      }\n\n      function Ls() {}\n\n      function xs(t, e, n) {\n        return t instanceof Ms ? new uu(t.key, n.version, t.value, {\n          hasCommittedMutations: !0\n        }) : t instanceof Fs ? function (t, e, n) {\n          if (!Rs(t.Qe, e)) return new cu(t.key, n.version);\n          var r = Gs(t, e);\n          return new uu(t.key, n.version, r, {\n            hasCommittedMutations: !0\n          });\n        }(t, e, n) : t instanceof zs ? function (t, e, n) {\n          if (Vr(null != n.transformResults), !Rs(t.Qe, e)) return new cu(t.key, n.version);\n\n          var r = e,\n              i = function (t, e, n) {\n            var r = [];\n            Vr(t.length === n.length);\n\n            for (var i, o, s, u = 0; u < n.length; u++) {\n              var a = t[u],\n                  c = a.transform,\n                  h = null;\n              e instanceof uu && (h = e.field(a.field)), r.push((i = c, o = h, s = n[u], i instanceof fs ? ds(i, o) : i instanceof vs ? ms(i, o) : s));\n            }\n\n            return r;\n          }(t.fieldTransforms, e, n.transformResults),\n              o = n.version,\n              s = Ws(t, r.data(), i);\n\n          return new uu(t.key, o, s, {\n            hasCommittedMutations: !0\n          });\n        }(t, e, n) : new au(t.key, n.version, {\n          hasCommittedMutations: !0\n        });\n      }\n\n      function Os(t, e, n, r) {\n        return t instanceof Ms ? function (t, e) {\n          if (!Rs(t.Qe, e)) return e;\n          var n = Cs(e);\n          return new uu(t.key, n, t.value, {\n            Ge: !0\n          });\n        }(t, e) : t instanceof Fs ? function (t, e) {\n          if (!Rs(t.Qe, e)) return e;\n          var n = Cs(e),\n              r = Gs(t, e);\n          return new uu(t.key, n, r, {\n            Ge: !0\n          });\n        }(t, e) : t instanceof zs ? function (t, e, n, r) {\n          if (!Rs(t.Qe, e)) return e;\n\n          var i = e,\n              o = function (t, e, n, r) {\n            for (var i, o, s, u, a, c, h, f = [], l = 0, p = t; l < p.length; l++) {\n              var d = p[l],\n                  y = d.transform,\n                  v = null;\n              n instanceof uu && (v = n.field(d.field)), null === v && r instanceof uu && (v = r.field(d.field)), f.push((o = v, s = e, h = c = a = u = void 0, (i = y) instanceof hs ? (h = {\n                fields: {\n                  __type__: {\n                    stringValue: \"server_timestamp\"\n                  },\n                  __local_write_time__: {\n                    timestampValue: {\n                      seconds: s.seconds,\n                      nanos: s.nanoseconds\n                    }\n                  }\n                }\n              }, o && (h.fields.__previous_value__ = o), {\n                mapValue: h\n              }) : i instanceof fs ? ds(i, o) : i instanceof vs ? ms(i, o) : (a = us(u = i, o), c = Is(a) + Is(u.Be), Do(a) && Do(u.Be) ? Vo(c) : Uo(u.serializer, c))));\n            }\n\n            return f;\n          }(t.fieldTransforms, n, e, r),\n              s = Ws(t, i.data(), o);\n\n          return new uu(t.key, i.version, s, {\n            Ge: !0\n          });\n        }(t, e, r, n) : (o = e, Rs((i = t).Qe, o) ? new au(i.key, ei.min()) : o);\n        var i, o;\n      }\n\n      function Ps(t, e) {\n        return t.type === e.type && !!t.key.isEqual(e.key) && !!t.Qe.isEqual(e.Qe) && (0 === t.type ? t.value.isEqual(e.value) : 1 === t.type ? t.data.isEqual(e.data) && t.qe.isEqual(e.qe) : 2 !== t.type || qr(t.fieldTransforms, t.fieldTransforms, function (t, e) {\n          return r = e, (n = t).field.isEqual(r.field) && (i = n.transform, o = r.transform, i instanceof fs && o instanceof fs || i instanceof vs && o instanceof vs ? qr(i.elements, o.elements, wo) : i instanceof bs && o instanceof bs ? wo(i.Be, o.Be) : i instanceof hs && o instanceof hs);\n          var n, r, i, o;\n        }));\n      }\n\n      function Cs(t) {\n        return t instanceof uu ? t.version : ei.min();\n      }\n\n      var Vs,\n          Us,\n          Ms = (o(js, Us = Ls), js),\n          Fs = (o(qs, Vs = Ls), qs);\n\n      function qs(t, e, n, r) {\n        var i = this;\n        return (i = Vs.call(this) || this).key = t, i.data = e, i.qe = n, i.Qe = r, i.type = 1, i;\n      }\n\n      function js(t, e, n) {\n        var r = this;\n        return (r = Us.call(this) || this).key = t, r.value = e, r.Qe = n, r.type = 0, r;\n      }\n\n      function Gs(t, e) {\n        return n = t, r = e instanceof uu ? e.data() : Zs.empty(), i = new Js(r), n.qe.fields.forEach(function (t) {\n          var e;\n          t._() || (null !== (e = n.data.field(t)) ? i.set(t, e) : i.delete(t));\n        }), i.ze();\n        var n, r, i;\n      }\n\n      var Bs,\n          zs = (o(Hs, Bs = Ls), Hs);\n\n      function Hs(t, e) {\n        var n = this;\n        return (n = Bs.call(this) || this).key = t, n.fieldTransforms = e, n.type = 2, n.Qe = Ds.exists(!0), n;\n      }\n\n      function Ws(t, e, n) {\n        for (var r = new Js(e), i = 0; i < t.fieldTransforms.length; i++) {\n          var o = t.fieldTransforms[i];\n          r.set(o.field, n[i]);\n        }\n\n        return r.ze();\n      }\n\n      var Ks,\n          Ys,\n          Xs = (o(nu, Ys = Ls), nu),\n          Qs = (o(eu, Ks = Ls), eu),\n          Zs = (tu.empty = function () {\n        return new tu({\n          mapValue: {}\n        });\n      }, tu.prototype.field = function (t) {\n        if (t._()) return this.proto;\n\n        for (var e = this.proto, n = 0; n < t.length - 1; ++n) {\n          if (!e.mapValue.fields) return null;\n          if (!xo(e = e.mapValue.fields[t.get(n)])) return null;\n        }\n\n        return (e = (e.mapValue.fields || {})[t.S()]) || null;\n      }, tu.prototype.isEqual = function (t) {\n        return wo(this.proto, t.proto);\n      }, tu),\n          Js = ($s.prototype.set = function (t, e) {\n        return this.Je(t, e), this;\n      }, $s.prototype.delete = function (t) {\n        return this.Je(t, null), this;\n      }, $s.prototype.Je = function (t, e) {\n        for (var n = this.Ye, r = 0; r < t.length - 1; ++r) {\n          var i = t.get(r),\n              o = n.get(i),\n              n = (o instanceof Map || (o = o && 10 === mo(o) ? new Map(Object.entries(o.mapValue.fields || {})) : new Map(), n.set(i, o)), o);\n        }\n\n        n.set(t.S(), e);\n      }, $s.prototype.ze = function () {\n        var t = this.Xe(oi.$(), this.Ye);\n        return null != t ? new Zs(t) : this.He;\n      }, $s.prototype.Xe = function (r, t) {\n        var i = this,\n            o = !1,\n            e = this.He.field(r),\n            s = xo(e) ? Object.assign({}, e.mapValue.fields) : {};\n        return t.forEach(function (t, e) {\n          var n;\n          t instanceof Map ? null != (n = i.Xe(r.child(e), t)) && (s[e] = n, o = !0) : null !== t ? (s[e] = t, o = !0) : s.hasOwnProperty(e) && (delete s[e], o = !0);\n        }), o ? {\n          mapValue: {\n            fields: s\n          }\n        } : null;\n      }, $s);\n\n      function $s(t) {\n        void 0 === t && (t = Zs.empty()), this.He = t, this.Ye = new Map();\n      }\n\n      function tu(t) {\n        this.proto = t;\n      }\n\n      function eu(t, e) {\n        var n = this;\n        return (n = Ks.call(this) || this).key = t, n.Qe = e, n.type = 4, n;\n      }\n\n      function nu(t, e) {\n        var n = this;\n        return (n = Ys.call(this) || this).key = t, n.Qe = e, n.type = 3, n;\n      }\n\n      function ru(t, e) {\n        this.key = t, this.version = e;\n      }\n\n      var iu,\n          ou,\n          su,\n          uu = (o(lu, su = ru), lu.prototype.field = function (t) {\n        return this.Ze.field(t);\n      }, lu.prototype.data = function () {\n        return this.Ze;\n      }, lu.prototype.tn = function () {\n        return this.Ze.proto;\n      }, lu.prototype.isEqual = function (t) {\n        return t instanceof lu && this.key.isEqual(t.key) && this.version.isEqual(t.version) && this.Ge === t.Ge && this.hasCommittedMutations === t.hasCommittedMutations && this.Ze.isEqual(t.Ze);\n      }, lu.prototype.toString = function () {\n        return \"Document(\" + this.key + \", \" + this.version + \", \" + this.Ze.toString() + \", {hasLocalMutations: \" + this.Ge + \"}), {hasCommittedMutations: \" + this.hasCommittedMutations + \"})\";\n      }, Object.defineProperty(lu.prototype, \"hasPendingWrites\", {\n        get: function get() {\n          return this.Ge || this.hasCommittedMutations;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), lu),\n          au = (o(fu, ou = ru), fu.prototype.toString = function () {\n        return \"NoDocument(\" + this.key + \", \" + this.version + \")\";\n      }, Object.defineProperty(fu.prototype, \"hasPendingWrites\", {\n        get: function get() {\n          return this.hasCommittedMutations;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), fu.prototype.isEqual = function (t) {\n        return t instanceof fu && t.hasCommittedMutations === this.hasCommittedMutations && t.version.isEqual(this.version) && t.key.isEqual(this.key);\n      }, fu),\n          cu = (o(hu, iu = ru), hu.prototype.toString = function () {\n        return \"UnknownDocument(\" + this.key + \", \" + this.version + \")\";\n      }, Object.defineProperty(hu.prototype, \"hasPendingWrites\", {\n        get: function get() {\n          return !0;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), hu.prototype.isEqual = function (t) {\n        return t instanceof hu && t.version.isEqual(this.version) && t.key.isEqual(this.key);\n      }, hu);\n\n      function hu() {\n        return null !== iu && iu.apply(this, arguments) || this;\n      }\n\n      function fu(t, e, n) {\n        var r = this;\n        return (r = ou.call(this, t, e) || this).hasCommittedMutations = !(!n || !n.hasCommittedMutations), r;\n      }\n\n      function lu(t, e, n, r) {\n        var i = this;\n        return (i = su.call(this, t, e) || this).Ze = n, i.Ge = !!r.Ge, i.hasCommittedMutations = !!r.hasCommittedMutations, i;\n      }\n\n      function pu(t, e) {\n        if (!(t instanceof e)) throw e.name === t.constructor.name ? new $r(Jr.INVALID_ARGUMENT, \"Type does not match the expected instance. Did you pass '\" + e.name + \"' from a different Firestore SDK?\") : new $r(Jr.INVALID_ARGUMENT, \"Expected type '\" + e.name + \"', but was '\" + t.constructor.name + \"'\");\n        return t;\n      }\n\n      var du = (yu.prototype.on = function (t) {\n        return new yu(t, null, this.en.slice(), this.filters.slice(), this.limit, this.nn, this.startAt, this.endAt);\n      }, yu.prototype.hn = function () {\n        return 0 === this.filters.length && null === this.limit && null == this.startAt && null == this.endAt && (0 === this.en.length || 1 === this.en.length && this.en[0].field.M());\n      }, yu.prototype.an = function () {\n        return !yi(this.limit) && \"F\" === this.nn;\n      }, yu.prototype.un = function () {\n        return !yi(this.limit) && \"L\" === this.nn;\n      }, yu.prototype.cn = function () {\n        return 0 < this.en.length ? this.en[0].field : null;\n      }, yu.prototype.ln = function () {\n        for (var t = 0, e = this.filters; t < e.length; t++) {\n          var n = e[t];\n          if (n._n()) return n.field;\n        }\n\n        return null;\n      }, yu.prototype.fn = function (t) {\n        for (var e = 0, n = this.filters; e < n.length; e++) {\n          var r = n[e];\n          if (0 <= t.indexOf(r.op)) return r.op;\n        }\n\n        return null;\n      }, yu);\n\n      function yu(t, e, n, r, i, o, s, u) {\n        void 0 === e && (e = null), void 0 === n && (n = []), void 0 === r && (r = []), void 0 === i && (i = null), void 0 === o && (o = \"F\"), void 0 === s && (s = null), void 0 === u && (u = null), this.path = t, this.collectionGroup = e, this.en = n, this.filters = r, this.limit = i, this.nn = o, this.startAt = s, this.endAt = u, this.sn = null, this.rn = null, this.startAt, this.endAt;\n      }\n\n      function vu(t, e, n, r, i, o, s, u) {\n        return new du(t, e, n, r, i, o, s, u);\n      }\n\n      function gu(t) {\n        return new du(t);\n      }\n\n      function mu(t) {\n        return null !== t.collectionGroup;\n      }\n\n      function wu(t) {\n        var e = pu(t, du);\n\n        if (null === e.sn) {\n          e.sn = [];\n          var n = e.ln(),\n              r = e.cn();\n          if (null !== n && null === r) n.M() || e.sn.push(new ia(n)), e.sn.push(new ia(oi.L(), \"asc\"));else {\n            for (var i, o = !1, s = 0, u = e.en; s < u.length; s++) {\n              var a = u[s];\n              e.sn.push(a), a.field.M() && (o = !0);\n            }\n\n            o || (i = 0 < e.en.length ? e.en[e.en.length - 1].dir : \"asc\", e.sn.push(new ia(oi.L(), i)));\n          }\n        }\n\n        return e.sn;\n      }\n\n      function bu(t) {\n        var e = pu(t, du);\n        if (!e.rn) if (\"F\" === e.nn) e.rn = wi(e.path, e.collectionGroup, wu(e), e.filters, e.limit, e.startAt, e.endAt);else {\n          for (var n = [], r = 0, i = wu(e); r < i.length; r++) {\n            var o = i[r],\n                s = \"desc\" === o.dir ? \"asc\" : \"desc\";\n            n.push(new ia(o.field, s));\n          }\n\n          var u = e.endAt ? new Qu(e.endAt.position, !e.endAt.before) : null,\n              a = e.startAt ? new Qu(e.startAt.position, !e.startAt.before) : null;\n          e.rn = wi(e.path, e.collectionGroup, n, e.filters, e.limit, u, a);\n        }\n        return e.rn;\n      }\n\n      function Eu(t, e, n) {\n        return new du(t.path, t.collectionGroup, t.en.slice(), t.filters.slice(), e, n, t.startAt, t.endAt);\n      }\n\n      function Iu(t, e) {\n        return new du(t.path, t.collectionGroup, t.en.slice(), t.filters.slice(), t.limit, t.nn, e, t.endAt);\n      }\n\n      function Tu(t, e) {\n        return new du(t.path, t.collectionGroup, t.en.slice(), t.filters.slice(), t.limit, t.nn, t.startAt, e);\n      }\n\n      function Nu(t, e) {\n        return Ei(bu(t), bu(e)) && t.nn === e.nn;\n      }\n\n      function _u(t) {\n        return bi(bu(t)) + \"|lt:\" + t.nn;\n      }\n\n      function Au(t) {\n        return \"Query(target=\" + (e = bu(t), n = e.path.F(), null !== e.collectionGroup && (n += \" collectionGroup=\" + e.collectionGroup), 0 < e.filters.length && (n += \", filters: [\" + e.filters.map(function (t) {\n          return (e = t).field.F() + \" \" + e.op + \" \" + To(e.value);\n          var e;\n        }).join(\", \") + \"]\"), yi(e.limit) || (n += \", limit: \" + e.limit), 0 < e.orderBy.length && (n += \", orderBy: [\" + e.orderBy.map(function (t) {\n          return (e = t).field.F() + \" (\" + e.dir + \")\";\n          var e;\n        }).join(\", \") + \"]\"), e.startAt && (n += \", startAt: \" + ea(e.startAt)), e.endAt && (n += \", endAt: \" + ea(e.endAt)), \"Target(\" + n + \")\") + \"; limitType=\" + t.nn + \")\";\n        var e, n;\n      }\n\n      function Su(i, t) {\n        return r = i, o = t.key.path, (null !== r.collectionGroup ? t.key.W(r.collectionGroup) && r.path.D(o) : si.j(r.path) ? r.path.isEqual(o) : r.path.C(o)) && function (t) {\n          for (var e = 0, n = i.en; e < n.length; e++) {\n            var r = n[e];\n            if (!r.field.M() && null === t.field(r.field)) return;\n          }\n\n          return 1;\n        }(t) && function (t) {\n          for (var e = 0, n = i.filters; e < n.length; e++) {\n            if (!n[e].matches(t)) return;\n          }\n\n          return 1;\n        }(t) && (n = t, (!(e = i).startAt || na(e.startAt, wu(e), n)) && (!e.endAt || !na(e.endAt, wu(e), n)));\n        var e, n, r, o;\n      }\n\n      function Du(u) {\n        return function (t, e) {\n          for (var n = !1, r = 0, i = wu(u); r < i.length; r++) {\n            var o = i[r],\n                s = function (t, i, e) {\n              var n = t.field.M() ? si.P(i.key, e.key) : function (t, e) {\n                var n = i.field(t),\n                    r = e.field(t);\n                return null !== n && null !== r ? Eo(n, r) : Cr();\n              }(t.field, e);\n\n              switch (t.dir) {\n                case \"asc\":\n                  return n;\n\n                case \"desc\":\n                  return -1 * n;\n\n                default:\n                  return Cr();\n              }\n            }(o, t, e);\n\n            if (0 !== s) return s;\n            n = n || o.field.M();\n          }\n\n          return 0;\n        };\n      }\n\n      var ku,\n          Ru = (o(Lu, ku = function ku() {}), Lu.create = function (t, e, n) {\n        if (t.M()) return \"in\" === e || \"not-in\" === e ? this.dn(t, e, n) : new Cu(t, e, n);\n\n        if (Ro(n)) {\n          if (\"==\" !== e && \"!=\" !== e) throw new $r(Jr.INVALID_ARGUMENT, \"Invalid query. Null supports only equality comparisons.\");\n          return new Lu(t, e, n);\n        }\n\n        if (Lo(n)) {\n          if (\"==\" !== e && \"!=\" !== e) throw new $r(Jr.INVALID_ARGUMENT, \"Invalid query. NaN supports only equality comparisons.\");\n          return new Lu(t, e, n);\n        }\n\n        return \"array-contains\" === e ? new Wu(t, n) : \"in\" === e ? new Ku(t, n) : \"not-in\" === e ? new Yu(t, n) : \"array-contains-any\" === e ? new Xu(t, n) : new Lu(t, e, n);\n      }, Lu.dn = function (t, e, n) {\n        return new (\"in\" === e ? Vu : Uu)(t, n);\n      }, Lu.prototype.matches = function (t) {\n        var e = t.field(this.field);\n        return \"!=\" === this.op ? null !== e && this.wn(Eo(e, this.value)) : null !== e && mo(this.value) === mo(e) && this.wn(Eo(e, this.value));\n      }, Lu.prototype.wn = function (t) {\n        switch (this.op) {\n          case \"<\":\n            return t < 0;\n\n          case \"<=\":\n            return t <= 0;\n\n          case \"==\":\n            return 0 === t;\n\n          case \"!=\":\n            return 0 !== t;\n\n          case \">\":\n            return 0 < t;\n\n          case \">=\":\n            return 0 <= t;\n\n          default:\n            return Cr();\n        }\n      }, Lu.prototype._n = function () {\n        return 0 <= [\"<\", \"<=\", \">\", \">=\", \"!=\"].indexOf(this.op);\n      }, Lu);\n\n      function Lu(t, e, n) {\n        var r = this;\n        return (r = ku.call(this) || this).field = t, r.op = e, r.value = n, r;\n      }\n\n      var xu,\n          Ou,\n          Pu,\n          Cu = (o(qu, Pu = Ru), qu.prototype.matches = function (t) {\n        var e = si.P(t.key, this.key);\n        return this.wn(e);\n      }, qu),\n          Vu = (o(Fu, Ou = Ru), Fu.prototype.matches = function (e) {\n        return this.keys.some(function (t) {\n          return t.isEqual(e.key);\n        });\n      }, Fu),\n          Uu = (o(Mu, xu = Ru), Mu.prototype.matches = function (e) {\n        return !this.keys.some(function (t) {\n          return t.isEqual(e.key);\n        });\n      }, Mu);\n\n      function Mu(t, e) {\n        var n = this;\n        return (n = xu.call(this, t, \"not-in\", e) || this).keys = ju(0, e), n;\n      }\n\n      function Fu(t, e) {\n        var n = this;\n        return (n = Ou.call(this, t, \"in\", e) || this).keys = ju(0, e), n;\n      }\n\n      function qu(t, e, n) {\n        var r = this;\n        return (r = Pu.call(this, t, e, n) || this).key = si.U(n.referenceValue), r;\n      }\n\n      function ju(t, e) {\n        var n;\n        return ((null === (n = e.arrayValue) || void 0 === n ? void 0 : n.values) || []).map(function (t) {\n          return si.U(t.referenceValue);\n        });\n      }\n\n      var Gu,\n          Bu,\n          zu,\n          Hu,\n          Wu = (o(ta, Hu = Ru), ta.prototype.matches = function (t) {\n        var e = t.field(this.field);\n        return ko(e) && bo(e.arrayValue, this.value);\n      }, ta),\n          Ku = (o($u, zu = Ru), $u.prototype.matches = function (t) {\n        var e = t.field(this.field);\n        return null !== e && bo(this.value.arrayValue, e);\n      }, $u),\n          Yu = (o(Ju, Bu = Ru), Ju.prototype.matches = function (t) {\n        var e = t.field(this.field);\n        return null !== e && !bo(this.value.arrayValue, e);\n      }, Ju),\n          Xu = (o(Zu, Gu = Ru), Zu.prototype.matches = function (t) {\n        var e = this,\n            n = t.field(this.field);\n        return !(!ko(n) || !n.arrayValue.values) && n.arrayValue.values.some(function (t) {\n          return bo(e.value.arrayValue, t);\n        });\n      }, Zu),\n          Qu = function Qu(t, e) {\n        this.position = t, this.before = e;\n      };\n\n      function Zu(t, e) {\n        return Gu.call(this, t, \"array-contains-any\", e) || this;\n      }\n\n      function Ju(t, e) {\n        return Bu.call(this, t, \"not-in\", e) || this;\n      }\n\n      function $u(t, e) {\n        return zu.call(this, t, \"in\", e) || this;\n      }\n\n      function ta(t, e) {\n        return Hu.call(this, t, \"array-contains\", e) || this;\n      }\n\n      function ea(t) {\n        return (t.before ? \"b\" : \"a\") + \":\" + t.position.map(To).join(\",\");\n      }\n\n      function na(t, e, n) {\n        for (var r = 0, i = 0; i < t.position.length; i++) {\n          var o = e[i],\n              s = t.position[i],\n              r = o.field.M() ? si.P(si.U(s.referenceValue), n.key) : Eo(s, n.field(o.field));\n          if (\"desc\" === o.dir && (r *= -1), 0 !== r) break;\n        }\n\n        return t.before ? r <= 0 : r < 0;\n      }\n\n      function ra(t, e) {\n        if (null === t) return null === e;\n        if (null === e) return !1;\n        if (t.before !== e.before || t.position.length !== e.position.length) return !1;\n\n        for (var n = 0; n < t.position.length; n++) {\n          if (!wo(t.position[n], e.position[n])) return !1;\n        }\n\n        return !0;\n      }\n\n      var ia = function ia(t, e) {\n        void 0 === e && (e = \"asc\"), this.field = t, this.dir = e;\n      };\n\n      var oa = (Ea.prototype.En = function (t, e, n) {\n        for (var r = n.In, i = 0; i < this.mutations.length; i++) {\n          var o = this.mutations[i];\n          o.key.isEqual(t) && (e = xs(o, e, r[i]));\n        }\n\n        return e;\n      }, Ea.prototype.mn = function (t, e) {\n        for (var n = 0, r = this.baseMutations; n < r.length; n++) {\n          var i = r[n];\n          i.key.isEqual(t) && (e = Os(i, e, e, this.Tn));\n        }\n\n        for (var o = e, s = 0, u = this.mutations; s < u.length; s++) {\n          var a = u[s];\n          a.key.isEqual(t) && (e = Os(a, e, o, this.Tn));\n        }\n\n        return e;\n      }, Ea.prototype.An = function (n) {\n        var r = this,\n            i = n;\n        return this.mutations.forEach(function (t) {\n          var e = r.mn(t.key, n.get(t.key));\n          e && (i = i.st(t.key, e));\n        }), i;\n      }, Ea.prototype.keys = function () {\n        return this.mutations.reduce(function (t, e) {\n          return t.add(e.key);\n        }, Ki());\n      }, Ea.prototype.isEqual = function (t) {\n        return this.batchId === t.batchId && qr(this.mutations, t.mutations, Ps) && qr(this.baseMutations, t.baseMutations, Ps);\n      }, Ea),\n          sa = (ba.from = function (t, e, n) {\n        Vr(t.mutations.length === n.length);\n\n        for (var r = Hi, i = t.mutations, o = 0; o < i.length; o++) {\n          r = r.st(i[o].key, n[o].version);\n        }\n\n        return new ba(t, e, n, r);\n      }, ba),\n          ua = (wa.prototype.catch = function (t) {\n        return this.next(void 0, t);\n      }, wa.prototype.next = function (r, i) {\n        var o = this;\n        return this.pn && Cr(), this.pn = !0, this.yn ? this.error ? this.bn(i, this.error) : this.vn(r, this.result) : new wa(function (e, n) {\n          o.gn = function (t) {\n            o.vn(r, t).next(e, n);\n          }, o.Vn = function (t) {\n            o.bn(i, t).next(e, n);\n          };\n        });\n      }, wa.prototype.Sn = function () {\n        var n = this;\n        return new Promise(function (t, e) {\n          n.next(t, e);\n        });\n      }, wa.prototype.Dn = function (t) {\n        try {\n          var e = t();\n          return e instanceof wa ? e : wa.resolve(e);\n        } catch (t) {\n          return wa.reject(t);\n        }\n      }, wa.prototype.vn = function (t, e) {\n        return t ? this.Dn(function () {\n          return t(e);\n        }) : wa.resolve(e);\n      }, wa.prototype.bn = function (t, e) {\n        return t ? this.Dn(function () {\n          return t(e);\n        }) : wa.reject(e);\n      }, wa.resolve = function (n) {\n        return new wa(function (t, e) {\n          t(n);\n        });\n      }, wa.reject = function (n) {\n        return new wa(function (t, e) {\n          e(n);\n        });\n      }, wa.Cn = function (t) {\n        return new wa(function (e, n) {\n          var r = 0,\n              i = 0,\n              o = !1;\n          t.forEach(function (t) {\n            ++r, t.next(function () {\n              ++i, o && i === r && e();\n            }, function (t) {\n              return n(t);\n            });\n          }), o = !0, i === r && e();\n        });\n      }, wa.Nn = function (t) {\n        for (var n = wa.resolve(!1), e = 0, r = t; e < r.length; e++) {\n          !function (e) {\n            n = n.next(function (t) {\n              return t ? wa.resolve(t) : e();\n            });\n          }(r[e]);\n        }\n\n        return n;\n      }, wa.forEach = function (t, n) {\n        var r = this,\n            i = [];\n        return t.forEach(function (t, e) {\n          i.push(n.call(r, t, e));\n        }), this.Cn(i);\n      }, wa),\n          aa = (Object.defineProperty(ma.prototype, \"readTime\", {\n        get: function get() {\n          return this.$n;\n        },\n        set: function set(t) {\n          this.$n = t;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), ma.prototype.xn = function (t, e) {\n        this.On(), this.readTime = e, this.Fn.set(t.key, t);\n      }, ma.prototype.Mn = function (t, e) {\n        this.On(), e && (this.readTime = e), this.Fn.set(t, null);\n      }, ma.prototype.Ln = function (t, e) {\n        this.On();\n        var n = this.Fn.get(e);\n        return void 0 !== n ? ua.resolve(n) : this.qn(t, e);\n      }, ma.prototype.getEntries = function (t, e) {\n        return this.Bn(t, e);\n      }, ma.prototype.apply = function (t) {\n        return this.On(), this.kn = !0, this.Un(t);\n      }, ma.prototype.On = function () {}, ma),\n          ca = \"The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.\",\n          ha = (ga.prototype.Wn = function (t) {\n        this.Qn.push(t);\n      }, ga.prototype.jn = function () {\n        this.Qn.forEach(function (t) {\n          return t();\n        });\n      }, ga),\n          fa = (va.prototype.Hn = function (e, n) {\n        var r = this;\n        return this.Gn.Yn(e, n).next(function (t) {\n          return r.Jn(e, n, t);\n        });\n      }, va.prototype.Jn = function (t, r, i) {\n        return this.Kn.Ln(t, r).next(function (t) {\n          for (var e = 0, n = i; e < n.length; e++) {\n            t = n[e].mn(r, t);\n          }\n\n          return t;\n        });\n      }, va.prototype.Xn = function (t, e, i) {\n        var o = ji;\n        return e.forEach(function (t, e) {\n          for (var n = 0, r = i; n < r.length; n++) {\n            e = r[n].mn(t, e);\n          }\n\n          o = o.st(t, e);\n        }), o;\n      }, va.prototype.Zn = function (e, t) {\n        var n = this;\n        return this.Kn.getEntries(e, t).next(function (t) {\n          return n.ts(e, t);\n        });\n      }, va.prototype.ts = function (r, i) {\n        var o = this;\n        return this.Gn.es(r, i).next(function (t) {\n          var e = o.Xn(r, i, t),\n              n = ji;\n          return e.forEach(function (t, e) {\n            e = e || new au(t, ei.min()), n = n.st(t, e);\n          }), n;\n        });\n      }, va.prototype.ns = function (t, e, n) {\n        return r = e, si.j(r.path) && null === r.collectionGroup && 0 === r.filters.length ? this.ss(t, e.path) : mu(e) ? this.rs(t, e, n) : this.os(t, e, n);\n        var r;\n      }, va.prototype.ss = function (t, e) {\n        return this.Hn(t, new si(e)).next(function (t) {\n          var e = zi;\n          return t instanceof uu && (e = e.st(t.key, t)), e;\n        });\n      }, va.prototype.rs = function (n, r, i) {\n        var o = this,\n            s = r.collectionGroup,\n            u = zi;\n        return this.zn.hs(n, s).next(function (t) {\n          return ua.forEach(t, function (t) {\n            var e = r.on(t.child(s));\n            return o.os(n, e, i).next(function (t) {\n              t.forEach(function (t, e) {\n                u = u.st(t, e);\n              });\n            });\n          }).next(function () {\n            return u;\n          });\n        });\n      }, va.prototype.os = function (e, n, t) {\n        var h,\n            f,\n            r = this;\n        return this.Kn.ns(e, n, t).next(function (t) {\n          return h = t, r.Gn.as(e, n);\n        }).next(function (t) {\n          return f = t, r.us(e, f, h).next(function (t) {\n            h = t;\n\n            for (var e = 0, n = f; e < n.length; e++) {\n              for (var r = n[e], i = 0, o = r.mutations; i < o.length; i++) {\n                var s = o[i],\n                    u = s.key,\n                    a = h.get(u),\n                    c = Os(s, a, a, r.Tn);\n                h = c instanceof uu ? h.st(u, c) : h.remove(u);\n              }\n            }\n          });\n        }).next(function () {\n          return h.forEach(function (t, e) {\n            Su(n, e) || (h = h.remove(t));\n          }), h;\n        });\n      }, va.prototype.us = function (t, e, n) {\n        for (var r = Ki(), i = 0, o = e; i < o.length; i++) {\n          for (var s = 0, u = o[i].mutations; s < u.length; s++) {\n            var a = u[s];\n            a instanceof Fs && null === n.get(a.key) && (r = r.add(a.key));\n          }\n        }\n\n        var c = n;\n        return this.Kn.getEntries(t, r).next(function (t) {\n          return t.forEach(function (t, e) {\n            null !== e && e instanceof uu && (c = c.st(t, e));\n          }), c;\n        });\n      }, va),\n          la = (ya._s = function (t, e) {\n        for (var n = Ki(), r = Ki(), i = 0, o = e.docChanges; i < o.length; i++) {\n          var s = o[i];\n\n          switch (s.type) {\n            case 0:\n              n = n.add(s.doc.key);\n              break;\n\n            case 1:\n              r = r.add(s.doc.key);\n          }\n        }\n\n        return new ya(t, e.fromCache, n, r);\n      }, ya),\n          pa = (da.prototype.ds = function (t) {\n        return this.previousValue = Math.max(t, this.previousValue), this.previousValue;\n      }, da.prototype.next = function () {\n        var t = ++this.previousValue;\n        return this.ws && this.ws(t), t;\n      }, da);\n\n      function da(t, e) {\n        var n = this;\n        this.previousValue = t, e && (e.fs = function (t) {\n          return n.ds(t);\n        }, this.ws = function (t) {\n          return e.Ts(t);\n        });\n      }\n\n      function ya(t, e, n, r) {\n        this.targetId = t, this.fromCache = e, this.cs = n, this.ls = r;\n      }\n\n      function va(t, e, n) {\n        this.Kn = t, this.Gn = e, this.zn = n;\n      }\n\n      function ga() {\n        this.Qn = [];\n      }\n\n      function ma() {\n        this.Fn = new Zr(function (t) {\n          return t.toString();\n        }, function (t, e) {\n          return t.isEqual(e);\n        }), this.kn = !1;\n      }\n\n      function wa(t) {\n        var e = this;\n        this.gn = null, this.Vn = null, this.result = void 0, this.error = void 0, this.yn = !1, this.pn = !1, t(function (t) {\n          e.yn = !0, e.result = t, e.gn && e.gn(t);\n        }, function (t) {\n          e.yn = !0, e.error = t, e.Vn && e.Vn(t);\n        });\n      }\n\n      function ba(t, e, n, r) {\n        this.batch = t, this.Rn = e, this.In = n, this.Pn = r;\n      }\n\n      function Ea(t, e, n, r) {\n        this.batchId = t, this.Tn = e, this.baseMutations = n, this.mutations = r;\n      }\n\n      pa.Es = -1;\n\n      function Ia() {\n        var n = this;\n        this.promise = new Promise(function (t, e) {\n          n.resolve = t, n.reject = e;\n        });\n      }\n\n      var Ta,\n          Na = (La.prototype.reset = function () {\n        this.gs = 0;\n      }, La.prototype.ps = function () {\n        this.gs = this.Ps;\n      }, La.prototype.bs = function (t) {\n        var e = this;\n        this.cancel();\n        var n = Math.floor(this.gs + this.vs()),\n            r = Math.max(0, Date.now() - this.ys),\n            i = Math.max(0, n - r);\n        0 < i && Lr(\"ExponentialBackoff\", \"Backing off for \" + i + \" ms (base delay: \" + this.gs + \" ms, delay with jitter: \" + n + \" ms, last attempt: \" + r + \" ms ago)\"), this.Vs = this.Is.Ss(this.ms, i, function () {\n          return e.ys = Date.now(), t();\n        }), this.gs *= this.Rs, this.gs < this.As && (this.gs = this.As), this.gs > this.Ps && (this.gs = this.Ps);\n      }, La.prototype.Ds = function () {\n        null !== this.Vs && (this.Vs.Cs(), this.Vs = null);\n      }, La.prototype.cancel = function () {\n        null !== this.Vs && (this.Vs.cancel(), this.Vs = null);\n      }, La.prototype.vs = function () {\n        return (Math.random() - .5) * this.gs;\n      }, La),\n          _a = (Ra.delete = function (t) {\n        return Lr(\"SimpleDb\", \"Removing database:\", t), Ua(window.indexedDB.deleteDatabase(t)).Sn();\n      }, Ra.ks = function () {\n        if (\"undefined\" == typeof indexedDB) return !1;\n        if (Ra.$s()) return !0;\n        var t = y(),\n            e = Ra.Fs(t),\n            n = 0 < e && e < 10,\n            r = Ra.xs(t),\n            i = 0 < r && r < 4.5;\n        return !(0 < t.indexOf(\"MSIE \") || 0 < t.indexOf(\"Trident/\") || 0 < t.indexOf(\"Edge/\") || n || i);\n      }, Ra.$s = function () {\n        var t;\n        return \"undefined\" != typeof process && \"YES\" === (null === (t = process.env) || void 0 === t ? void 0 : t.Os);\n      }, Ra.Ms = function (t, e) {\n        return t.store(e);\n      }, Ra.Fs = function (t) {\n        var e = t.match(/i(?:phone|pad|pod) os ([\\d_]+)/i),\n            n = e ? e[1].split(\"_\").slice(0, 2).join(\".\") : \"-1\";\n        return Number(n);\n      }, Ra.xs = function (t) {\n        var e = t.match(/Android ([\\d.]+)/i),\n            n = e ? e[1].split(\".\").slice(0, 2).join(\".\") : \"-1\";\n        return Number(n);\n      }, Ra.prototype.Ls = function () {\n        return g(this, void 0, void 0, function () {\n          var e,\n              o = this;\n          return w(this, function (t) {\n            switch (t.label) {\n              case 0:\n                return this.db ? [3, 2] : (Lr(\"SimpleDb\", \"Opening database:\", this.name), e = this, [4, new Promise(function (n, r) {\n                  var i = indexedDB.open(o.name, o.version);\n                  i.onsuccess = function (t) {\n                    var e = t.target.result;\n                    n(e);\n                  }, i.onblocked = function () {\n                    r(new Sa(\"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed.\"));\n                  }, i.onerror = function (t) {\n                    var e = t.target.error;\n                    \"VersionError\" === e.name ? r(new $r(Jr.FAILED_PRECONDITION, \"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.\")) : r(new Sa(e));\n                  }, i.onupgradeneeded = function (t) {\n                    Lr(\"SimpleDb\", 'Database \"' + o.name + '\" requires upgrade from version:', t.oldVersion);\n                    var e = t.target.result;\n                    o.Ns.createOrUpgrade(e, i.transaction, t.oldVersion, o.version).next(function () {\n                      Lr(\"SimpleDb\", \"Database upgrade to version \" + o.version + \" complete\");\n                    });\n                  };\n                })]);\n\n              case 1:\n                e.db = t.sent(), t.label = 2;\n\n              case 2:\n                return [2, (this.qs && (this.db.onversionchange = function (t) {\n                  return o.qs(t);\n                }), this.db)];\n            }\n          });\n        });\n      }, Ra.prototype.Bs = function (e) {\n        this.qs = e, this.db && (this.db.onversionchange = function (t) {\n          return e(t);\n        });\n      }, Ra.prototype.runTransaction = function (r, c, h) {\n        return g(this, void 0, void 0, function () {\n          var s, u, e, a, n;\n          return w(this, function (t) {\n            switch (t.label) {\n              case 0:\n                s = \"readonly\" === r, u = 0, e = function e() {\n                  var e, n, r, i, o;\n                  return w(this, function (t) {\n                    switch (t.label) {\n                      case 0:\n                        ++u, t.label = 1;\n\n                      case 1:\n                        return t.trys.push([1, 4,, 5]), [4, a.Ls()];\n\n                      case 2:\n                        return a.db = t.sent(), e = Oa.open(a.db, s ? \"readonly\" : \"readwrite\", c), n = h(e).catch(function (t) {\n                          return e.abort(t), ua.reject(t);\n                        }).Sn(), r = {}, n.catch(function () {}), [4, e.Us];\n\n                      case 3:\n                        return [2, (r.value = (t.sent(), n), r)];\n\n                      case 4:\n                        return i = t.sent(), o = \"FirebaseError\" !== i.name && u < 3, Lr(\"SimpleDb\", \"Transaction failed with error: %s. Retrying: %s.\", i.message, o), a.close(), o ? [3, 5] : [2, {\n                          value: Promise.reject(i)\n                        }];\n\n                      case 5:\n                        return [2];\n                    }\n                  });\n                }, a = this, t.label = 1;\n\n              case 1:\n                return [5, e()];\n\n              case 2:\n                if (\"object\" == typeof (n = t.sent())) return [2, n.value];\n                t.label = 3;\n\n              case 3:\n                return [3, 1];\n\n              case 4:\n                return [2];\n            }\n          });\n        });\n      }, Ra.prototype.close = function () {\n        this.db && this.db.close(), this.db = void 0;\n      }, Ra),\n          Aa = (Object.defineProperty(ka.prototype, \"yn\", {\n        get: function get() {\n          return this.Ws;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(ka.prototype, \"Ks\", {\n        get: function get() {\n          return this.js;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(ka.prototype, \"cursor\", {\n        set: function set(t) {\n          this.Qs = t;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), ka.prototype.done = function () {\n        this.Ws = !0;\n      }, ka.prototype.Gs = function (t) {\n        this.js = t;\n      }, ka.prototype.delete = function () {\n        return Ua(this.Qs.delete());\n      }, ka),\n          Sa = (o(Da, Ta = $r), Da);\n\n      function Da(t) {\n        var e = this;\n        return (e = Ta.call(this, Jr.UNAVAILABLE, \"IndexedDB transaction failed: \" + t) || this).name = \"IndexedDbTransactionError\", e;\n      }\n\n      function ka(t) {\n        this.Qs = t, this.Ws = !1, this.js = null;\n      }\n\n      function Ra(t, e, n) {\n        this.name = t, this.version = e, this.Ns = n, 12.2 === Ra.Fs(y()) && xr(\"Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.\");\n      }\n\n      function La(t, e, n, r, i) {\n        void 0 === n && (n = 1e3), void 0 === r && (r = 1.5), void 0 === i && (i = 6e4), this.Is = t, this.ms = e, this.As = n, this.Rs = r, this.Ps = i, this.gs = 0, this.Vs = null, this.ys = Date.now(), this.reset();\n      }\n\n      function xa(t) {\n        return \"IndexedDbTransactionError\" === t.name;\n      }\n\n      var Oa = (Va.open = function (t, e, n) {\n        try {\n          return new Va(t.transaction(n, e));\n        } catch (t) {\n          throw new Sa(t);\n        }\n      }, Object.defineProperty(Va.prototype, \"Us\", {\n        get: function get() {\n          return this.zs.promise;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Va.prototype.abort = function (t) {\n        t && this.zs.reject(t), this.aborted || (Lr(\"SimpleDb\", \"Aborting transaction:\", t ? t.message : \"Client-initiated abort\"), this.aborted = !0, this.transaction.abort());\n      }, Va.prototype.store = function (t) {\n        var e = this.transaction.objectStore(t);\n        return new Pa(e);\n      }, Va),\n          Pa = (Ca.prototype.put = function (t, e) {\n        var n = void 0 !== e ? (Lr(\"SimpleDb\", \"PUT\", this.store.name, t, e), this.store.put(e, t)) : (Lr(\"SimpleDb\", \"PUT\", this.store.name, \"<auto-key>\", t), this.store.put(t));\n        return Ua(n);\n      }, Ca.prototype.add = function (t) {\n        return Lr(\"SimpleDb\", \"ADD\", this.store.name, t, t), Ua(this.store.add(t));\n      }, Ca.prototype.get = function (e) {\n        var n = this;\n        return Ua(this.store.get(e)).next(function (t) {\n          return void 0 === t && (t = null), Lr(\"SimpleDb\", \"GET\", n.store.name, e, t), t;\n        });\n      }, Ca.prototype.delete = function (t) {\n        return Lr(\"SimpleDb\", \"DELETE\", this.store.name, t), Ua(this.store.delete(t));\n      }, Ca.prototype.count = function () {\n        return Lr(\"SimpleDb\", \"COUNT\", this.store.name), Ua(this.store.count());\n      }, Ca.prototype.Hs = function (t, e) {\n        var n = this.cursor(this.options(t, e)),\n            r = [];\n        return this.Ys(n, function (t, e) {\n          r.push(e);\n        }).next(function () {\n          return r;\n        });\n      }, Ca.prototype.Js = function (t, e) {\n        Lr(\"SimpleDb\", \"DELETE ALL\", this.store.name);\n        var n = this.options(t, e);\n        n.Xs = !1;\n        var r = this.cursor(n);\n        return this.Ys(r, function (t, e, n) {\n          return n.delete();\n        });\n      }, Ca.prototype.Zs = function (t, e) {\n        var n;\n        e ? n = t : (n = {}, e = t);\n        var r = this.cursor(n);\n        return this.Ys(r, e);\n      }, Ca.prototype.ti = function (i) {\n        var t = this.cursor({});\n        return new ua(function (n, r) {\n          t.onerror = function (t) {\n            var e = Fa(t.target.error);\n            r(e);\n          }, t.onsuccess = function (t) {\n            var e = t.target.result;\n            e ? i(e.primaryKey, e.value).next(function (t) {\n              t ? e.continue() : n();\n            }) : n();\n          };\n        });\n      }, Ca.prototype.Ys = function (t, s) {\n        var u = [];\n        return new ua(function (o, e) {\n          t.onerror = function (t) {\n            e(t.target.error);\n          }, t.onsuccess = function (t) {\n            var e,\n                n,\n                r,\n                i = t.target.result;\n            i ? (e = new Aa(i), (n = s(i.primaryKey, i.value, e)) instanceof ua && (r = n.catch(function (t) {\n              return e.done(), ua.reject(t);\n            }), u.push(r)), e.yn ? o() : null === e.Ks ? i.continue() : i.continue(e.Ks)) : o();\n          };\n        }).next(function () {\n          return ua.Cn(u);\n        });\n      }, Ca.prototype.options = function (t, e) {\n        var n = void 0;\n        return void 0 !== t && (\"string\" == typeof t ? n = t : e = t), {\n          index: n,\n          range: e\n        };\n      }, Ca.prototype.cursor = function (t) {\n        var e = \"next\";\n\n        if (t.reverse && (e = \"prev\"), t.index) {\n          var n = this.store.index(t.index);\n          return t.Xs ? n.openKeyCursor(t.range, e) : n.openCursor(t.range, e);\n        }\n\n        return this.store.openCursor(t.range, e);\n      }, Ca);\n\n      function Ca(t) {\n        this.store = t;\n      }\n\n      function Va(t) {\n        var n = this;\n        this.transaction = t, this.aborted = !1, this.zs = new Ia(), this.transaction.oncomplete = function () {\n          n.zs.resolve();\n        }, this.transaction.onabort = function () {\n          t.error ? n.zs.reject(new Sa(t.error)) : n.zs.resolve();\n        }, this.transaction.onerror = function (t) {\n          var e = Fa(t.target.error);\n          n.zs.reject(new Sa(e));\n        };\n      }\n\n      function Ua(t) {\n        return new ua(function (n, r) {\n          t.onsuccess = function (t) {\n            var e = t.target.result;\n            n(e);\n          }, t.onerror = function (t) {\n            var e = Fa(t.target.error);\n            r(e);\n          };\n        });\n      }\n\n      var Ma = !1;\n\n      function Fa(t) {\n        var e = _a.Fs(y());\n\n        if (12.2 <= e && e < 13) {\n          var n = \"An internal error was encountered in the Indexed Database server\";\n\n          if (0 <= t.message.indexOf(n)) {\n            var r = new $r(\"internal\", \"IOS_INDEXEDDB_BUG1: IndexedDb has thrown '\" + n + \"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.\");\n            return Ma || (Ma = !0, setTimeout(function () {\n              throw r;\n            }, 0)), r;\n          }\n        }\n\n        return t;\n      }\n\n      function qa() {\n        return \"undefined\" != typeof window ? window : null;\n      }\n\n      function ja() {\n        return \"undefined\" != typeof document ? document : null;\n      }\n\n      var Ga = (Ha.ri = function (t, e, n, r, i) {\n        var o = new Ha(t, e, Date.now() + n, r, i);\n        return o.start(n), o;\n      }, Ha.prototype.start = function (t) {\n        var e = this;\n        this.oi = setTimeout(function () {\n          return e.hi();\n        }, t);\n      }, Ha.prototype.Cs = function () {\n        return this.hi();\n      }, Ha.prototype.cancel = function (t) {\n        null !== this.oi && (this.clearTimeout(), this.ii.reject(new $r(Jr.CANCELLED, \"Operation cancelled\" + (t ? \": \" + t : \"\"))));\n      }, Ha.prototype.hi = function () {\n        var e = this;\n        this.ei.ai(function () {\n          return null !== e.oi ? (e.clearTimeout(), e.op().then(function (t) {\n            return e.ii.resolve(t);\n          })) : Promise.resolve();\n        });\n      }, Ha.prototype.clearTimeout = function () {\n        null !== this.oi && (this.si(this), clearTimeout(this.oi), this.oi = null);\n      }, Ha),\n          Ba = (Object.defineProperty(za.prototype, \"Ii\", {\n        get: function get() {\n          return this.li;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), za.prototype.ai = function (t) {\n        this.enqueue(t);\n      }, za.prototype.mi = function (t) {\n        this.Ai(), this.Ri(t);\n      }, za.prototype.Pi = function () {\n        var t;\n        this.li || (this.li = !0, (t = ja()) && \"function\" == typeof t.removeEventListener && t.removeEventListener(\"visibilitychange\", this.Ei));\n      }, za.prototype.enqueue = function (t) {\n        return this.Ai(), this.li ? new Promise(function (t) {}) : this.Ri(t);\n      }, za.prototype.gi = function (t) {\n        var e = this;\n        this.ci.push(t), this.ai(function () {\n          return e.Vi();\n        });\n      }, za.prototype.Vi = function () {\n        return g(this, void 0, void 0, function () {\n          var e,\n              n = this;\n          return w(this, function (t) {\n            switch (t.label) {\n              case 0:\n                if (0 === this.ci.length) return [3, 5];\n                t.label = 1;\n\n              case 1:\n                return t.trys.push([1, 3,, 4]), [4, this.ci[0]()];\n\n              case 2:\n                return t.sent(), this.ci.shift(), this.Ti.reset(), [3, 4];\n\n              case 3:\n                if (!xa(e = t.sent())) throw e;\n                return Lr(\"AsyncQueue\", \"Operation failed with retryable error: \" + e), [3, 4];\n\n              case 4:\n                0 < this.ci.length && this.Ti.bs(function () {\n                  return n.Vi();\n                }), t.label = 5;\n\n              case 5:\n                return [2];\n            }\n          });\n        });\n      }, za.prototype.Ri = function (t) {\n        var r = this,\n            e = this.ui.then(function () {\n          return r.di = !0, t().catch(function (t) {\n            throw r.fi = t, r.di = !1, xr(\"INTERNAL UNHANDLED ERROR: \", (n = (e = t).message || \"\", e.stack && (n = e.stack.includes(e.message) ? e.stack : e.message + \"\\n\" + e.stack), n)), t;\n            var e, n;\n          }).then(function (t) {\n            return r.di = !1, t;\n          });\n        });\n        return this.ui = e;\n      }, za.prototype.Ss = function (t, e, n) {\n        var r = this;\n        this.Ai(), -1 < this.wi.indexOf(t) && (e = 0);\n        var i = Ga.ri(this, t, e, n, function (t) {\n          return r.yi(t);\n        });\n        return this._i.push(i), i;\n      }, za.prototype.Ai = function () {\n        this.fi && Cr();\n      }, za.prototype.pi = function () {}, za.prototype.bi = function () {\n        return g(this, void 0, void 0, function () {\n          var e;\n          return w(this, function (t) {\n            switch (t.label) {\n              case 0:\n                return [4, e = this.ui];\n\n              case 1:\n                t.sent(), t.label = 2;\n\n              case 2:\n                if (e !== this.ui) return [3, 0];\n                t.label = 3;\n\n              case 3:\n                return [2];\n            }\n          });\n        });\n      }, za.prototype.vi = function (t) {\n        for (var e = 0, n = this._i; e < n.length; e++) {\n          if (n[e].ms === t) return !0;\n        }\n\n        return !1;\n      }, za.prototype.Si = function (r) {\n        var i = this;\n        return this.bi().then(function () {\n          i._i.sort(function (t, e) {\n            return t.ni - e.ni;\n          });\n\n          for (var t = 0, e = i._i; t < e.length; t++) {\n            var n = e[t];\n            if (n.Cs(), \"all\" !== r && n.ms === r) break;\n          }\n\n          return i.bi();\n        });\n      }, za.prototype.Di = function (t) {\n        this.wi.push(t);\n      }, za.prototype.yi = function (t) {\n        var e = this._i.indexOf(t);\n\n        this._i.splice(e, 1);\n      }, za);\n\n      function za() {\n        var e = this;\n        this.ui = Promise.resolve(), this.ci = [], this.li = !1, this._i = [], this.fi = null, this.di = !1, this.wi = [], this.Ti = new Na(this, \"async_queue_retry\"), this.Ei = function () {\n          var t = ja();\n          t && Lr(\"AsyncQueue\", \"Visibility state changed to  \", t.visibilityState), e.Ti.Ds();\n        };\n        var t = ja();\n        t && \"function\" == typeof t.addEventListener && t.addEventListener(\"visibilitychange\", this.Ei);\n      }\n\n      function Ha(t, e, n, r, i) {\n        this.ei = t, this.ms = e, this.ni = n, this.op = r, this.si = i, this.ii = new Ia(), this.then = this.ii.promise.then.bind(this.ii.promise), this.ii.promise.catch(function (t) {});\n      }\n\n      function Wa(t, e) {\n        if (xr(\"AsyncQueue\", e + \": \" + t), xa(t)) return new $r(Jr.UNAVAILABLE, e + \": \" + t);\n        throw t;\n      }\n\n      function Ka(t, e) {\n        var n = t[0],\n            r = t[1],\n            i = e[0],\n            o = e[1],\n            s = Fr(n, i);\n        return 0 === s ? Fr(r, o) : s;\n      }\n\n      var Ya = (Ja.prototype.Fi = function () {\n        return ++this.Ni;\n      }, Ja.prototype.ki = function (t) {\n        var e,\n            n = [t, this.Fi()];\n        this.buffer.size < this.Ci ? this.buffer = this.buffer.add(n) : Ka(n, e = this.buffer.last()) < 0 && (this.buffer = this.buffer.delete(e).add(n));\n      }, Object.defineProperty(Ja.prototype, \"maxValue\", {\n        get: function get() {\n          return this.buffer.last()[0];\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Ja),\n          Xa = {\n        $i: !1,\n        xi: 0,\n        Oi: 0,\n        Mi: 0\n      },\n          Qa = (Za.Ui = function (t) {\n        return new Za(t, Za.Qi, Za.Wi);\n      }, Za);\n\n      function Za(t, e, n) {\n        this.Li = t, this.qi = e, this.Bi = n;\n      }\n\n      function Ja(t) {\n        this.Ci = t, this.buffer = new Fi(Ka), this.Ni = 0;\n      }\n\n      Qa.ji = -1, Qa.Ki = 1048576, Qa.Gi = 41943040, Qa.Qi = 10, Qa.Wi = 1e3, Qa.zi = new Qa(Qa.Gi, Qa.Qi, Qa.Wi), Qa.Hi = new Qa(Qa.ji, 0, 0);\n      var $a = (nc.prototype.start = function (t) {\n        this.Yi.params.Li !== Qa.ji && this.Zi(t);\n      }, nc.prototype.stop = function () {\n        this.Xi && (this.Xi.cancel(), this.Xi = null);\n      }, Object.defineProperty(nc.prototype, \"tr\", {\n        get: function get() {\n          return null !== this.Xi;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), nc.prototype.Zi = function (n) {\n        var t = this,\n            e = this.Ji ? 3e5 : 6e4;\n        Lr(\"LruGarbageCollector\", \"Garbage collection scheduled in \" + e + \"ms\"), this.Xi = this.ei.Ss(\"lru_garbage_collection\", e, function () {\n          return g(t, void 0, void 0, function () {\n            var e;\n            return w(this, function (t) {\n              switch (t.label) {\n                case 0:\n                  this.Xi = null, this.Ji = !0, t.label = 1;\n\n                case 1:\n                  return t.trys.push([1, 3,, 7]), [4, n.er(this.Yi)];\n\n                case 2:\n                  return t.sent(), [3, 7];\n\n                case 3:\n                  return xa(e = t.sent()) ? (Lr(\"LruGarbageCollector\", \"Ignoring IndexedDB error during garbage collection: \", e), [3, 6]) : [3, 4];\n\n                case 4:\n                  return [4, Lh(e)];\n\n                case 5:\n                  t.sent(), t.label = 6;\n\n                case 6:\n                  return [3, 7];\n\n                case 7:\n                  return [4, this.Zi(n)];\n\n                case 8:\n                  return t.sent(), [2];\n              }\n            });\n          });\n        });\n      }, nc),\n          tc = (ec.prototype.sr = function (t, e) {\n        return this.nr.ir(t).next(function (t) {\n          return Math.floor(e / 100 * t);\n        });\n      }, ec.prototype.rr = function (t, e) {\n        var n = this;\n        if (0 === e) return ua.resolve(pa.Es);\n        var r = new Ya(e);\n        return this.nr.be(t, function (t) {\n          return r.ki(t.sequenceNumber);\n        }).next(function () {\n          return n.nr.or(t, function (t) {\n            return r.ki(t);\n          });\n        }).next(function () {\n          return r.maxValue;\n        });\n      }, ec.prototype.hr = function (t, e, n) {\n        return this.nr.hr(t, e, n);\n      }, ec.prototype.ar = function (t, e) {\n        return this.nr.ar(t, e);\n      }, ec.prototype.ur = function (e, n) {\n        var r = this;\n        return this.params.Li === Qa.ji ? (Lr(\"LruGarbageCollector\", \"Garbage collection skipped; disabled\"), ua.resolve(Xa)) : this.cr(e).next(function (t) {\n          return t < r.params.Li ? (Lr(\"LruGarbageCollector\", \"Garbage collection skipped; Cache size \" + t + \" is lower than threshold \" + r.params.Li), Xa) : r.lr(e, n);\n        });\n      }, ec.prototype.cr = function (t) {\n        return this.nr.cr(t);\n      }, ec.prototype.lr = function (e, n) {\n        var r,\n            i,\n            o,\n            s,\n            u,\n            a,\n            c,\n            h = this,\n            f = Date.now();\n        return this.sr(e, this.params.qi).next(function (t) {\n          return i = t > h.params.Bi ? (Lr(\"LruGarbageCollector\", \"Capping sequence numbers to collect down to the maximum of \" + h.params.Bi + \" from \" + t), h.params.Bi) : t, s = Date.now(), h.rr(e, i);\n        }).next(function (t) {\n          return r = t, u = Date.now(), h.hr(e, r, n);\n        }).next(function (t) {\n          return o = t, a = Date.now(), h.ar(e, r);\n        }).next(function (t) {\n          return c = Date.now(), Rr() <= l.DEBUG && Lr(\"LruGarbageCollector\", \"LRU Garbage Collection\\n\\tCounted targets in \" + (s - f) + \"ms\\n\\tDetermined least recently used \" + i + \" in \" + (u - s) + \"ms\\n\\tRemoved \" + o + \" targets in \" + (a - u) + \"ms\\n\\tRemoved \" + t + \" documents in \" + (c - a) + \"ms\\nTotal Duration: \" + (c - f) + \"ms\"), ua.resolve({\n            $i: !0,\n            xi: i,\n            Oi: o,\n            Mi: t\n          });\n        });\n      }, ec);\n\n      function ec(t, e) {\n        this.nr = t, this.params = e;\n      }\n\n      function nc(t, e) {\n        this.Yi = t, this.ei = e, this.Ji = !1, this.Xi = null;\n      }\n\n      function rc(t) {\n        for (var e = \"\", n = 0; n < t.length; n++) {\n          0 < e.length && (e = ic(e)), e = function (t, e) {\n            for (var n = e, r = t.length, i = 0; i < r; i++) {\n              var o = t.charAt(i);\n\n              switch (o) {\n                case \"\\0\":\n                  n += \"\u0001\u0010\";\n                  break;\n\n                case \"\u0001\":\n                  n += \"\u0001\u0011\";\n                  break;\n\n                default:\n                  n += o;\n              }\n            }\n\n            return n;\n          }(t.get(n), e);\n        }\n\n        return ic(e);\n      }\n\n      function ic(t) {\n        return t + \"\u0001\u0001\";\n      }\n\n      function oc(t) {\n        var e = t.length;\n        if (Vr(2 <= e), 2 === e) return Vr(\"\u0001\" === t.charAt(0) && \"\u0001\" === t.charAt(1)), ri.$();\n\n        for (var n = e - 2, r = [], i = \"\", o = 0; o < e;) {\n          var s = t.indexOf(\"\u0001\", o);\n\n          switch ((s < 0 || n < s) && Cr(), t.charAt(s + 1)) {\n            case \"\u0001\":\n              var u = t.substring(o, s),\n                  a = void 0;\n              0 === i.length ? a = u : (a = i += u, i = \"\"), r.push(a);\n              break;\n\n            case \"\u0010\":\n              i += t.substring(o, s), i += \"\\0\";\n              break;\n\n            case \"\u0011\":\n              i += t.substring(o, s + 1);\n              break;\n\n            default:\n              Cr();\n          }\n\n          o = s + 2;\n        }\n\n        return new ri(r);\n      }\n\n      var sc = function sc(t) {\n        this._r = t;\n      };\n\n      function uc(t, e) {\n        if (e.document) return n = t._r, r = e.document, i = !!e.hasCommittedMutations, o = Ho(n, r.name), s = jo(r.updateTime), u = new Zs({\n          mapValue: {\n            fields: r.fields\n          }\n        }), new uu(o, s, u, {\n          hasCommittedMutations: !!i\n        });\n        var n, r, i, o, s, u;\n\n        if (e.noDocument) {\n          var a = si.K(e.noDocument.path),\n              c = lc(e.noDocument.readTime);\n          return new au(a, c, {\n            hasCommittedMutations: !!e.hasCommittedMutations\n          });\n        }\n\n        if (e.unknownDocument) {\n          var h = si.K(e.unknownDocument.path),\n              f = lc(e.unknownDocument.version);\n          return new cu(h, f);\n        }\n\n        return Cr();\n      }\n\n      function ac(t, e, n) {\n        var r,\n            i,\n            o = cc(n),\n            s = e.key.path.p().N();\n\n        if (e instanceof uu) {\n          var u = {\n            name: zo(r = t._r, (i = e).key),\n            fields: i.tn().mapValue.fields,\n            updateTime: Fo(r, i.version.A())\n          },\n              a = e.hasCommittedMutations;\n          return new Hc(null, null, u, a, o, s);\n        }\n\n        if (e instanceof au) {\n          var c = e.key.path.N(),\n              h = fc(e.version),\n              f = e.hasCommittedMutations;\n          return new Hc(null, new Bc(c, h), null, f, o, s);\n        }\n\n        if (e instanceof cu) {\n          var l = e.key.path.N(),\n              p = fc(e.version);\n          return new Hc(new zc(l, p), null, null, !0, o, s);\n        }\n\n        return Cr();\n      }\n\n      function cc(t) {\n        var e = t.A();\n        return [e.seconds, e.nanoseconds];\n      }\n\n      function hc(t) {\n        var e = new ti(t[0], t[1]);\n        return ei.I(e);\n      }\n\n      function fc(t) {\n        var e = t.A();\n        return new Pc(e.seconds, e.nanoseconds);\n      }\n\n      function lc(t) {\n        var e = new ti(t.seconds, t.nanoseconds);\n        return ei.I(e);\n      }\n\n      function pc(e, t) {\n        var n = (t.baseMutations || []).map(function (t) {\n          return Jo(e._r, t);\n        }),\n            r = t.mutations.map(function (t) {\n          return Jo(e._r, t);\n        }),\n            i = ti.fromMillis(t.localWriteTimeMs);\n        return new oa(t.batchId, i, n, r);\n      }\n\n      function dc(t) {\n        var e,\n            n = lc(t.readTime),\n            r = void 0 !== t.lastLimboFreeSnapshotVersion ? lc(t.lastLimboFreeSnapshotVersion) : ei.min(),\n            i = void 0 !== t.query.documents ? (Vr(1 === (e = t.query).documents.length), bu(gu(Ko(e.documents[0])))) : function (t) {\n          var e,\n              n = Ko(t.parent),\n              r = t.structuredQuery,\n              i = r.from ? r.from.length : 0,\n              o = null;\n          0 < i && (Vr(1 === i), (e = r.from[0]).allDescendants ? o = e.collectionId : n = n.child(e.collectionId));\n          var s = [];\n          r.where && (s = function t(e) {\n            return e ? void 0 !== e.unaryFilter ? [function (t) {\n              switch (t.unaryFilter.op) {\n                case \"IS_NAN\":\n                  var e = is(t.unaryFilter.field);\n                  return Ru.create(e, \"==\", {\n                    doubleValue: NaN\n                  });\n\n                case \"IS_NULL\":\n                  var n = is(t.unaryFilter.field);\n                  return Ru.create(n, \"==\", {\n                    nullValue: \"NULL_VALUE\"\n                  });\n\n                case \"IS_NOT_NAN\":\n                  var r = is(t.unaryFilter.field);\n                  return Ru.create(r, \"!=\", {\n                    doubleValue: NaN\n                  });\n\n                case \"IS_NOT_NULL\":\n                  var i = is(t.unaryFilter.field);\n                  return Ru.create(i, \"!=\", {\n                    nullValue: \"NULL_VALUE\"\n                  });\n\n                case \"OPERATOR_UNSPECIFIED\":\n                default:\n                  return Cr();\n              }\n            }(e)] : void 0 !== e.fieldFilter ? [(n = e, Ru.create(is(n.fieldFilter.field), function () {\n              switch (n.fieldFilter.op) {\n                case \"EQUAL\":\n                  return \"==\";\n\n                case \"NOT_EQUAL\":\n                  return \"!=\";\n\n                case \"GREATER_THAN\":\n                  return \">\";\n\n                case \"GREATER_THAN_OR_EQUAL\":\n                  return \">=\";\n\n                case \"LESS_THAN\":\n                  return \"<\";\n\n                case \"LESS_THAN_OR_EQUAL\":\n                  return \"<=\";\n\n                case \"ARRAY_CONTAINS\":\n                  return \"array-contains\";\n\n                case \"IN\":\n                  return \"in\";\n\n                case \"NOT_IN\":\n                  return \"not-in\";\n\n                case \"ARRAY_CONTAINS_ANY\":\n                  return \"array-contains-any\";\n\n                case \"OPERATOR_UNSPECIFIED\":\n                default:\n                  return Cr();\n              }\n            }(), n.fieldFilter.value))] : void 0 !== e.compositeFilter ? e.compositeFilter.filters.map(t).reduce(function (t, e) {\n              return t.concat(e);\n            }) : Cr() : [];\n            var n;\n          }(r.where));\n          var u = [];\n          r.orderBy && (u = r.orderBy.map(function (t) {\n            return new ia(is((e = t).field), function () {\n              switch (e.direction) {\n                case \"ASCENDING\":\n                  return \"asc\";\n\n                case \"DESCENDING\":\n                  return \"desc\";\n\n                default:\n                  return;\n              }\n            }());\n            var e;\n          }));\n          var a,\n              c,\n              h = null;\n          r.limit && (a = r.limit, h = yi(c = \"object\" == typeof a ? a.value : a) ? null : c);\n          var f = null;\n          r.startAt && (f = ns(r.startAt));\n          var l = null;\n          return r.endAt && (l = ns(r.endAt)), bu(vu(n, o, u, s, h, \"F\", f, l));\n        }(t.query);\n        return new Di(i, t.targetId, 0, t.lastListenSequenceNumber, n, r, Ti.fromBase64String(t.resumeToken));\n      }\n\n      function yc(t, e) {\n        var n = fc(e.Z),\n            r = fc(e.lastLimboFreeSnapshotVersion),\n            i = (Ii(e.target) ? $o : ts)(t._r, e.target),\n            o = e.resumeToken.toBase64();\n        return new Kc(e.targetId, bi(e.target), n, o, e.sequenceNumber, r, i);\n      }\n\n      var vc = (gc.Tr = function (t, e, n, r) {\n        return Vr(\"\" !== t.uid), new gc(t.Er() ? t.uid : \"\", e, n, r);\n      }, gc.prototype.Ir = function (t) {\n        var r = !0,\n            e = IDBKeyRange.bound([this.userId, Number.NEGATIVE_INFINITY], [this.userId, Number.POSITIVE_INFINITY]);\n        return bc(t).Zs({\n          index: qc.userMutationsIndex,\n          range: e\n        }, function (t, e, n) {\n          r = !1, n.done();\n        }).next(function () {\n          return r;\n        });\n      }, gc.prototype.mr = function (d, y, v, g) {\n        var m = this,\n            w = Ec(d),\n            b = bc(d);\n        return b.add({}).next(function (t) {\n          Vr(\"number\" == typeof t);\n\n          for (var e, n, r, i, o, s = new oa(t, y, v, g), u = (e = m.serializer, n = m.userId, i = (r = s).baseMutations.map(function (t) {\n            return Zo(e._r, t);\n          }), o = r.mutations.map(function (t) {\n            return Zo(e._r, t);\n          }), new qc(n, r.batchId, r.Tn.toMillis(), i, o)), a = [], c = new Fi(function (t, e) {\n            return Fr(t.F(), e.F());\n          }), h = 0, f = g; h < f.length; h++) {\n            var l = f[h],\n                p = jc.key(m.userId, l.key.path, t),\n                c = c.add(l.key.path.p());\n            a.push(b.put(u)), a.push(w.put(p, jc.PLACEHOLDER));\n          }\n\n          return c.forEach(function (t) {\n            a.push(m.zn.Ar(d, t));\n          }), d.Wn(function () {\n            m.wr[t] = s.keys();\n          }), ua.Cn(a).next(function () {\n            return s;\n          });\n        });\n      }, gc.prototype.Rr = function (t, e) {\n        var n = this;\n        return bc(t).get(e).next(function (t) {\n          return t ? (Vr(t.userId === n.userId), pc(n.serializer, t)) : null;\n        });\n      }, gc.prototype.Pr = function (t, n) {\n        var r = this;\n        return this.wr[n] ? ua.resolve(this.wr[n]) : this.Rr(t, n).next(function (t) {\n          if (t) {\n            var e = t.keys();\n            return r.wr[n] = e;\n          }\n\n          return null;\n        });\n      }, gc.prototype.gr = function (t, e) {\n        var r = this,\n            i = e + 1,\n            n = IDBKeyRange.lowerBound([this.userId, i]),\n            o = null;\n        return bc(t).Zs({\n          index: qc.userMutationsIndex,\n          range: n\n        }, function (t, e, n) {\n          e.userId === r.userId && (Vr(e.batchId >= i), o = pc(r.serializer, e)), n.done();\n        }).next(function () {\n          return o;\n        });\n      }, gc.prototype.Vr = function (t) {\n        var e = IDBKeyRange.upperBound([this.userId, Number.POSITIVE_INFINITY]),\n            r = -1;\n        return bc(t).Zs({\n          index: qc.userMutationsIndex,\n          range: e,\n          reverse: !0\n        }, function (t, e, n) {\n          r = e.batchId, n.done();\n        }).next(function () {\n          return r;\n        });\n      }, gc.prototype.yr = function (t) {\n        var e = this,\n            n = IDBKeyRange.bound([this.userId, -1], [this.userId, Number.POSITIVE_INFINITY]);\n        return bc(t).Hs(qc.userMutationsIndex, n).next(function (t) {\n          return t.map(function (t) {\n            return pc(e.serializer, t);\n          });\n        });\n      }, gc.prototype.Yn = function (u, a) {\n        var c = this,\n            t = jc.prefixForPath(this.userId, a.path),\n            e = IDBKeyRange.lowerBound(t),\n            h = [];\n        return Ec(u).Zs({\n          range: e\n        }, function (t, e, n) {\n          var r = t[0],\n              i = t[1],\n              o = t[2],\n              s = oc(i);\n          if (r === c.userId && a.path.isEqual(s)) return bc(u).get(o).next(function (t) {\n            if (!t) throw Cr();\n            Vr(t.userId === c.userId), h.push(pc(c.serializer, t));\n          });\n          n.done();\n        }).next(function () {\n          return h;\n        });\n      }, gc.prototype.es = function (r, t) {\n        var a = this,\n            c = new Fi(Fr),\n            i = [];\n        return t.forEach(function (u) {\n          var t = jc.prefixForPath(a.userId, u.path),\n              e = IDBKeyRange.lowerBound(t),\n              n = Ec(r).Zs({\n            range: e\n          }, function (t, e, n) {\n            var r = t[0],\n                i = t[1],\n                o = t[2],\n                s = oc(i);\n            r === a.userId && u.path.isEqual(s) ? c = c.add(o) : n.done();\n          });\n          i.push(n);\n        }), ua.Cn(i).next(function () {\n          return a.pr(r, c);\n        });\n      }, gc.prototype.as = function (t, e) {\n        var u = this,\n            a = e.path,\n            c = a.length + 1,\n            n = jc.prefixForPath(this.userId, a),\n            r = IDBKeyRange.lowerBound(n),\n            h = new Fi(Fr);\n        return Ec(t).Zs({\n          range: r\n        }, function (t, e, n) {\n          var r = t[0],\n              i = t[1],\n              o = t[2],\n              s = oc(i);\n          r === u.userId && a.D(s) ? s.length === c && (h = h.add(o)) : n.done();\n        }).next(function () {\n          return u.pr(t, h);\n        });\n      }, gc.prototype.pr = function (e, t) {\n        var n = this,\n            r = [],\n            i = [];\n        return t.forEach(function (t) {\n          i.push(bc(e).get(t).next(function (t) {\n            if (null === t) throw Cr();\n            Vr(t.userId === n.userId), r.push(pc(n.serializer, t));\n          }));\n        }), ua.Cn(i).next(function () {\n          return r;\n        });\n      }, gc.prototype.br = function (e, n) {\n        var r = this;\n        return wc(e.vr, this.userId, n).next(function (t) {\n          return e.Wn(function () {\n            r.Sr(n.batchId);\n          }), ua.forEach(t, function (t) {\n            return r.dr.Dr(e, t);\n          });\n        });\n      }, gc.prototype.Sr = function (t) {\n        delete this.wr[t];\n      }, gc.prototype.Cr = function (n) {\n        var o = this;\n        return this.Ir(n).next(function (t) {\n          if (!t) return ua.resolve();\n          var e = IDBKeyRange.lowerBound(jc.prefixForUser(o.userId)),\n              i = [];\n          return Ec(n).Zs({\n            range: e\n          }, function (t, e, n) {\n            var r;\n            t[0] === o.userId ? (r = oc(t[1]), i.push(r)) : n.done();\n          }).next(function () {\n            Vr(0 === i.length);\n          });\n        });\n      }, gc.prototype.Nr = function (t, e) {\n        return mc(t, this.userId, e);\n      }, gc.prototype.Fr = function (t) {\n        var e = this;\n        return Ic(t).get(this.userId).next(function (t) {\n          return t || new Fc(e.userId, -1, \"\");\n        });\n      }, gc);\n\n      function gc(t, e, n, r) {\n        this.userId = t, this.serializer = e, this.zn = n, this.dr = r, this.wr = {};\n      }\n\n      function mc(t, o, e) {\n        var n = jc.prefixForPath(o, e.path),\n            s = n[1],\n            r = IDBKeyRange.lowerBound(n),\n            u = !1;\n        return Ec(t).Zs({\n          range: r,\n          Xs: !0\n        }, function (t, e, n) {\n          var r = t[0],\n              i = t[1];\n          t[2], r === o && i === s && (u = !0), n.done();\n        }).next(function () {\n          return u;\n        });\n      }\n\n      function wc(t, e, n) {\n        var r = t.store(qc.store),\n            i = t.store(jc.store),\n            o = [],\n            s = IDBKeyRange.only(n.batchId),\n            u = 0,\n            a = r.Zs({\n          range: s\n        }, function (t, e, n) {\n          return u++, n.delete();\n        });\n        o.push(a.next(function () {\n          Vr(1 === u);\n        }));\n\n        for (var c = [], h = 0, f = n.mutations; h < f.length; h++) {\n          var l = f[h],\n              p = jc.key(e, l.key.path, n.batchId);\n          o.push(i.delete(p)), c.push(l.key);\n        }\n\n        return ua.Cn(o).next(function () {\n          return c;\n        });\n      }\n\n      function bc(t) {\n        return ph.Ms(t, qc.store);\n      }\n\n      function Ec(t) {\n        return ph.Ms(t, jc.store);\n      }\n\n      function Ic(t) {\n        return ph.Ms(t, Fc.store);\n      }\n\n      var Tc,\n          Nc = (_c.prototype.xn = function (t, e, n) {\n        return Sc(t).put(Dc(e), n);\n      }, _c.prototype.Mn = function (t, e) {\n        var n = Sc(t),\n            r = Dc(e);\n        return n.delete(r);\n      }, _c.prototype.updateMetadata = function (e, n) {\n        var r = this;\n        return this.getMetadata(e).next(function (t) {\n          return t.byteSize += n, r.kr(e, t);\n        });\n      }, _c.prototype.Ln = function (t, e) {\n        var n = this;\n        return Sc(t).get(Dc(e)).next(function (t) {\n          return n.$r(t);\n        });\n      }, _c.prototype.xr = function (t, e) {\n        var n = this;\n        return Sc(t).get(Dc(e)).next(function (t) {\n          var e = n.$r(t);\n          return e ? {\n            Or: e,\n            size: kc(t)\n          } : null;\n        });\n      }, _c.prototype.getEntries = function (t, e) {\n        var r = this,\n            i = ji;\n        return this.Mr(t, e, function (t, e) {\n          var n = r.$r(e);\n          i = i.st(t, n);\n        }).next(function () {\n          return i;\n        });\n      }, _c.prototype.Lr = function (t, e) {\n        var r = this,\n            i = ji,\n            o = new xi(si.P);\n        return this.Mr(t, e, function (t, e) {\n          var n = r.$r(e);\n          o = n ? (i = i.st(t, n), o.st(t, kc(e))) : (i = i.st(t, null), o.st(t, 0));\n        }).next(function () {\n          return {\n            qr: i,\n            Br: o\n          };\n        });\n      }, _c.prototype.Mr = function (t, e, i) {\n        if (e._()) return ua.resolve();\n        var n = IDBKeyRange.bound(e.first().path.N(), e.last().path.N()),\n            o = e.ut(),\n            s = o.wt();\n        return Sc(t).Zs({\n          range: n\n        }, function (t, e, n) {\n          for (var r = si.K(t); s && si.P(s, r) < 0;) {\n            i(s, null), s = o.wt();\n          }\n\n          s && s.isEqual(r) && (i(s, e), s = o.Tt() ? o.wt() : null), s ? n.Gs(s.path.N()) : n.done();\n        }).next(function () {\n          for (; s;) {\n            i(s, null), s = o.Tt() ? o.wt() : null;\n          }\n        });\n      }, _c.prototype.ns = function (t, i, e) {\n        var n,\n            r,\n            o,\n            s = this,\n            u = zi,\n            a = i.path.length + 1,\n            c = {};\n        return e.isEqual(ei.min()) ? (n = i.path.N(), c.range = IDBKeyRange.lowerBound(n)) : (r = i.path.N(), o = cc(e), c.range = IDBKeyRange.lowerBound([r, o], !0), c.index = Hc.collectionReadTimeIndex), Sc(t).Zs(c, function (t, e, n) {\n          var r;\n          t.length === a && (r = uc(s.serializer, e), i.path.D(r.key.path) ? r instanceof uu && Su(i, r) && (u = u.st(r.key, r)) : n.done());\n        }).next(function () {\n          return u;\n        });\n      }, _c.prototype.Ur = function (t, e) {\n        var r = this,\n            i = ji,\n            o = cc(e),\n            n = Sc(t),\n            s = IDBKeyRange.lowerBound(o, !0);\n        return n.Zs({\n          index: Hc.readTimeIndex,\n          range: s\n        }, function (t, e) {\n          var n = uc(r.serializer, e);\n          i = i.st(n.key, n), o = e.readTime;\n        }).next(function () {\n          return {\n            Qr: i,\n            readTime: hc(o)\n          };\n        });\n      }, _c.prototype.Wr = function (t) {\n        var e = Sc(t),\n            r = ei.min();\n        return e.Zs({\n          index: Hc.readTimeIndex,\n          reverse: !0\n        }, function (t, e, n) {\n          e.readTime && (r = hc(e.readTime)), n.done();\n        }).next(function () {\n          return r;\n        });\n      }, _c.prototype.jr = function (t) {\n        return new _c.Kr(this, !!t && t.Gr);\n      }, _c.prototype.zr = function (t) {\n        return this.getMetadata(t).next(function (t) {\n          return t.byteSize;\n        });\n      }, _c.prototype.getMetadata = function (t) {\n        return Ac(t).get(Wc.key).next(function (t) {\n          return Vr(!!t), t;\n        });\n      }, _c.prototype.kr = function (t, e) {\n        return Ac(t).put(Wc.key, e);\n      }, _c.prototype.$r = function (t) {\n        if (t) {\n          var e = uc(this.serializer, t);\n          return e instanceof au && e.version.isEqual(ei.min()) ? null : e;\n        }\n\n        return null;\n      }, _c);\n\n      function _c(t, e) {\n        this.serializer = t, this.zn = e;\n      }\n\n      function Ac(t) {\n        return ph.Ms(t, Wc.store);\n      }\n\n      function Sc(t) {\n        return ph.Ms(t, Hc.store);\n      }\n\n      function Dc(t) {\n        return t.path.N();\n      }\n\n      function kc(t) {\n        var e;\n        if (t.document) e = t.document;else if (t.unknownDocument) e = t.unknownDocument;else {\n          if (!t.noDocument) throw Cr();\n          e = t.noDocument;\n        }\n        return JSON.stringify(e).length;\n      }\n\n      function Rc(t, e) {\n        var n = this;\n        return (n = Tc.call(this) || this).Hr = t, n.Gr = e, n.Yr = new Zr(function (t) {\n          return t.toString();\n        }, function (t, e) {\n          return t.isEqual(e);\n        }), n;\n      }\n\n      Nc.Kr = (o(Rc, Tc = aa), Rc.prototype.Un = function (s) {\n        var u = this,\n            a = [],\n            c = 0,\n            h = new Fi(function (t, e) {\n          return Fr(t.F(), e.F());\n        });\n        return this.Fn.forEach(function (t, e) {\n          var n,\n              r,\n              i,\n              o = u.Yr.get(t);\n          e ? (n = ac(u.Hr.serializer, e, u.readTime), h = h.add(t.path.p()), r = kc(n), c += r - o, a.push(u.Hr.xn(s, t, n))) : (c -= o, u.Gr ? (i = ac(u.Hr.serializer, new au(t, ei.min()), u.readTime), a.push(u.Hr.xn(s, t, i))) : a.push(u.Hr.Mn(s, t)));\n        }), h.forEach(function (t) {\n          a.push(u.Hr.zn.Ar(s, t));\n        }), a.push(this.Hr.updateMetadata(s, c)), ua.Cn(a);\n      }, Rc.prototype.qn = function (t, e) {\n        var n = this;\n        return this.Hr.xr(t, e).next(function (t) {\n          return null === t ? (n.Yr.set(e, 0), null) : (n.Yr.set(e, t.size), t.Or);\n        });\n      }, Rc.prototype.Bn = function (t, e) {\n        var n = this;\n        return this.Hr.Lr(t, e).next(function (t) {\n          var e = t.qr;\n          return t.Br.forEach(function (t, e) {\n            n.Yr.set(t, e);\n          }), e;\n        });\n      }, Rc);\n\n      var Lc = (Mc.prototype.Ar = function (t, e) {\n        return this.Jr.add(e), ua.resolve();\n      }, Mc.prototype.hs = function (t, e) {\n        return ua.resolve(this.Jr.getEntries(e));\n      }, Mc),\n          xc = (Uc.prototype.add = function (t) {\n        var e = t.S(),\n            n = t.p(),\n            r = this.index[e] || new Fi(ri.P),\n            i = !r.has(n);\n        return this.index[e] = r.add(n), i;\n      }, Uc.prototype.has = function (t) {\n        var e = t.S(),\n            n = t.p(),\n            r = this.index[e];\n        return r && r.has(n);\n      }, Uc.prototype.getEntries = function (t) {\n        return (this.index[t] || new Fi(ri.P)).N();\n      }, Uc),\n          Oc = (Vc.prototype.createOrUpgrade = function (n, r, t, e) {\n        var i = this;\n        Vr(t < e && 0 <= t && e <= 10);\n        var o,\n            s = new Oa(r);\n        t < 1 && 1 <= e && (n.createObjectStore(Cc.store), (o = n).createObjectStore(Fc.store, {\n          keyPath: Fc.keyPath\n        }), o.createObjectStore(qc.store, {\n          keyPath: qc.keyPath,\n          autoIncrement: !0\n        }).createIndex(qc.userMutationsIndex, qc.userMutationsKeyPath, {\n          unique: !0\n        }), o.createObjectStore(jc.store), Zc(n), n.createObjectStore(Hc.store));\n        var u,\n            a = ua.resolve();\n        return t < 3 && 3 <= e && (0 !== t && ((u = n).deleteObjectStore(Yc.store), u.deleteObjectStore(Kc.store), u.deleteObjectStore(Xc.store), Zc(n)), a = a.next(function () {\n          return t = s.store(Xc.store), e = new Xc(0, 0, ei.min().A(), 0), t.put(Xc.key, e);\n          var t, e;\n        })), t < 4 && 4 <= e && (0 !== t && (a = a.next(function () {\n          return r = n, (i = s).store(qc.store).Hs().next(function (t) {\n            r.deleteObjectStore(qc.store), r.createObjectStore(qc.store, {\n              keyPath: qc.keyPath,\n              autoIncrement: !0\n            }).createIndex(qc.userMutationsIndex, qc.userMutationsKeyPath, {\n              unique: !0\n            });\n            var e = i.store(qc.store),\n                n = t.map(function (t) {\n              return e.put(t);\n            });\n            return ua.Cn(n);\n          });\n          var r, i;\n        })), a = a.next(function () {\n          n.createObjectStore(Jc.store, {\n            keyPath: Jc.keyPath\n          });\n        })), t < 5 && 5 <= e && (a = a.next(function () {\n          return i.removeAcknowledgedMutations(s);\n        })), t < 6 && 6 <= e && (a = a.next(function () {\n          return n.createObjectStore(Wc.store), i.addDocumentGlobal(s);\n        })), t < 7 && 7 <= e && (a = a.next(function () {\n          return i.ensureSequenceNumbers(s);\n        })), t < 8 && 8 <= e && (a = a.next(function () {\n          return i.createCollectionParentIndex(n, s);\n        })), t < 9 && 9 <= e && (a = a.next(function () {\n          var t, e;\n          (e = n).objectStoreNames.contains(\"remoteDocumentChanges\") && e.deleteObjectStore(\"remoteDocumentChanges\"), (t = r.objectStore(Hc.store)).createIndex(Hc.readTimeIndex, Hc.readTimeIndexPath, {\n            unique: !1\n          }), t.createIndex(Hc.collectionReadTimeIndex, Hc.collectionReadTimeIndexPath, {\n            unique: !1\n          });\n        })), t < 10 && 10 <= e && (a = a.next(function () {\n          return i.rewriteCanonicalIds(s);\n        })), a;\n      }, Vc.prototype.addDocumentGlobal = function (e) {\n        var n = 0;\n        return e.store(Hc.store).Zs(function (t, e) {\n          n += kc(e);\n        }).next(function () {\n          var t = new Wc(n);\n          return e.store(Wc.store).put(Wc.key, t);\n        });\n      }, Vc.prototype.removeAcknowledgedMutations = function (r) {\n        var i = this,\n            t = r.store(Fc.store),\n            e = r.store(qc.store);\n        return t.Hs().next(function (t) {\n          return ua.forEach(t, function (n) {\n            var t = IDBKeyRange.bound([n.userId, -1], [n.userId, n.lastAcknowledgedBatchId]);\n            return e.Hs(qc.userMutationsIndex, t).next(function (t) {\n              return ua.forEach(t, function (t) {\n                Vr(t.userId === n.userId);\n                var e = pc(i.serializer, t);\n                return wc(r, n.userId, e).next(function () {});\n              });\n            });\n          });\n        });\n      }, Vc.prototype.ensureSequenceNumbers = function (t) {\n        var s = t.store(Yc.store),\n            e = t.store(Hc.store);\n        return t.store(Xc.store).get(Xc.key).next(function (i) {\n          var o = [];\n          return e.Zs(function (t, e) {\n            var n = new ri(t),\n                r = [0, rc(n)];\n            o.push(s.get(r).next(function (t) {\n              return t ? ua.resolve() : s.put(new Yc(0, rc(n), i.highestListenSequenceNumber));\n            }));\n          }).next(function () {\n            return ua.Cn(o);\n          });\n        });\n      }, Vc.prototype.createCollectionParentIndex = function (t, e) {\n        function i(t) {\n          if (o.add(t)) {\n            var e = t.S(),\n                n = t.p();\n            return r.put({\n              collectionId: e,\n              parent: rc(n)\n            });\n          }\n        }\n\n        t.createObjectStore(Qc.store, {\n          keyPath: Qc.keyPath\n        });\n        var r = e.store(Qc.store),\n            o = new xc();\n        return e.store(Hc.store).Zs({\n          Xs: !0\n        }, function (t, e) {\n          var n = new ri(t);\n          return i(n.p());\n        }).next(function () {\n          return e.store(jc.store).Zs({\n            Xs: !0\n          }, function (t, e) {\n            t[0];\n            var n = t[1],\n                r = (t[2], oc(n));\n            return i(r.p());\n          });\n        });\n      }, Vc.prototype.rewriteCanonicalIds = function (t) {\n        var i = this,\n            o = t.store(Kc.store);\n        return o.Zs(function (t, e) {\n          var n = dc(e),\n              r = yc(i.serializer, n);\n          return o.put(r);\n        });\n      }, Vc),\n          Pc = function Pc(t, e) {\n        this.seconds = t, this.nanoseconds = e;\n      },\n          Cc = function Cc(t, e, n) {\n        this.ownerId = t, this.allowTabSynchronization = e, this.leaseTimestampMs = n;\n      };\n\n      function Vc(t) {\n        this.serializer = t;\n      }\n\n      function Uc() {\n        this.index = {};\n      }\n\n      function Mc() {\n        this.Jr = new xc();\n      }\n\n      Cc.store = \"owner\", Cc.key = \"owner\";\n\n      var Fc = function Fc(t, e, n) {\n        this.userId = t, this.lastAcknowledgedBatchId = e, this.lastStreamToken = n;\n      };\n\n      Fc.store = \"mutationQueues\", Fc.keyPath = \"userId\";\n\n      var qc = function qc(t, e, n, r, i) {\n        this.userId = t, this.batchId = e, this.localWriteTimeMs = n, this.baseMutations = r, this.mutations = i;\n      };\n\n      qc.store = \"mutations\", qc.keyPath = \"batchId\", qc.userMutationsIndex = \"userMutationsIndex\", qc.userMutationsKeyPath = [\"userId\", \"batchId\"];\n      var jc = (Gc.prefixForUser = function (t) {\n        return [t];\n      }, Gc.prefixForPath = function (t, e) {\n        return [t, rc(e)];\n      }, Gc.key = function (t, e, n) {\n        return [t, rc(e), n];\n      }, Gc);\n\n      function Gc() {}\n\n      jc.store = \"documentMutations\", jc.PLACEHOLDER = new jc();\n\n      var Bc = function Bc(t, e) {\n        this.path = t, this.readTime = e;\n      },\n          zc = function zc(t, e) {\n        this.path = t, this.version = e;\n      },\n          Hc = function Hc(t, e, n, r, i, o) {\n        this.unknownDocument = t, this.noDocument = e, this.document = n, this.hasCommittedMutations = r, this.readTime = i, this.parentPath = o;\n      };\n\n      Hc.store = \"remoteDocuments\", Hc.readTimeIndex = \"readTimeIndex\", Hc.readTimeIndexPath = \"readTime\", Hc.collectionReadTimeIndex = \"collectionReadTimeIndex\", Hc.collectionReadTimeIndexPath = [\"parentPath\", \"readTime\"];\n\n      var Wc = function Wc(t) {\n        this.byteSize = t;\n      };\n\n      Wc.store = \"remoteDocumentGlobal\", Wc.key = \"remoteDocumentGlobalKey\";\n\n      var Kc = function Kc(t, e, n, r, i, o, s) {\n        this.targetId = t, this.canonicalId = e, this.readTime = n, this.resumeToken = r, this.lastListenSequenceNumber = i, this.lastLimboFreeSnapshotVersion = o, this.query = s;\n      };\n\n      Kc.store = \"targets\", Kc.keyPath = \"targetId\", Kc.queryTargetsIndexName = \"queryTargetsIndex\", Kc.queryTargetsKeyPath = [\"canonicalId\", \"targetId\"];\n\n      var Yc = function Yc(t, e, n) {\n        this.targetId = t, this.path = e, this.sequenceNumber = n;\n      };\n\n      Yc.store = \"targetDocuments\", Yc.keyPath = [\"targetId\", \"path\"], Yc.documentTargetsIndex = \"documentTargetsIndex\", Yc.documentTargetsKeyPath = [\"path\", \"targetId\"];\n\n      var Xc = function Xc(t, e, n, r) {\n        this.highestTargetId = t, this.highestListenSequenceNumber = e, this.lastRemoteSnapshotVersion = n, this.targetCount = r;\n      };\n\n      Xc.key = \"targetGlobalKey\", Xc.store = \"targetGlobal\";\n\n      var Qc = function Qc(t, e) {\n        this.collectionId = t, this.parent = e;\n      };\n\n      function Zc(t) {\n        t.createObjectStore(Yc.store, {\n          keyPath: Yc.keyPath\n        }).createIndex(Yc.documentTargetsIndex, Yc.documentTargetsKeyPath, {\n          unique: !0\n        }), t.createObjectStore(Kc.store, {\n          keyPath: Kc.keyPath\n        }).createIndex(Kc.queryTargetsIndexName, Kc.queryTargetsKeyPath, {\n          unique: !0\n        }), t.createObjectStore(Xc.store);\n      }\n\n      Qc.store = \"collectionParents\", Qc.keyPath = [\"collectionId\", \"parent\"];\n\n      var Jc = function Jc(t, e, n, r) {\n        this.clientId = t, this.updateTimeMs = e, this.networkEnabled = n, this.inForeground = r;\n      };\n\n      Jc.store = \"clientMetadata\", Jc.keyPath = \"clientId\";\n      var $c = s(s(s([Fc.store, qc.store, jc.store, Hc.store, Kc.store, Cc.store, Xc.store, Yc.store], [Jc.store]), [Wc.store]), [Qc.store]),\n          th = (eh.prototype.Ar = function (t, e) {\n        var n = this;\n        if (this.Xr.has(e)) return ua.resolve();\n        var r = e.S(),\n            i = e.p();\n        t.Wn(function () {\n          n.Xr.add(e);\n        });\n        var o = {\n          collectionId: r,\n          parent: rc(i)\n        };\n        return nh(t).put(o);\n      }, eh.prototype.hs = function (t, i) {\n        var o = [],\n            e = IDBKeyRange.bound([i, \"\"], [jr(i), \"\"], !1, !0);\n        return nh(t).Hs(e).next(function (t) {\n          for (var e = 0, n = t; e < n.length; e++) {\n            var r = n[e];\n            if (r.collectionId !== i) break;\n            o.push(oc(r.parent));\n          }\n\n          return o;\n        });\n      }, eh);\n\n      function eh() {\n        this.Xr = new xc();\n      }\n\n      function nh(t) {\n        return ph.Ms(t, Qc.store);\n      }\n\n      var rh = (sh.prototype.next = function () {\n        return this.Zr += 2, this.Zr;\n      }, sh.to = function () {\n        return new sh(0);\n      }, sh.eo = function () {\n        return new sh(-1);\n      }, sh),\n          ih = (oh.prototype.no = function (n) {\n        var r = this;\n        return this.so(n).next(function (t) {\n          var e = new rh(t.highestTargetId);\n          return t.highestTargetId = e.next(), r.io(n, t).next(function () {\n            return t.highestTargetId;\n          });\n        });\n      }, oh.prototype.ro = function (t) {\n        return this.so(t).next(function (t) {\n          return ei.I(new ti(t.lastRemoteSnapshotVersion.seconds, t.lastRemoteSnapshotVersion.nanoseconds));\n        });\n      }, oh.prototype.oo = function (t) {\n        return this.so(t).next(function (t) {\n          return t.highestListenSequenceNumber;\n        });\n      }, oh.prototype.ho = function (e, n, r) {\n        var i = this;\n        return this.so(e).next(function (t) {\n          return t.highestListenSequenceNumber = n, r && (t.lastRemoteSnapshotVersion = r.A()), n > t.highestListenSequenceNumber && (t.highestListenSequenceNumber = n), i.io(e, t);\n        });\n      }, oh.prototype.ao = function (e, n) {\n        var r = this;\n        return this.uo(e, n).next(function () {\n          return r.so(e).next(function (t) {\n            return t.targetCount += 1, r.co(n, t), r.io(e, t);\n          });\n        });\n      }, oh.prototype.lo = function (t, e) {\n        return this.uo(t, e);\n      }, oh.prototype._o = function (e, t) {\n        var n = this;\n        return this.fo(e, t.targetId).next(function () {\n          return uh(e).delete(t.targetId);\n        }).next(function () {\n          return n.so(e);\n        }).next(function (t) {\n          return Vr(0 < t.targetCount), --t.targetCount, n.io(e, t);\n        });\n      }, oh.prototype.hr = function (r, i, o) {\n        var s = this,\n            u = 0,\n            a = [];\n        return uh(r).Zs(function (t, e) {\n          var n = dc(e);\n          n.sequenceNumber <= i && null === o.get(n.targetId) && (u++, a.push(s._o(r, n)));\n        }).next(function () {\n          return ua.Cn(a);\n        }).next(function () {\n          return u;\n        });\n      }, oh.prototype.be = function (t, r) {\n        return uh(t).Zs(function (t, e) {\n          var n = dc(e);\n          r(n);\n        });\n      }, oh.prototype.so = function (t) {\n        return ah(t).get(Xc.key).next(function (t) {\n          return Vr(null !== t), t;\n        });\n      }, oh.prototype.io = function (t, e) {\n        return ah(t).put(Xc.key, e);\n      }, oh.prototype.uo = function (t, e) {\n        return uh(t).put(yc(this.serializer, e));\n      }, oh.prototype.co = function (t, e) {\n        var n = !1;\n        return t.targetId > e.highestTargetId && (e.highestTargetId = t.targetId, n = !0), t.sequenceNumber > e.highestListenSequenceNumber && (e.highestListenSequenceNumber = t.sequenceNumber, n = !0), n;\n      }, oh.prototype.do = function (t) {\n        return this.so(t).next(function (t) {\n          return t.targetCount;\n        });\n      }, oh.prototype.wo = function (t, i) {\n        var e = bi(i),\n            n = IDBKeyRange.bound([e, Number.NEGATIVE_INFINITY], [e, Number.POSITIVE_INFINITY]),\n            o = null;\n        return uh(t).Zs({\n          range: n,\n          index: Kc.queryTargetsIndexName\n        }, function (t, e, n) {\n          var r = dc(e);\n          Ei(i, r.target) && (o = r, n.done());\n        }).next(function () {\n          return o;\n        });\n      }, oh.prototype.To = function (n, t, r) {\n        var i = this,\n            o = [],\n            s = ch(n);\n        return t.forEach(function (t) {\n          var e = rc(t.path);\n          o.push(s.put(new Yc(r, e))), o.push(i.dr.Eo(n, r, t));\n        }), ua.Cn(o);\n      }, oh.prototype.Io = function (n, t, r) {\n        var i = this,\n            o = ch(n);\n        return ua.forEach(t, function (t) {\n          var e = rc(t.path);\n          return ua.Cn([o.delete([r, e]), i.dr.mo(n, r, t)]);\n        });\n      }, oh.prototype.fo = function (t, e) {\n        var n = ch(t),\n            r = IDBKeyRange.bound([e], [e + 1], !1, !0);\n        return n.delete(r);\n      }, oh.prototype.Ao = function (t, e) {\n        var n = IDBKeyRange.bound([e], [e + 1], !1, !0),\n            r = ch(t),\n            o = Ki();\n        return r.Zs({\n          range: n,\n          Xs: !0\n        }, function (t, e, n) {\n          var r = oc(t[1]),\n              i = new si(r);\n          o = o.add(i);\n        }).next(function () {\n          return o;\n        });\n      }, oh.prototype.Nr = function (t, e) {\n        var n = rc(e.path),\n            r = IDBKeyRange.bound([n], [jr(n)], !1, !0),\n            i = 0;\n        return ch(t).Zs({\n          index: Yc.documentTargetsIndex,\n          Xs: !0,\n          range: r\n        }, function (t, e, n) {\n          var r = t[0];\n          t[1], 0 !== r && (i++, n.done());\n        }).next(function () {\n          return 0 < i;\n        });\n      }, oh.prototype.Me = function (t, e) {\n        return uh(t).get(e).next(function (t) {\n          return t ? dc(t) : null;\n        });\n      }, oh);\n\n      function oh(t, e) {\n        this.dr = t, this.serializer = e;\n      }\n\n      function sh(t) {\n        this.Zr = t;\n      }\n\n      function uh(t) {\n        return ph.Ms(t, Kc.store);\n      }\n\n      function ah(t) {\n        return ph.Ms(t, Xc.store);\n      }\n\n      function ch(t) {\n        return ph.Ms(t, Yc.store);\n      }\n\n      var hh,\n          fh = \"Failed to obtain exclusive access to the persistence layer. To allow shared access, make sure to invoke `enablePersistence()` with `synchronizeTabs:true` in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.\",\n          lh = (o(yh, hh = ha), yh),\n          ph = (dh.Ms = function (t, e) {\n        if (t instanceof lh) return _a.Ms(t.vr, e);\n        throw Cr();\n      }, dh.prototype.start = function () {\n        var e = this;\n        return this.xo().then(function () {\n          if (!e.isPrimary && !e.allowTabSynchronization) throw new $r(Jr.FAILED_PRECONDITION, fh);\n          return e.Oo(), e.Mo(), e.Lo(), e.runTransaction(\"getHighestListenSequenceNumber\", \"readonly\", function (t) {\n            return e.ko.oo(t);\n          });\n        }).then(function (t) {\n          e.yo = new pa(t, e.Po);\n        }).then(function () {\n          e.po = !0;\n        }).catch(function (t) {\n          return e.Fo && e.Fo.close(), Promise.reject(t);\n        });\n      }, dh.prototype.qo = function (n) {\n        var t = this;\n        return this.Co = function (e) {\n          return g(t, void 0, void 0, function () {\n            return w(this, function (t) {\n              return this.tr ? [2, n(e)] : [2];\n            });\n          });\n        }, n(this.isPrimary);\n      }, dh.prototype.Bo = function (n) {\n        var t = this;\n        this.Fo.Bs(function (e) {\n          return g(t, void 0, void 0, function () {\n            return w(this, function (t) {\n              switch (t.label) {\n                case 0:\n                  return null === e.newVersion ? [4, n()] : [3, 2];\n\n                case 1:\n                  t.sent(), t.label = 2;\n\n                case 2:\n                  return [2];\n              }\n            });\n          });\n        });\n      }, dh.prototype.Uo = function (t) {\n        var e = this;\n        this.networkEnabled !== t && (this.networkEnabled = t, this.Is.ai(function () {\n          return g(e, void 0, void 0, function () {\n            return w(this, function (t) {\n              switch (t.label) {\n                case 0:\n                  return this.tr ? [4, this.xo()] : [3, 2];\n\n                case 1:\n                  t.sent(), t.label = 2;\n\n                case 2:\n                  return [2];\n              }\n            });\n          });\n        }));\n      }, dh.prototype.xo = function () {\n        var n = this;\n        return this.runTransaction(\"updateClientMetadataAndTryBecomePrimary\", \"readwrite\", function (e) {\n          return gh(e).put(new Jc(n.clientId, Date.now(), n.networkEnabled, n.inForeground)).next(function () {\n            if (n.isPrimary) return n.Qo(e).next(function (t) {\n              t || (n.isPrimary = !1, n.Is.gi(function () {\n                return n.Co(!1);\n              }));\n            });\n          }).next(function () {\n            return n.Wo(e);\n          }).next(function (t) {\n            return n.isPrimary && !t ? n.jo(e).next(function () {\n              return !1;\n            }) : !!t && n.Ko(e).next(function () {\n              return !0;\n            });\n          });\n        }).catch(function (t) {\n          if (xa(t)) return Lr(\"IndexedDbPersistence\", \"Failed to extend owner lease: \", t), n.isPrimary;\n          if (!n.allowTabSynchronization) throw t;\n          return Lr(\"IndexedDbPersistence\", \"Releasing owner lease after error during lease refresh\", t), !1;\n        }).then(function (t) {\n          n.isPrimary !== t && n.Is.gi(function () {\n            return n.Co(t);\n          }), n.isPrimary = t;\n        });\n      }, dh.prototype.Qo = function (t) {\n        var e = this;\n        return vh(t).get(Cc.key).next(function (t) {\n          return ua.resolve(e.Go(t));\n        });\n      }, dh.prototype.zo = function (t) {\n        return gh(t).delete(this.clientId);\n      }, dh.prototype.Ho = function () {\n        return g(this, void 0, void 0, function () {\n          var e,\n              n,\n              r,\n              i,\n              o = this;\n          return w(this, function (t) {\n            switch (t.label) {\n              case 0:\n                return !this.isPrimary || this.Yo(this.Do, 18e5) ? [3, 2] : (this.Do = Date.now(), [4, this.runTransaction(\"maybeGarbageCollectMultiClientState\", \"readwrite-primary\", function (t) {\n                  var r = dh.Ms(t, Jc.store);\n                  return r.Hs().next(function (t) {\n                    var e = o.Jo(t, 18e5),\n                        n = t.filter(function (t) {\n                      return -1 === e.indexOf(t);\n                    });\n                    return ua.forEach(n, function (t) {\n                      return r.delete(t.clientId);\n                    }).next(function () {\n                      return n;\n                    });\n                  });\n                }).catch(function () {\n                  return [];\n                })]);\n\n              case 1:\n                if (e = t.sent(), this.$o) for (n = 0, r = e; n < r.length; n++) {\n                  i = r[n], this.$o.removeItem(this.Xo(i.clientId));\n                }\n                t.label = 2;\n\n              case 2:\n                return [2];\n            }\n          });\n        });\n      }, dh.prototype.Lo = function () {\n        var t = this;\n        this.So = this.Is.Ss(\"client_metadata_refresh\", 4e3, function () {\n          return t.xo().then(function () {\n            return t.Ho();\n          }).then(function () {\n            return t.Lo();\n          });\n        });\n      }, dh.prototype.Go = function (t) {\n        return !!t && t.ownerId === this.clientId;\n      }, dh.prototype.Wo = function (e) {\n        var i = this;\n        return this.Vo ? ua.resolve(!0) : vh(e).get(Cc.key).next(function (t) {\n          if (null !== t && i.Yo(t.leaseTimestampMs, 5e3) && !i.Zo(t.ownerId)) {\n            if (i.Go(t) && i.networkEnabled) return !0;\n\n            if (!i.Go(t)) {\n              if (!t.allowTabSynchronization) throw new $r(Jr.FAILED_PRECONDITION, fh);\n              return !1;\n            }\n          }\n\n          return !(!i.networkEnabled || !i.inForeground) || gh(e).Hs().next(function (t) {\n            return void 0 === i.Jo(t, 5e3).find(function (t) {\n              if (i.clientId !== t.clientId) {\n                var e = !i.networkEnabled && t.networkEnabled,\n                    n = !i.inForeground && t.inForeground,\n                    r = i.networkEnabled === t.networkEnabled;\n                if (e || n && r) return !0;\n              }\n\n              return !1;\n            });\n          });\n        }).next(function (t) {\n          return i.isPrimary !== t && Lr(\"IndexedDbPersistence\", \"Client \" + (t ? \"is\" : \"is not\") + \" eligible for a primary lease.\"), t;\n        });\n      }, dh.prototype.th = function () {\n        return g(this, void 0, void 0, function () {\n          var n = this;\n          return w(this, function (t) {\n            switch (t.label) {\n              case 0:\n                return this.po = !1, this.eh(), this.So && (this.So.cancel(), this.So = null), this.nh(), this.sh(), [4, this.Fo.runTransaction(\"readwrite\", [Cc.store, Jc.store], function (t) {\n                  var e = new lh(t, pa.Es);\n                  return n.jo(e).next(function () {\n                    return n.zo(e);\n                  });\n                })];\n\n              case 1:\n                return t.sent(), this.Fo.close(), this.ih(), [2];\n            }\n          });\n        });\n      }, dh.prototype.Jo = function (t, e) {\n        var n = this;\n        return t.filter(function (t) {\n          return n.Yo(t.updateTimeMs, e) && !n.Zo(t.clientId);\n        });\n      }, dh.prototype.rh = function () {\n        var e = this;\n        return this.runTransaction(\"getActiveClients\", \"readonly\", function (t) {\n          return gh(t).Hs().next(function (t) {\n            return e.Jo(t, 18e5).map(function (t) {\n              return t.clientId;\n            });\n          });\n        });\n      }, Object.defineProperty(dh.prototype, \"tr\", {\n        get: function get() {\n          return this.po;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), dh.prototype.oh = function (t) {\n        return vc.Tr(t, this.serializer, this.zn, this.dr);\n      }, dh.prototype.hh = function () {\n        return this.ko;\n      }, dh.prototype.ah = function () {\n        return this.Kn;\n      }, dh.prototype.uh = function () {\n        return this.zn;\n      }, dh.prototype.runTransaction = function (e, n, r) {\n        var i = this;\n        Lr(\"IndexedDbPersistence\", \"Starting transaction:\", e);\n        var o,\n            t = \"readonly\" === n ? \"readonly\" : \"readwrite\";\n        return this.Fo.runTransaction(t, $c, function (t) {\n          return o = new lh(t, i.yo ? i.yo.next() : pa.Es), \"readwrite-primary\" === n ? i.Qo(o).next(function (t) {\n            return !!t || i.Wo(o);\n          }).next(function (t) {\n            if (!t) throw xr(\"Failed to obtain primary lease for action '\" + e + \"'.\"), i.isPrimary = !1, i.Is.gi(function () {\n              return i.Co(!1);\n            }), new $r(Jr.FAILED_PRECONDITION, ca);\n            return r(o);\n          }).next(function (t) {\n            return i.Ko(o).next(function () {\n              return t;\n            });\n          }) : i.lh(o).next(function () {\n            return r(o);\n          });\n        }).then(function (t) {\n          return o.jn(), t;\n        });\n      }, dh.prototype.lh = function (t) {\n        var e = this;\n        return vh(t).get(Cc.key).next(function (t) {\n          if (null !== t && e.Yo(t.leaseTimestampMs, 5e3) && !e.Zo(t.ownerId) && !e.Go(t) && !(e.Vo || e.allowTabSynchronization && t.allowTabSynchronization)) throw new $r(Jr.FAILED_PRECONDITION, fh);\n        });\n      }, dh.prototype.Ko = function (t) {\n        var e = new Cc(this.clientId, this.allowTabSynchronization, Date.now());\n        return vh(t).put(Cc.key, e);\n      }, dh.ks = function () {\n        return _a.ks();\n      }, dh.prototype.jo = function (t) {\n        var e = this,\n            n = vh(t);\n        return n.get(Cc.key).next(function (t) {\n          return e.Go(t) ? (Lr(\"IndexedDbPersistence\", \"Releasing primary lease.\"), n.delete(Cc.key)) : ua.resolve();\n        });\n      }, dh.prototype.Yo = function (t, e) {\n        var n = Date.now();\n        return !(t < n - e || n < t && (xr(\"Detected an update time that is in the future: \" + t + \" > \" + n), 1));\n      }, dh.prototype.Oo = function () {\n        var t = this;\n        null !== this.document && \"function\" == typeof this.document.addEventListener && (this.vo = function () {\n          t.Is.ai(function () {\n            return t.inForeground = \"visible\" === t.document.visibilityState, t.xo();\n          });\n        }, this.document.addEventListener(\"visibilitychange\", this.vo), this.inForeground = \"visible\" === this.document.visibilityState);\n      }, dh.prototype.nh = function () {\n        this.vo && (this.document.removeEventListener(\"visibilitychange\", this.vo), this.vo = null);\n      }, dh.prototype.Mo = function () {\n        var t,\n            e = this;\n        \"function\" == typeof (null === (t = this.window) || void 0 === t ? void 0 : t.addEventListener) && (this.bo = function () {\n          e.eh(), e.Is.ai(function () {\n            return e.th();\n          });\n        }, this.window.addEventListener(\"unload\", this.bo));\n      }, dh.prototype.sh = function () {\n        this.bo && (this.window.removeEventListener(\"unload\", this.bo), this.bo = null);\n      }, dh.prototype.Zo = function (t) {\n        var e;\n\n        try {\n          var n = null !== (null === (e = this.$o) || void 0 === e ? void 0 : e.getItem(this.Xo(t)));\n          return Lr(\"IndexedDbPersistence\", \"Client '\" + t + \"' \" + (n ? \"is\" : \"is not\") + \" zombied in LocalStorage\"), n;\n        } catch (t) {\n          return xr(\"IndexedDbPersistence\", \"Failed to get zombied client id.\", t), !1;\n        }\n      }, dh.prototype.eh = function () {\n        if (this.$o) try {\n          this.$o.setItem(this.Xo(this.clientId), String(Date.now()));\n        } catch (t) {\n          xr(\"Failed to set zombie client id.\", t);\n        }\n      }, dh.prototype.ih = function () {\n        if (this.$o) try {\n          this.$o.removeItem(this.Xo(this.clientId));\n        } catch (t) {}\n      }, dh.prototype.Xo = function (t) {\n        return \"firestore_zombie_\" + this.persistenceKey + \"_\" + t;\n      }, dh);\n\n      function dh(t, e, n, r, i, o, s, u, a, c) {\n        if (this.allowTabSynchronization = t, this.persistenceKey = e, this.clientId = n, this.Is = i, this.window = o, this.document = s, this.Po = a, this.Vo = c, this.yo = null, this.po = !1, this.isPrimary = !1, this.networkEnabled = !0, this.bo = null, this.inForeground = !1, this.vo = null, this.So = null, this.Do = Number.NEGATIVE_INFINITY, this.Co = function (t) {\n          return Promise.resolve();\n        }, !dh.ks()) throw new $r(Jr.UNIMPLEMENTED, \"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.\");\n        this.dr = new mh(this, r), this.No = e + \"main\", this.serializer = new sc(u), this.Fo = new _a(this.No, 10, new Oc(this.serializer)), this.ko = new ih(this.dr, this.serializer), this.zn = new th(), this.Kn = new Nc(this.serializer, this.zn), this.window && this.window.localStorage ? this.$o = this.window.localStorage : (this.$o = null, !1 === c && xr(\"IndexedDbPersistence\", \"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page.\"));\n      }\n\n      function yh(t, e) {\n        var n = this;\n        return (n = hh.call(this) || this).vr = t, n.Ro = e, n;\n      }\n\n      function vh(t) {\n        return ph.Ms(t, Cc.store);\n      }\n\n      function gh(t) {\n        return ph.Ms(t, Jc.store);\n      }\n\n      var mh = (wh.prototype.ir = function (t) {\n        var n = this._h(t);\n\n        return this.db.hh().do(t).next(function (e) {\n          return n.next(function (t) {\n            return e + t;\n          });\n        });\n      }, wh.prototype._h = function (t) {\n        var e = 0;\n        return this.or(t, function (t) {\n          e++;\n        }).next(function () {\n          return e;\n        });\n      }, wh.prototype.be = function (t, e) {\n        return this.db.hh().be(t, e);\n      }, wh.prototype.or = function (t, n) {\n        return this.fh(t, function (t, e) {\n          return n(e);\n        });\n      }, wh.prototype.Eo = function (t, e, n) {\n        return bh(t, n);\n      }, wh.prototype.mo = function (t, e, n) {\n        return bh(t, n);\n      }, wh.prototype.hr = function (t, e, n) {\n        return this.db.hh().hr(t, e, n);\n      }, wh.prototype.Dr = bh, wh.prototype.dh = function (t, e) {\n        return r = e, i = !1, Ic(n = t).ti(function (t) {\n          return mc(n, t, r).next(function (t) {\n            return t && (i = !0), ua.resolve(!t);\n          });\n        }).next(function () {\n          return i;\n        });\n        var n, r, i;\n      }, wh.prototype.ar = function (r, i) {\n        var o = this,\n            s = this.db.ah().jr(),\n            u = [],\n            a = 0;\n        return this.fh(r, function (e, t) {\n          var n;\n          t <= i && (n = o.dh(r, e).next(function (t) {\n            if (!t) return a++, s.Ln(r, e).next(function () {\n              return s.Mn(e), ch(r).delete([0, rc(e.path)]);\n            });\n          }), u.push(n));\n        }).next(function () {\n          return ua.Cn(u);\n        }).next(function () {\n          return s.apply(r);\n        }).next(function () {\n          return a;\n        });\n      }, wh.prototype.removeTarget = function (t, e) {\n        var n = e.tt(t.Ro);\n        return this.db.hh().lo(t, n);\n      }, wh.prototype.wh = bh, wh.prototype.fh = function (t, o) {\n        var s,\n            e = ch(t),\n            u = pa.Es;\n        return e.Zs({\n          index: Yc.documentTargetsIndex\n        }, function (t, e) {\n          var n = t[0],\n              r = (t[1], e.path),\n              i = e.sequenceNumber;\n          0 === n ? (u !== pa.Es && o(new si(oc(s)), u), u = i, s = r) : u = pa.Es;\n        }).next(function () {\n          u !== pa.Es && o(new si(oc(s)), u);\n        });\n      }, wh.prototype.cr = function (t) {\n        return this.db.ah().zr(t);\n      }, wh);\n\n      function wh(t, e) {\n        this.db = t, this.Yi = new tc(this, e);\n      }\n\n      function bh(t, e) {\n        return ch(t).put((n = t.Ro, new Yc(0, rc(e.path), n)));\n        var n;\n      }\n\n      function Eh(t, e) {\n        var n = t.projectId;\n        return t.i || (n += \".\" + t.database), \"firestore/\" + e + \"/\" + n + \"/\";\n      }\n\n      var Ih = (Th.prototype.er = function (e) {\n        var n = this;\n        return this.persistence.runTransaction(\"Collect garbage\", \"readwrite-primary\", function (t) {\n          return e.ur(t, n.Eh);\n        });\n      }, Th);\n\n      function Th(t, e, n) {\n        this.persistence = t, this.Th = e, this.Eh = new xi(Fr), this.Ih = new Zr(bi, Ei), this.mh = ei.min(), this.Gn = t.oh(n), this.Ah = t.ah(), this.ko = t.hh(), this.Rh = new fa(this.Ah, this.Gn, this.persistence.uh()), this.Th.Ph(this.Rh);\n      }\n\n      function Nh(t, h) {\n        var f = t;\n        return f.persistence.runTransaction(\"Acknowledge batch\", \"readwrite-primary\", function (t) {\n          var e,\n              n,\n              i,\n              o,\n              s,\n              r,\n              u,\n              a = h.batch.keys(),\n              c = f.Ah.jr({\n            Gr: !0\n          });\n          return e = f, n = t, o = c, s = (i = h).batch, r = s.keys(), u = ua.resolve(), r.forEach(function (r) {\n            u = u.next(function () {\n              return o.Ln(n, r);\n            }).next(function (t) {\n              var e = t,\n                  n = i.Pn.get(r);\n              Vr(null !== n), (!e || e.version.o(n) < 0) && (e = s.En(r, e, i)) && o.xn(e, i.Rn);\n            });\n          }), u.next(function () {\n            return e.Gn.br(n, s);\n          }).next(function () {\n            return c.apply(t);\n          }).next(function () {\n            return f.Gn.Cr(t);\n          }).next(function () {\n            return f.Rh.Zn(t, a);\n          });\n        });\n      }\n\n      function _h(t) {\n        var e = t;\n        return e.persistence.runTransaction(\"Get last remote snapshot version\", \"readonly\", function (t) {\n          return e.ko.ro(t);\n        });\n      }\n\n      function Ah(t, s) {\n        var h = t,\n            f = s.Z,\n            l = h.Eh;\n        return h.persistence.runTransaction(\"Apply remote event\", \"readwrite-primary\", function (a) {\n          var i = h.Ah.jr({\n            Gr: !0\n          });\n          l = h.Eh;\n          var c = [];\n          s.Wt.forEach(function (t, e) {\n            var n,\n                r,\n                i,\n                o,\n                s,\n                u = l.get(e);\n            u && (c.push(h.ko.Io(a, t.Zt, e).next(function () {\n              return h.ko.To(a, t.Jt, e);\n            })), 0 < (n = t.resumeToken).Y() && (r = u.et(n, f).tt(a.Ro), l = l.st(e, r), i = u, s = t, Vr(0 < (o = r).resumeToken.Y()), (0 === i.resumeToken.Y() || 3e8 <= o.Z.m() - i.Z.m() || 0 < s.Jt.size + s.Xt.size + s.Zt.size) && c.push(h.ko.lo(a, r))));\n          });\n          var t,\n              o = ji,\n              n = Ki();\n          return s.Kt.forEach(function (t, e) {\n            n = n.add(t);\n          }), c.push(i.getEntries(a, n).next(function (r) {\n            s.Kt.forEach(function (t, e) {\n              var n = r.get(t);\n              e instanceof au && e.version.isEqual(ei.min()) ? (i.Mn(t, f), o = o.st(t, e)) : null == n || 0 < e.version.o(n.version) || 0 === e.version.o(n.version) && n.hasPendingWrites ? (i.xn(e, f), o = o.st(t, e)) : Lr(\"LocalStore\", \"Ignoring outdated watch update for \", t, \". Current version:\", n.version, \" Watch version:\", e.version), s.Gt.has(t) && c.push(h.persistence.dr.wh(a, t));\n            });\n          })), f.isEqual(ei.min()) || (t = h.ko.ro(a).next(function (t) {\n            return h.ko.ho(a, a.Ro, f);\n          }), c.push(t)), ua.Cn(c).next(function () {\n            return i.apply(a);\n          }).next(function () {\n            return h.Rh.ts(a, o);\n          });\n        }).then(function (t) {\n          return h.Eh = l, t;\n        });\n      }\n\n      function Sh(t, r) {\n        var i = t;\n        return i.persistence.runTransaction(\"Allocate target\", \"readwrite\", function (e) {\n          var n;\n          return i.ko.wo(e, r).next(function (t) {\n            return t ? (n = t, ua.resolve(n)) : i.ko.no(e).next(function (t) {\n              return n = new Di(r, t, 0, e.Ro), i.ko.ao(e, n).next(function () {\n                return n;\n              });\n            });\n          });\n        }).then(function (t) {\n          var e = i.Eh.get(t.targetId);\n          return (null === e || 0 < t.Z.o(e.Z)) && (i.Eh = i.Eh.st(t.targetId, t), i.Ih.set(r, t.targetId)), t;\n        });\n      }\n\n      function Dh(o, s, u) {\n        return g(this, void 0, void 0, function () {\n          var e, n, r, i;\n          return w(this, function (t) {\n            switch (t.label) {\n              case 0:\n                n = (e = o).Eh.get(s), r = u ? \"readwrite\" : \"readwrite-primary\", t.label = 1;\n\n              case 1:\n                return t.trys.push([1, 4,, 5]), u ? [3, 3] : [4, e.persistence.runTransaction(\"Release target\", r, function (t) {\n                  return e.persistence.dr.removeTarget(t, n);\n                })];\n\n              case 2:\n                t.sent(), t.label = 3;\n\n              case 3:\n                return [3, 5];\n\n              case 4:\n                if (!xa(i = t.sent())) throw i;\n                return Lr(\"LocalStore\", \"Failed to update sequence numbers for target \" + s + \": \" + i), [3, 5];\n\n              case 5:\n                return e.Eh = e.Eh.remove(s), e.Ih.delete(n.target), [2];\n            }\n          });\n        });\n      }\n\n      function kh(t, s, u) {\n        var a = t,\n            c = ei.min(),\n            h = Ki();\n        return a.persistence.runTransaction(\"Execute query\", \"readonly\", function (e) {\n          return t = a, n = e, r = bu(s), (void 0 !== (o = (i = t).Ih.get(r)) ? ua.resolve(i.Eh.get(o)) : i.ko.wo(n, r)).next(function (t) {\n            if (t) return c = t.lastLimboFreeSnapshotVersion, a.ko.Ao(e, t.targetId).next(function (t) {\n              h = t;\n            });\n          }).next(function () {\n            return a.Th.ns(e, s, u ? c : ei.min(), u ? h : Ki());\n          }).next(function (t) {\n            return {\n              documents: t,\n              gh: h\n            };\n          });\n          var t, n, r, i, o;\n        });\n      }\n\n      function Rh(t, e) {\n        var n = t,\n            r = n.ko,\n            i = n.Eh.get(e);\n        return i ? Promise.resolve(i.target) : n.persistence.runTransaction(\"Get target data\", \"readonly\", function (t) {\n          return r.Me(t, e).next(function (t) {\n            return t ? t.target : null;\n          });\n        });\n      }\n\n      function Lh(e) {\n        return g(this, void 0, void 0, function () {\n          return w(this, function (t) {\n            if (e.code !== Jr.FAILED_PRECONDITION || e.message !== ca) throw e;\n            return Lr(\"LocalStore\", \"Unexpectedly lost primary lease\"), [2];\n          });\n        });\n      }\n\n      var xh = (Uh.prototype._ = function () {\n        return this.Vh._();\n      }, Uh.prototype.Eo = function (t, e) {\n        var n = new Oh(t, e);\n        this.Vh = this.Vh.add(n), this.ph = this.ph.add(n);\n      }, Uh.prototype.vh = function (t, e) {\n        var n = this;\n        t.forEach(function (t) {\n          return n.Eo(t, e);\n        });\n      }, Uh.prototype.mo = function (t, e) {\n        this.Sh(new Oh(t, e));\n      }, Uh.prototype.Dh = function (t, e) {\n        var n = this;\n        t.forEach(function (t) {\n          return n.mo(t, e);\n        });\n      }, Uh.prototype.Ch = function (t) {\n        var e = this,\n            n = new si(new ri([])),\n            r = new Oh(n, t),\n            i = new Oh(n, t + 1),\n            o = [];\n        return this.ph.St([r, i], function (t) {\n          e.Sh(t), o.push(t.key);\n        }), o;\n      }, Uh.prototype.Nh = function () {\n        var e = this;\n        this.Vh.forEach(function (t) {\n          return e.Sh(t);\n        });\n      }, Uh.prototype.Sh = function (t) {\n        this.Vh = this.Vh.delete(t), this.ph = this.ph.delete(t);\n      }, Uh.prototype.Fh = function (t) {\n        var e = new si(new ri([])),\n            n = new Oh(e, t),\n            r = new Oh(e, t + 1),\n            i = Ki();\n        return this.ph.St([n, r], function (t) {\n          i = i.add(t.key);\n        }), i;\n      }, Uh.prototype.Nr = function (t) {\n        var e = new Oh(t, 0),\n            n = this.Vh.Ct(e);\n        return null !== n && t.isEqual(n.key);\n      }, Uh),\n          Oh = (Vh.yh = function (t, e) {\n        return si.P(t.key, e.key) || Fr(t.kh, e.kh);\n      }, Vh.bh = function (t, e) {\n        return Fr(t.kh, e.kh) || si.P(t.key, e.key);\n      }, Vh),\n          Ph = (Ch.prototype.Er = function () {\n        return null != this.uid;\n      }, Ch.prototype.$h = function () {\n        return this.Er() ? \"uid:\" + this.uid : \"anonymous-user\";\n      }, Ch.prototype.isEqual = function (t) {\n        return t.uid === this.uid;\n      }, Ch);\n\n      function Ch(t) {\n        this.uid = t;\n      }\n\n      function Vh(t, e) {\n        this.key = t, this.kh = e;\n      }\n\n      function Uh() {\n        this.Vh = new Fi(Oh.yh), this.ph = new Fi(Oh.bh);\n      }\n\n      Ph.UNAUTHENTICATED = new Ph(null), Ph.xh = new Ph(\"google-credentials-uid\"), Ph.Oh = new Ph(\"first-party-uid\");\n\n      function Mh(t, e) {\n        this.user = e, this.type = \"OAuth\", this.Mh = {}, this.Mh.Authorization = \"Bearer \" + t;\n      }\n\n      var Fh,\n          qh,\n          jh,\n          Gh = (af.prototype.getToken = function () {\n        return Promise.resolve(null);\n      }, af.prototype.qh = function () {}, af.prototype.Bh = function (t) {\n        (this.Lh = t)(Ph.UNAUTHENTICATED);\n      }, af.prototype.Uh = function () {\n        this.Lh = null;\n      }, af),\n          Bh = (uf.prototype.getToken = function () {\n        var e = this,\n            n = this.jh,\n            t = this.forceRefresh;\n        return this.forceRefresh = !1, this.auth ? this.auth.getToken(t).then(function (t) {\n          return e.jh !== n ? (Lr(\"FirebaseCredentialsProvider\", \"getToken aborted due to token change.\"), e.getToken()) : t ? (Vr(\"string\" == typeof t.accessToken), new Mh(t.accessToken, e.currentUser)) : null;\n        }) : Promise.resolve(null);\n      }, uf.prototype.qh = function () {\n        this.forceRefresh = !0;\n      }, uf.prototype.Bh = function (t) {\n        this.Lh = t, this.Wh && t(this.currentUser);\n      }, uf.prototype.Uh = function () {\n        this.auth && this.auth.removeAuthTokenListener(this.Qh), this.Qh = null, this.Lh = null;\n      }, uf.prototype.Kh = function () {\n        var t = this.auth && this.auth.getUid();\n        return Vr(null === t || \"string\" == typeof t), new Ph(t);\n      }, uf),\n          zh = (Object.defineProperty(sf.prototype, \"Mh\", {\n        get: function get() {\n          var t = {\n            \"X-Goog-AuthUser\": this.zh\n          },\n              e = this.Gh.auth.Hh([]);\n          return e && (t.Authorization = e), t;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), sf),\n          Hh = (of.prototype.getToken = function () {\n        return Promise.resolve(new zh(this.Gh, this.zh));\n      }, of.prototype.Bh = function (t) {\n        t(Ph.Oh);\n      }, of.prototype.Uh = function () {}, of.prototype.qh = function () {}, of),\n          Wh = (rf.prototype.ea = function () {\n        return 1 === this.state || 2 === this.state || 4 === this.state;\n      }, rf.prototype.na = function () {\n        return 2 === this.state;\n      }, rf.prototype.start = function () {\n        3 !== this.state ? this.auth() : this.sa();\n      }, rf.prototype.stop = function () {\n        return g(this, void 0, void 0, function () {\n          return w(this, function (t) {\n            switch (t.label) {\n              case 0:\n                return this.ea() ? [4, this.close(0)] : [3, 2];\n\n              case 1:\n                t.sent(), t.label = 2;\n\n              case 2:\n                return [2];\n            }\n          });\n        });\n      }, rf.prototype.ia = function () {\n        this.state = 0, this.Ti.reset();\n      }, rf.prototype.ra = function () {\n        var t = this;\n        this.na() && null === this.ta && (this.ta = this.Is.Ss(this.Yh, 6e4, function () {\n          return t.oa();\n        }));\n      }, rf.prototype.ha = function (t) {\n        this.aa(), this.stream.send(t);\n      }, rf.prototype.oa = function () {\n        return g(this, void 0, void 0, function () {\n          return w(this, function (t) {\n            return this.na() ? [2, this.close(0)] : [2];\n          });\n        });\n      }, rf.prototype.aa = function () {\n        this.ta && (this.ta.cancel(), this.ta = null);\n      }, rf.prototype.close = function (e, n) {\n        return g(this, void 0, void 0, function () {\n          return w(this, function (t) {\n            switch (t.label) {\n              case 0:\n                return this.aa(), this.Ti.cancel(), this.Zh++, 3 !== e ? this.Ti.reset() : n && n.code === Jr.RESOURCE_EXHAUSTED ? (xr(n.toString()), xr(\"Using maximum backoff delay to prevent overloading the backend.\"), this.Ti.ps()) : n && n.code === Jr.UNAUTHENTICATED && this.Xh.qh(), null !== this.stream && (this.ua(), this.stream.close(), this.stream = null), this.state = e, [4, this.listener.ca(n)];\n\n              case 1:\n                return t.sent(), [2];\n            }\n          });\n        });\n      }, rf.prototype.ua = function () {}, rf.prototype.auth = function () {\n        var n = this;\n        this.state = 1;\n        var t = this.la(this.Zh),\n            e = this.Zh;\n        this.Xh.getToken().then(function (t) {\n          n.Zh === e && n._a(t);\n        }, function (e) {\n          t(function () {\n            var t = new $r(Jr.UNKNOWN, \"Fetching auth token failed: \" + e.message);\n            return n.fa(t);\n          });\n        });\n      }, rf.prototype._a = function (t) {\n        var e = this,\n            n = this.la(this.Zh);\n        this.stream = this.da(t), this.stream.wa(function () {\n          n(function () {\n            return e.state = 2, e.listener.wa();\n          });\n        }), this.stream.ca(function (t) {\n          n(function () {\n            return e.fa(t);\n          });\n        }), this.stream.onMessage(function (t) {\n          n(function () {\n            return e.onMessage(t);\n          });\n        });\n      }, rf.prototype.sa = function () {\n        var t = this;\n        this.state = 4, this.Ti.bs(function () {\n          return g(t, void 0, void 0, function () {\n            return w(this, function (t) {\n              return this.state = 0, this.start(), [2];\n            });\n          });\n        });\n      }, rf.prototype.fa = function (t) {\n        return Lr(\"PersistentStream\", \"close with error: \" + t), this.stream = null, this.close(3, t);\n      }, rf.prototype.la = function (e) {\n        var n = this;\n        return function (t) {\n          n.Is.ai(function () {\n            return n.Zh === e ? t() : (Lr(\"PersistentStream\", \"stream callback skipped by getCloseGuardedDispatcher.\"), Promise.resolve());\n          });\n        };\n      }, rf),\n          Kh = (o(nf, jh = Wh), nf.prototype.da = function (t) {\n        return this.Jh.Ta(\"Listen\", t);\n      }, nf.prototype.onMessage = function (t) {\n        this.Ti.reset();\n\n        var e = function (t, e) {\n          var n, r, i, o;\n\n          if (\"targetChange\" in e) {\n            e.targetChange;\n            var s = \"NO_CHANGE\" === (o = e.targetChange.targetChangeType || \"NO_CHANGE\") ? 0 : \"ADD\" === o ? 1 : \"REMOVE\" === o ? 2 : \"CURRENT\" === o ? 3 : \"RESET\" === o ? 4 : Cr(),\n                u = e.targetChange.targetIds || [],\n                a = (i = e.targetChange.resumeToken, t.Le ? (Vr(void 0 === i || \"string\" == typeof i), Ti.fromBase64String(i || \"\")) : (Vr(void 0 === i || i instanceof Uint8Array), Ti.fromUint8Array(i || new Uint8Array()))),\n                c = e.targetChange.cause,\n                h = c && (r = void 0 === (n = c).code ? Jr.UNKNOWN : Li(n.code), new $r(r, n.message || \"\")),\n                f = new Zi(s, u, a, h || null);\n          } else if (\"documentChange\" in e) {\n            e.documentChange;\n            var l = e.documentChange;\n            l.document, l.document.name, l.document.updateTime;\n            var p = Ho(t, l.document.name),\n                d = jo(l.document.updateTime),\n                y = new Zs({\n              mapValue: {\n                fields: l.document.fields\n              }\n            }),\n                v = new uu(p, d, y, {}),\n                g = l.targetIds || [],\n                m = l.removedTargetIds || [];\n            f = new Xi(g, m, v.key, v);\n          } else if (\"documentDelete\" in e) {\n            e.documentDelete;\n            var w = e.documentDelete;\n            w.document;\n            var b = Ho(t, w.document),\n                E = w.readTime ? jo(w.readTime) : ei.min(),\n                I = new au(b, E),\n                T = w.removedTargetIds || [];\n            f = new Xi([], T, I.key, I);\n          } else if (\"documentRemove\" in e) {\n            e.documentRemove;\n            var N = e.documentRemove;\n            N.document;\n\n            var _ = Ho(t, N.document),\n                A = N.removedTargetIds || [];\n\n            f = new Xi([], A, _, null);\n          } else {\n            if (!(\"filter\" in e)) return Cr();\n            e.filter;\n            var S = e.filter;\n            S.targetId;\n            var D = S.count || 0,\n                k = new _i(D),\n                R = S.targetId;\n            f = new Qi(R, k);\n          }\n\n          return f;\n        }(this.serializer, t),\n            n = function (t) {\n          if (!(\"targetChange\" in t)) return ei.min();\n          var e = t.targetChange;\n          return e.targetIds && e.targetIds.length || !e.readTime ? ei.min() : jo(e.readTime);\n        }(t);\n\n        return this.listener.Ea(e, n);\n      }, nf.prototype.Ia = function (t) {\n        var e,\n            n,\n            r,\n            i,\n            o = {};\n        o.database = Yo(this.serializer), o.addTarget = (e = this.serializer, i = (n = t).target, (r = Ii(i) ? {\n          documents: $o(e, i)\n        } : {\n          query: ts(e, i)\n        }).targetId = n.targetId, 0 < n.resumeToken.Y() && (r.resumeToken = qo(e, n.resumeToken)), r);\n        var s,\n            u,\n            a = (this.serializer, s = t, null == (u = function () {\n          switch (s.X) {\n            case 0:\n              return null;\n\n            case 1:\n              return \"existence-filter-mismatch\";\n\n            case 2:\n              return \"limbo-document\";\n\n            default:\n              return Cr();\n          }\n        }()) ? null : {\n          \"goog-listen-tags\": u\n        });\n        a && (o.labels = a), this.ha(o);\n      }, nf.prototype.ma = function (t) {\n        var e = {};\n        e.database = Yo(this.serializer), e.removeTarget = t, this.ha(e);\n      }, nf),\n          Yh = (o(ef, qh = Wh), Object.defineProperty(ef.prototype, \"Ra\", {\n        get: function get() {\n          return this.Aa;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), ef.prototype.start = function () {\n        this.Aa = !1, this.lastStreamToken = void 0, qh.prototype.start.call(this);\n      }, ef.prototype.ua = function () {\n        this.Aa && this.Pa([]);\n      }, ef.prototype.da = function (t) {\n        return this.Jh.Ta(\"Write\", t);\n      }, ef.prototype.onMessage = function (t) {\n        if (Vr(!!t.streamToken), this.lastStreamToken = t.streamToken, this.Aa) {\n          this.Ti.reset();\n          var e = (r = t.writeResults, i = t.commitTime, r && 0 < r.length ? (Vr(void 0 !== i), r.map(function (t) {\n            return function (t, e) {\n              var n = t.updateTime ? jo(t.updateTime) : jo(e);\n              n.isEqual(ei.min()) && (n = jo(e));\n              var r = null;\n              return t.transformResults && 0 < t.transformResults.length && (r = t.transformResults), new Ss(n, r);\n            }(t, i);\n          })) : []),\n              n = jo(t.commitTime);\n          return this.listener.ga(n, e);\n        }\n\n        var r, i;\n        return Vr(!t.writeResults || 0 === t.writeResults.length), this.Aa = !0, this.listener.Va();\n      }, ef.prototype.ya = function () {\n        var t = {};\n        t.database = Yo(this.serializer), this.ha(t);\n      }, ef.prototype.Pa = function (t) {\n        var e = this,\n            n = {\n          streamToken: this.lastStreamToken,\n          writes: t.map(function (t) {\n            return Zo(e.serializer, t);\n          })\n        };\n        this.ha(n);\n      }, ef),\n          Xh = (o(tf, Fh = function Fh() {}), tf.prototype.ba = function () {\n        if (this.pa) throw new $r(Jr.FAILED_PRECONDITION, \"The client has already been terminated.\");\n      }, tf.prototype.va = function (e, n, r) {\n        var i = this;\n        return this.ba(), this.credentials.getToken().then(function (t) {\n          return i.Jh.va(e, n, r, t);\n        }).catch(function (t) {\n          throw t.code === Jr.UNAUTHENTICATED && i.credentials.qh(), t;\n        });\n      }, tf.prototype.Sa = function (e, n, r) {\n        var i = this;\n        return this.ba(), this.credentials.getToken().then(function (t) {\n          return i.Jh.Sa(e, n, r, t);\n        }).catch(function (t) {\n          throw t.code === Jr.UNAUTHENTICATED && i.credentials.qh(), t;\n        });\n      }, tf.prototype.terminate = function () {\n        this.pa = !1;\n      }, tf),\n          Qh = ($h.prototype.ka = function () {\n        var t = this;\n        0 === this.Ca && (this.$a(\"Unknown\"), this.Na = this.ei.Ss(\"online_state_timeout\", 1e4, function () {\n          return t.Na = null, t.xa(\"Backend didn't respond within 10 seconds.\"), t.$a(\"Offline\"), Promise.resolve();\n        }));\n      }, $h.prototype.Oa = function (t) {\n        \"Online\" === this.state ? this.$a(\"Unknown\") : (this.Ca++, 1 <= this.Ca && (this.Ma(), this.xa(\"Connection failed 1 times. Most recent error: \" + t.toString()), this.$a(\"Offline\")));\n      }, $h.prototype.set = function (t) {\n        this.Ma(), this.Ca = 0, \"Online\" === t && (this.Fa = !1), this.$a(t);\n      }, $h.prototype.$a = function (t) {\n        t !== this.state && (this.state = t, this.Da(t));\n      }, $h.prototype.xa = function (t) {\n        var e = \"Could not reach Cloud Firestore backend. \" + t + \"\\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.\";\n        this.Fa ? (xr(e), this.Fa = !1) : Lr(\"OnlineStateTracker\", e);\n      }, $h.prototype.Ma = function () {\n        null !== this.Na && (this.Na.cancel(), this.Na = null);\n      }, $h),\n          Zh = (Jh.prototype.start = function () {\n        return this.enableNetwork();\n      }, Jh.prototype.enableNetwork = function () {\n        return this.Wa.delete(0), this.iu();\n      }, Jh.prototype.iu = function () {\n        return g(this, void 0, void 0, function () {\n          return w(this, function (t) {\n            switch (t.label) {\n              case 0:\n                return this.Ga() ? (this.ru() ? this.ou() : this.Ha.set(\"Unknown\"), [4, this.hu()]) : [3, 2];\n\n              case 1:\n                t.sent(), t.label = 2;\n\n              case 2:\n                return [2];\n            }\n          });\n        });\n      }, Jh.prototype.disableNetwork = function () {\n        return g(this, void 0, void 0, function () {\n          return w(this, function (t) {\n            switch (t.label) {\n              case 0:\n                return this.Wa.add(0), [4, this.au()];\n\n              case 1:\n                return t.sent(), this.Ha.set(\"Offline\"), [2];\n            }\n          });\n        });\n      }, Jh.prototype.au = function () {\n        return g(this, void 0, void 0, function () {\n          return w(this, function (t) {\n            switch (t.label) {\n              case 0:\n                return [4, this.tu.stop()];\n\n              case 1:\n                return t.sent(), [4, this.Ya.stop()];\n\n              case 2:\n                return t.sent(), 0 < this.Ba.length && (Lr(\"RemoteStore\", \"Stopping write stream with \" + this.Ba.length + \" pending writes\"), this.Ba = []), this.uu(), [2];\n            }\n          });\n        });\n      }, Jh.prototype.th = function () {\n        return g(this, void 0, void 0, function () {\n          return w(this, function (t) {\n            switch (t.label) {\n              case 0:\n                return Lr(\"RemoteStore\", \"RemoteStore shutting down.\"), this.Wa.add(5), [4, this.au()];\n\n              case 1:\n                return t.sent(), this.ja.th(), this.Ha.set(\"Unknown\"), [2];\n            }\n          });\n        });\n      }, Jh.prototype.listen = function (t) {\n        this.Ua.has(t.targetId) || (this.Ua.set(t.targetId, t), this.ru() ? this.ou() : this.Ya.na() && this.cu(t));\n      }, Jh.prototype.lu = function (t) {\n        this.Ua.delete(t), this.Ya.na() && this._u(t), 0 === this.Ua.size && (this.Ya.na() ? this.Ya.ra() : this.Ga() && this.Ha.set(\"Unknown\"));\n      }, Jh.prototype.Me = function (t) {\n        return this.Ua.get(t) || null;\n      }, Jh.prototype.Oe = function (t) {\n        return this.fu.Oe(t);\n      }, Jh.prototype.cu = function (t) {\n        this.Qa.we(t.targetId), this.Ya.Ia(t);\n      }, Jh.prototype._u = function (t) {\n        this.Qa.we(t), this.Ya.ma(t);\n      }, Jh.prototype.ou = function () {\n        this.Qa = new io(this), this.Ya.start(), this.Ha.ka();\n      }, Jh.prototype.ru = function () {\n        return this.Ga() && !this.Ya.ea() && 0 < this.Ua.size;\n      }, Jh.prototype.Ga = function () {\n        return 0 === this.Wa.size;\n      }, Jh.prototype.uu = function () {\n        this.Qa = null;\n      }, Jh.prototype.Ja = function () {\n        return g(this, void 0, void 0, function () {\n          var n = this;\n          return w(this, function (t) {\n            return this.Ua.forEach(function (t, e) {\n              n.cu(t);\n            }), [2];\n          });\n        });\n      }, Jh.prototype.Xa = function (e) {\n        return g(this, void 0, void 0, function () {\n          return w(this, function (t) {\n            return this.uu(), this.ru() ? (this.Ha.Oa(e), this.ou()) : this.Ha.set(\"Unknown\"), [2];\n          });\n        });\n      }, Jh.prototype.Za = function (i, o) {\n        return g(this, void 0, void 0, function () {\n          var e, n, r;\n          return w(this, function (t) {\n            switch (t.label) {\n              case 0:\n                if (this.Ha.set(\"Online\"), !(i instanceof Zi && 2 === i.state && i.cause)) return [3, 6];\n                t.label = 1;\n\n              case 1:\n                return t.trys.push([1, 3,, 5]), [4, this.du(i)];\n\n              case 2:\n                return t.sent(), [3, 5];\n\n              case 3:\n                return e = t.sent(), Lr(\"RemoteStore\", \"Failed to remove targets %s: %s \", i.targetIds.join(\",\"), e), [4, this.wu(e)];\n\n              case 4:\n                return t.sent(), [3, 5];\n\n              case 5:\n                return [3, 13];\n\n              case 6:\n                if (i instanceof Xi ? this.Qa.ge(i) : i instanceof Qi ? this.Qa.Ce(i) : this.Qa.pe(i), o.isEqual(ei.min())) return [3, 13];\n                t.label = 7;\n\n              case 7:\n                return t.trys.push([7, 11,, 13]), [4, _h(this.La)];\n\n              case 8:\n                return n = t.sent(), 0 <= o.o(n) ? [4, this.Tu(o)] : [3, 10];\n\n              case 9:\n                t.sent(), t.label = 10;\n\n              case 10:\n                return [3, 13];\n\n              case 11:\n                return Lr(\"RemoteStore\", \"Failed to raise snapshot:\", r = t.sent()), [4, this.wu(r)];\n\n              case 12:\n                return t.sent(), [3, 13];\n\n              case 13:\n                return [2];\n            }\n          });\n        });\n      }, Jh.prototype.wu = function (n, r) {\n        return g(this, void 0, void 0, function () {\n          var e = this;\n          return w(this, function (t) {\n            switch (t.label) {\n              case 0:\n                if (!xa(n)) throw n;\n                return this.Wa.add(1), [4, this.au()];\n\n              case 1:\n                return t.sent(), this.Ha.set(\"Offline\"), r = r || function () {\n                  return _h(e.La);\n                }, this.ei.gi(function () {\n                  return g(e, void 0, void 0, function () {\n                    return w(this, function (t) {\n                      switch (t.label) {\n                        case 0:\n                          return Lr(\"RemoteStore\", \"Retrying IndexedDB access\"), [4, r()];\n\n                        case 1:\n                          return t.sent(), this.Wa.delete(1), [4, this.iu()];\n\n                        case 2:\n                          return t.sent(), [2];\n                      }\n                    });\n                  });\n                }), [2];\n            }\n          });\n        });\n      }, Jh.prototype.Eu = function (e) {\n        var n = this;\n        return e().catch(function (t) {\n          return n.wu(t, e);\n        });\n      }, Jh.prototype.Tu = function (r) {\n        var i = this,\n            t = this.Qa.ke(r);\n        return t.Wt.forEach(function (t, e) {\n          var n;\n          0 < t.resumeToken.Y() && (n = i.Ua.get(e)) && i.Ua.set(e, n.et(t.resumeToken, r));\n        }), t.jt.forEach(function (t) {\n          var e,\n              n = i.Ua.get(t);\n          n && (i.Ua.set(t, n.et(Ti.J, n.Z)), i._u(t), e = new Di(n.target, t, 1, n.sequenceNumber), i.cu(e));\n        }), this.fu.Iu(t);\n      }, Jh.prototype.du = function (o) {\n        return g(this, void 0, void 0, function () {\n          var e, n, r, i;\n          return w(this, function (t) {\n            switch (t.label) {\n              case 0:\n                e = o.cause, n = 0, r = o.targetIds, t.label = 1;\n\n              case 1:\n                return n < r.length ? (i = r[n], this.Ua.has(i) ? [4, this.fu.mu(i, e)] : [3, 3]) : [3, 5];\n\n              case 2:\n                t.sent(), this.Ua.delete(i), this.Qa.removeTarget(i), t.label = 3;\n\n              case 3:\n                t.label = 4;\n\n              case 4:\n                return n++, [3, 1];\n\n              case 5:\n                return [2];\n            }\n          });\n        });\n      }, Jh.prototype.hu = function () {\n        return g(this, void 0, void 0, function () {\n          var i, o, s;\n          return w(this, function (t) {\n            switch (t.label) {\n              case 0:\n                i = 0 < this.Ba.length ? this.Ba[this.Ba.length - 1].batchId : -1, t.label = 1;\n\n              case 1:\n                if (!this.Au()) return [3, 7];\n                t.label = 2;\n\n              case 2:\n                return t.trys.push([2, 4,, 6]), [4, (e = this.La, n = i, (r = e).persistence.runTransaction(\"Get next mutation batch\", \"readonly\", function (t) {\n                  return void 0 === n && (n = -1), r.Gn.gr(t, n);\n                }))];\n\n              case 3:\n                return null === (o = t.sent()) ? (0 === this.Ba.length && this.tu.ra(), [3, 7]) : (i = o.batchId, this.Ru(o), [3, 6]);\n\n              case 4:\n                return s = t.sent(), [4, this.wu(s)];\n\n              case 5:\n                return t.sent(), [3, 6];\n\n              case 6:\n                return [3, 1];\n\n              case 7:\n                return this.Pu() && this.gu(), [2];\n            }\n\n            var e, n, r;\n          });\n        });\n      }, Jh.prototype.Au = function () {\n        return this.Ga() && this.Ba.length < 10;\n      }, Jh.prototype.Vu = function () {\n        return this.Ba.length;\n      }, Jh.prototype.Ru = function (t) {\n        this.Ba.push(t), this.tu.na() && this.tu.Ra && this.tu.Pa(t.mutations);\n      }, Jh.prototype.Pu = function () {\n        return this.Ga() && !this.tu.ea() && 0 < this.Ba.length;\n      }, Jh.prototype.gu = function () {\n        this.tu.start();\n      }, Jh.prototype.eu = function () {\n        return g(this, void 0, void 0, function () {\n          return w(this, function (t) {\n            return this.tu.ya(), [2];\n          });\n        });\n      }, Jh.prototype.su = function () {\n        return g(this, void 0, void 0, function () {\n          var e, n, r;\n          return w(this, function (t) {\n            for (e = 0, n = this.Ba; e < n.length; e++) {\n              r = n[e], this.tu.Pa(r.mutations);\n            }\n\n            return [2];\n          });\n        });\n      }, Jh.prototype.ga = function (i, o) {\n        return g(this, void 0, void 0, function () {\n          var e,\n              n,\n              r = this;\n          return w(this, function (t) {\n            switch (t.label) {\n              case 0:\n                return e = this.Ba.shift(), n = sa.from(e, i, o), [4, this.Eu(function () {\n                  return r.fu.yu(n);\n                })];\n\n              case 1:\n                return t.sent(), [4, this.hu()];\n\n              case 2:\n                return t.sent(), [2];\n            }\n          });\n        });\n      }, Jh.prototype.nu = function (e) {\n        return g(this, void 0, void 0, function () {\n          return w(this, function (t) {\n            switch (t.label) {\n              case 0:\n                return e && this.tu.Ra ? [4, this.pu(e)] : [3, 2];\n\n              case 1:\n                t.sent(), t.label = 2;\n\n              case 2:\n                return this.Pu() && this.gu(), [2];\n            }\n          });\n        });\n      }, Jh.prototype.pu = function (i) {\n        return g(this, void 0, void 0, function () {\n          var e,\n              n,\n              r = this;\n          return w(this, function (t) {\n            switch (t.label) {\n              case 0:\n                return Ri(n = i.code) && n !== Jr.ABORTED ? (e = this.Ba.shift(), this.tu.ia(), [4, this.Eu(function () {\n                  return r.fu.bu(e.batchId, i);\n                })]) : [3, 3];\n\n              case 1:\n                return t.sent(), [4, this.hu()];\n\n              case 2:\n                t.sent(), t.label = 3;\n\n              case 3:\n                return [2];\n            }\n          });\n        });\n      }, Jh.prototype.za = function () {\n        return g(this, void 0, void 0, function () {\n          return w(this, function (t) {\n            switch (t.label) {\n              case 0:\n                return this.Wa.add(4), [4, this.au()];\n\n              case 1:\n                return t.sent(), this.Ha.set(\"Unknown\"), this.tu.ia(), this.Ya.ia(), this.Wa.delete(4), [4, this.iu()];\n\n              case 2:\n                return t.sent(), [2];\n            }\n          });\n        });\n      }, Jh.prototype.vu = function (e) {\n        return g(this, void 0, void 0, function () {\n          return w(this, function (t) {\n            switch (t.label) {\n              case 0:\n                return this.ei.pi(), Lr(\"RemoteStore\", \"RemoteStore received new credentials\"), this.Wa.add(3), [4, this.au()];\n\n              case 1:\n                return t.sent(), this.Ha.set(\"Unknown\"), [4, this.fu.vu(e)];\n\n              case 2:\n                return t.sent(), this.Wa.delete(3), [4, this.iu()];\n\n              case 3:\n                return t.sent(), [2];\n            }\n          });\n        });\n      }, Jh.prototype.Su = function (e) {\n        return g(this, void 0, void 0, function () {\n          return w(this, function (t) {\n            switch (t.label) {\n              case 0:\n                return e ? (this.Wa.delete(2), [4, this.iu()]) : [3, 2];\n\n              case 1:\n                return t.sent(), [3, 5];\n\n              case 2:\n                return e ? [3, 4] : (this.Wa.add(2), [4, this.au()]);\n\n              case 3:\n                t.sent(), this.Ha.set(\"Unknown\"), t.label = 4;\n\n              case 4:\n                t.label = 5;\n\n              case 5:\n                return [2];\n            }\n          });\n        });\n      }, Jh);\n\n      function Jh(t, e, n, r, i) {\n        var o,\n            s,\n            u,\n            a,\n            c,\n            h,\n            f,\n            l,\n            p = this;\n        this.La = t, this.qa = e, this.ei = n, this.Ba = [], this.Ua = new Map(), this.Qa = null, this.Wa = new Set(), this.ja = i, this.ja.Ka(function (t) {\n          n.ai(function () {\n            return g(p, void 0, void 0, function () {\n              return w(this, function (t) {\n                switch (t.label) {\n                  case 0:\n                    return this.Ga() ? (Lr(\"RemoteStore\", \"Restarting streams for network reachability change.\"), [4, this.za()]) : [3, 2];\n\n                  case 1:\n                    t.sent(), t.label = 2;\n\n                  case 2:\n                    return [2];\n                }\n              });\n            });\n          });\n        }), this.Ha = new Qh(n, r), this.Ya = (c = this.qa, h = n, f = {\n          wa: this.Ja.bind(this),\n          ca: this.Xa.bind(this),\n          Ea: this.Za.bind(this)\n        }, (l = c).ba(), new Kh(h, l.Jh, l.credentials, l.serializer, f)), this.tu = (o = this.qa, s = n, u = {\n          wa: this.eu.bind(this),\n          ca: this.nu.bind(this),\n          Va: this.su.bind(this),\n          ga: this.ga.bind(this)\n        }, (a = o).ba(), new Yh(s, a.Jh, a.credentials, a.serializer, u));\n      }\n\n      function $h(t, e) {\n        this.ei = t, this.Da = e, this.state = \"Unknown\", this.Ca = 0, this.Na = null, this.Fa = !0;\n      }\n\n      function tf(t, e, n) {\n        var r = this;\n        return (r = Fh.call(this) || this).credentials = t, r.Jh = e, r.serializer = n, r.pa = !1, r;\n      }\n\n      function ef(t, e, n, r, i) {\n        var o = this;\n        return (o = qh.call(this, t, \"write_stream_connection_backoff\", \"write_stream_idle\", e, n, i) || this).serializer = r, o.Aa = !1, o;\n      }\n\n      function nf(t, e, n, r, i) {\n        var o = this;\n        return (o = jh.call(this, t, \"listen_stream_connection_backoff\", \"listen_stream_idle\", e, n, i) || this).serializer = r, o;\n      }\n\n      function rf(t, e, n, r, i, o) {\n        this.Is = t, this.Yh = n, this.Jh = r, this.Xh = i, this.listener = o, this.state = 0, this.Zh = 0, this.ta = null, this.stream = null, this.Ti = new Na(t, e);\n      }\n\n      function of(t, e) {\n        this.Gh = t, this.zh = e;\n      }\n\n      function sf(t, e) {\n        this.Gh = t, this.zh = e, this.type = \"FirstParty\", this.user = Ph.Oh;\n      }\n\n      function uf(t) {\n        var e = this;\n        this.Qh = null, this.currentUser = Ph.UNAUTHENTICATED, this.Wh = !1, this.jh = 0, this.Lh = null, this.forceRefresh = !1, this.Qh = function () {\n          e.jh++, e.currentUser = e.Kh(), e.Wh = !0, e.Lh && e.Lh(e.currentUser);\n        }, this.jh = 0, this.auth = t.getImmediate({\n          optional: !0\n        }), this.auth ? this.auth.addAuthTokenListener(this.Qh) : (this.Qh(null), t.get().then(function (t) {\n          e.auth = t, e.Qh && e.auth.addAuthTokenListener(e.Qh);\n        }, function () {}));\n      }\n\n      function af() {\n        this.Lh = null;\n      }\n\n      function cf(t, e) {\n        return \"firestore_clients_\" + t + \"_\" + e;\n      }\n\n      function hf(t, e, n) {\n        var r = \"firestore_mutations_\" + t + \"_\" + n;\n        return e.Er() && (r += \"_\" + e.uid), r;\n      }\n\n      function ff(t, e) {\n        return \"firestore_targets_\" + t + \"_\" + e;\n      }\n\n      function lf(t) {\n        this.key = t;\n      }\n\n      function pf(t) {\n        this.key = t;\n      }\n\n      function df(t, e, n) {\n        this.query = t, this.targetId = e, this.view = n;\n      }\n\n      function yf(t) {\n        this.key = t, this.qc = !1;\n      }\n\n      var vf = (Of.Du = function (t, e, n) {\n        var r = JSON.parse(n),\n            i = \"object\" == typeof r && -1 !== [\"pending\", \"acknowledged\", \"rejected\"].indexOf(r.state) && (void 0 === r.error || \"object\" == typeof r.error),\n            o = void 0;\n        return i && r.error && (i = \"string\" == typeof r.error.message && \"string\" == typeof r.error.code) && (o = new $r(r.error.code, r.error.message)), i ? new Of(t, e, r.state, o) : (xr(\"SharedClientState\", \"Failed to parse mutation state for ID '\" + e + \"': \" + n), null);\n      }, Of.prototype.Cu = function () {\n        var t = {\n          state: this.state,\n          updateTimeMs: Date.now()\n        };\n        return this.error && (t.error = {\n          code: this.error.code,\n          message: this.error.message\n        }), JSON.stringify(t);\n      }, Of),\n          gf = (xf.Du = function (t, e) {\n        var n = JSON.parse(e),\n            r = \"object\" == typeof n && -1 !== [\"not-current\", \"current\", \"rejected\"].indexOf(n.state) && (void 0 === n.error || \"object\" == typeof n.error),\n            i = void 0;\n        return r && n.error && (r = \"string\" == typeof n.error.message && \"string\" == typeof n.error.code) && (i = new $r(n.error.code, n.error.message)), r ? new xf(t, n.state, i) : (xr(\"SharedClientState\", \"Failed to parse target state for ID '\" + t + \"': \" + e), null);\n      }, xf.prototype.Cu = function () {\n        var t = {\n          state: this.state,\n          updateTimeMs: Date.now()\n        };\n        return this.error && (t.error = {\n          code: this.error.code,\n          message: this.error.message\n        }), JSON.stringify(t);\n      }, xf),\n          mf = (Lf.Du = function (t, e) {\n        for (var n = JSON.parse(e), r = \"object\" == typeof n && n.activeTargetIds instanceof Array, i = Yi, o = 0; r && o < n.activeTargetIds.length; ++o) {\n          r = gi(n.activeTargetIds[o]), i = i.add(n.activeTargetIds[o]);\n        }\n\n        return r ? new Lf(t, i) : (xr(\"SharedClientState\", \"Failed to parse client data for instance '\" + t + \"': \" + e), null);\n      }, Lf),\n          wf = (Rf.Du = function (t) {\n        var e = JSON.parse(t);\n        return \"object\" == typeof e && -1 !== [\"Unknown\", \"Online\", \"Offline\"].indexOf(e.onlineState) && \"string\" == typeof e.clientId ? new Rf(e.clientId, e.onlineState) : (xr(\"SharedClientState\", \"Failed to parse online state: \" + t), null);\n      }, Rf),\n          bf = (kf.prototype.Nu = function (t) {\n        this.activeTargetIds = this.activeTargetIds.add(t);\n      }, kf.prototype.Fu = function (t) {\n        this.activeTargetIds = this.activeTargetIds.delete(t);\n      }, kf.prototype.Cu = function () {\n        var t = {\n          activeTargetIds: this.activeTargetIds.N(),\n          updateTimeMs: Date.now()\n        };\n        return JSON.stringify(t);\n      }, kf),\n          Ef = (Df.ks = function (t) {\n        return !(!t || !t.localStorage);\n      }, Df.prototype.start = function () {\n        return g(this, void 0, void 0, function () {\n          var e,\n              n,\n              r,\n              i,\n              o,\n              s,\n              u,\n              a,\n              c,\n              h,\n              f,\n              l = this;\n          return w(this, function (t) {\n            switch (t.label) {\n              case 0:\n                return [4, this.fu.rh()];\n\n              case 1:\n                for (e = t.sent(), n = 0, r = e; n < r.length; n++) {\n                  (i = r[n]) !== this.ku && (o = this.getItem(cf(this.persistenceKey, i))) && (s = mf.Du(i, o)) && (this.Ou = this.Ou.st(s.clientId, s));\n                }\n\n                for (this.ju(), (u = this.storage.getItem(this.Wu)) && (a = this.Ku(u)) && this.Gu(a), c = 0, h = this.Mu; c < h.length; c++) {\n                  f = h[c], this.xu(f);\n                }\n\n                return this.Mu = [], this.window.addEventListener(\"unload\", function () {\n                  return l.th();\n                }), this.tr = !0, [2];\n            }\n          });\n        });\n      }, Df.prototype.Ts = function (t) {\n        this.setItem(this.qu, JSON.stringify(t));\n      }, Df.prototype.zu = function () {\n        return this.Hu(this.Ou);\n      }, Df.prototype.Yu = function (n) {\n        var r = !1;\n        return this.Ou.forEach(function (t, e) {\n          e.activeTargetIds.has(n) && (r = !0);\n        }), r;\n      }, Df.prototype.Ju = function (t) {\n        this.Xu(t, \"pending\");\n      }, Df.prototype.Zu = function (t, e, n) {\n        this.Xu(t, e, n), this.tc(t);\n      }, Df.prototype.ec = function (t) {\n        var e,\n            n,\n            r = \"not-current\";\n        return this.Yu(t) && (!(e = this.storage.getItem(ff(this.persistenceKey, t))) || (n = gf.Du(t, e)) && (r = n.state)), this.nc.Nu(t), this.ju(), r;\n      }, Df.prototype.sc = function (t) {\n        this.nc.Fu(t), this.ju();\n      }, Df.prototype.ic = function (t) {\n        return this.nc.activeTargetIds.has(t);\n      }, Df.prototype.rc = function (t) {\n        this.removeItem(ff(this.persistenceKey, t));\n      }, Df.prototype.oc = function (t, e, n) {\n        this.hc(t, e, n);\n      }, Df.prototype.ac = function (t, e, n) {\n        var r = this;\n        e.forEach(function (t) {\n          r.tc(t);\n        }), this.currentUser = t, n.forEach(function (t) {\n          r.Ju(t);\n        });\n      }, Df.prototype.uc = function (t) {\n        this.cc(t);\n      }, Df.prototype.th = function () {\n        this.tr && (this.window.removeEventListener(\"storage\", this.$u), this.removeItem(this.Lu), this.tr = !1);\n      }, Df.prototype.getItem = function (t) {\n        var e = this.storage.getItem(t);\n        return Lr(\"SharedClientState\", \"READ\", t, e), e;\n      }, Df.prototype.setItem = function (t, e) {\n        Lr(\"SharedClientState\", \"SET\", t, e), this.storage.setItem(t, e);\n      }, Df.prototype.removeItem = function (t) {\n        Lr(\"SharedClientState\", \"REMOVE\", t), this.storage.removeItem(t);\n      }, Df.prototype.xu = function (t) {\n        var e = this,\n            u = t;\n\n        if (u.storageArea === this.storage) {\n          if (Lr(\"SharedClientState\", \"EVENT\", u.key, u.newValue), u.key === this.Lu) return void xr(\"Received WebStorage notification for local change. Another client might have garbage-collected our state\");\n          this.Is.gi(function () {\n            return g(e, void 0, void 0, function () {\n              var e, n, r, i, o, s;\n              return w(this, function (t) {\n                if (this.tr) {\n                  if (null !== u.key) if (this.Bu.test(u.key)) {\n                    if (null == u.newValue) return e = this.lc(u.key), [2, this._c(e, null)];\n                    if (n = this.fc(u.key, u.newValue)) return [2, this._c(n.clientId, n)];\n                  } else if (this.Uu.test(u.key)) {\n                    if (null !== u.newValue && (r = this.dc(u.key, u.newValue))) return [2, this.wc(r)];\n                  } else if (this.Qu.test(u.key)) {\n                    if (null !== u.newValue && (i = this.Tc(u.key, u.newValue))) return [2, this.Ec(i)];\n                  } else if (u.key === this.Wu) {\n                    if (null !== u.newValue && (o = this.Ku(u.newValue))) return [2, this.Gu(o)];\n                  } else u.key === this.qu && (s = function (t) {\n                    var e = pa.Es;\n                    if (null != t) try {\n                      var n = JSON.parse(t);\n                      Vr(\"number\" == typeof n), e = n;\n                    } catch (t) {\n                      xr(\"SharedClientState\", \"Failed to read sequence number from WebStorage\", t);\n                    }\n                    return e;\n                  }(u.newValue)) !== pa.Es && this.fs(s);\n                } else this.Mu.push(u);\n\n                return [2];\n              });\n            });\n          });\n        }\n      }, Object.defineProperty(Df.prototype, \"nc\", {\n        get: function get() {\n          return this.Ou.get(this.ku);\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Df.prototype.ju = function () {\n        this.setItem(this.Lu, this.nc.Cu());\n      }, Df.prototype.Xu = function (t, e, n) {\n        var r = new vf(this.currentUser, t, e, n),\n            i = hf(this.persistenceKey, this.currentUser, t);\n        this.setItem(i, r.Cu());\n      }, Df.prototype.tc = function (t) {\n        var e = hf(this.persistenceKey, this.currentUser, t);\n        this.removeItem(e);\n      }, Df.prototype.cc = function (t) {\n        var e = {\n          clientId: this.ku,\n          onlineState: t\n        };\n        this.storage.setItem(this.Wu, JSON.stringify(e));\n      }, Df.prototype.hc = function (t, e, n) {\n        var r = ff(this.persistenceKey, t),\n            i = new gf(t, e, n);\n        this.setItem(r, i.Cu());\n      }, Df.prototype.lc = function (t) {\n        var e = this.Bu.exec(t);\n        return e ? e[1] : null;\n      }, Df.prototype.fc = function (t, e) {\n        var n = this.lc(t);\n        return mf.Du(n, e);\n      }, Df.prototype.dc = function (t, e) {\n        var n = this.Uu.exec(t),\n            r = Number(n[1]),\n            i = void 0 !== n[2] ? n[2] : null;\n        return vf.Du(new Ph(i), r, e);\n      }, Df.prototype.Tc = function (t, e) {\n        var n = this.Qu.exec(t),\n            r = Number(n[1]);\n        return gf.Du(r, e);\n      }, Df.prototype.Ku = function (t) {\n        return wf.Du(t);\n      }, Df.prototype.wc = function (e) {\n        return g(this, void 0, void 0, function () {\n          return w(this, function (t) {\n            return e.user.uid === this.currentUser.uid ? [2, this.fu.Ic(e.batchId, e.state, e.error)] : (Lr(\"SharedClientState\", \"Ignoring mutation for non-active user \" + e.user.uid), [2]);\n          });\n        });\n      }, Df.prototype.Ec = function (t) {\n        return this.fu.mc(t.targetId, t.state, t.error);\n      }, Df.prototype._c = function (t, e) {\n        var n = this,\n            r = e ? this.Ou.st(t, e) : this.Ou.remove(t),\n            i = this.Hu(this.Ou),\n            o = this.Hu(r),\n            s = [],\n            u = [];\n        return o.forEach(function (t) {\n          i.has(t) || s.push(t);\n        }), i.forEach(function (t) {\n          o.has(t) || u.push(t);\n        }), this.fu.Ac(s, u).then(function () {\n          n.Ou = r;\n        });\n      }, Df.prototype.Gu = function (t) {\n        this.Ou.get(t.clientId) && this.Da(t.onlineState);\n      }, Df.prototype.Hu = function (t) {\n        var n = Yi;\n        return t.forEach(function (t, e) {\n          n = n.Nt(e.activeTargetIds);\n        }), n;\n      }, Df),\n          If = (Sf.prototype.Ju = function (t) {}, Sf.prototype.Zu = function (t, e, n) {}, Sf.prototype.ec = function (t) {\n        return this.Rc.Nu(t), this.Pc[t] || \"not-current\";\n      }, Sf.prototype.oc = function (t, e, n) {\n        this.Pc[t] = e;\n      }, Sf.prototype.sc = function (t) {\n        this.Rc.Fu(t);\n      }, Sf.prototype.ic = function (t) {\n        return this.Rc.activeTargetIds.has(t);\n      }, Sf.prototype.rc = function (t) {\n        delete this.Pc[t];\n      }, Sf.prototype.zu = function () {\n        return this.Rc.activeTargetIds;\n      }, Sf.prototype.Yu = function (t) {\n        return this.Rc.activeTargetIds.has(t);\n      }, Sf.prototype.start = function () {\n        return this.Rc = new bf(), Promise.resolve();\n      }, Sf.prototype.ac = function (t, e, n) {}, Sf.prototype.uc = function (t) {}, Sf.prototype.th = function () {}, Sf.prototype.Ts = function (t) {}, Sf),\n          Tf = (Object.defineProperty(Af.prototype, \"vc\", {\n        get: function get() {\n          return this.gc;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Af.prototype.Sc = function (t, e) {\n        var u = this,\n            a = e ? e.Dc : new $i(),\n            c = e ? e.bc : this.bc,\n            h = e ? e.qt : this.qt,\n            f = c,\n            l = !1,\n            p = this.query.an() && c.size === this.query.limit ? c.last() : null,\n            d = this.query.un() && c.size === this.query.limit ? c.first() : null;\n        if (t.ht(function (t, e) {\n          var n = c.get(t),\n              r = (r = e instanceof uu ? e : null) && (Su(u.query, r) ? r : null),\n              i = !!n && u.qt.has(n.key),\n              o = !!r && (r.Ge || u.qt.has(r.key) && r.hasCommittedMutations),\n              s = !1;\n          n && r ? n.data().isEqual(r.data()) ? i !== o && (a.track({\n            type: 3,\n            doc: r\n          }), s = !0) : u.Cc(n, r) || (a.track({\n            type: 2,\n            doc: r\n          }), s = !0, (p && 0 < u.pc(r, p) || d && u.pc(r, d) < 0) && (l = !0)) : !n && r ? (a.track({\n            type: 0,\n            doc: r\n          }), s = !0) : n && !r && (a.track({\n            type: 1,\n            doc: n\n          }), s = !0, (p || d) && (l = !0)), s && (h = r ? (f = f.add(r), o ? h.add(t) : h.delete(t)) : (f = f.delete(t), h.delete(t)));\n        }), this.query.an() || this.query.un()) for (; f.size > this.query.limit;) {\n          var n = this.query.an() ? f.last() : f.first(),\n              f = f.delete(n.key),\n              h = h.delete(n.key);\n          a.track({\n            type: 1,\n            doc: n\n          });\n        }\n        return {\n          bc: f,\n          Dc: a,\n          Nc: l,\n          qt: h\n        };\n      }, Af.prototype.Cc = function (t, e) {\n        return t.Ge && e.hasCommittedMutations && !e.Ge;\n      }, Af.prototype.Un = function (t, e, n) {\n        var o = this,\n            r = this.bc;\n        this.bc = t.bc, this.qt = t.qt;\n        var i = t.Dc.Mt();\n        i.sort(function (t, e) {\n          return r = t.type, i = e.type, n(r) - n(i) || o.pc(t.doc, e.doc);\n\n          function n(t) {\n            switch (t) {\n              case 0:\n                return 1;\n\n              case 2:\n              case 3:\n                return 2;\n\n              case 1:\n                return 0;\n\n              default:\n                return Cr();\n            }\n          }\n\n          var r, i;\n        }), this.Fc(n);\n        var s = e ? this.kc() : [],\n            u = 0 === this.yc.size && this.Yt ? 1 : 0,\n            a = u !== this.Vc;\n        return this.Vc = u, 0 !== i.length || a ? {\n          snapshot: new to(this.query, t.bc, r, i, t.qt, 0 == u, a, !1),\n          $c: s\n        } : {\n          $c: s\n        };\n      }, Af.prototype.xc = function (t) {\n        return this.Yt && \"Offline\" === t ? (this.Yt = !1, this.Un({\n          bc: this.bc,\n          Dc: new $i(),\n          qt: this.qt,\n          Nc: !1\n        }, !1)) : {\n          $c: []\n        };\n      }, Af.prototype.Oc = function (t) {\n        return !this.gc.has(t) && !!this.bc.has(t) && !this.bc.get(t).Ge;\n      }, Af.prototype.Fc = function (t) {\n        var e = this;\n        t && (t.Jt.forEach(function (t) {\n          return e.gc = e.gc.add(t);\n        }), t.Xt.forEach(function (t) {}), t.Zt.forEach(function (t) {\n          return e.gc = e.gc.delete(t);\n        }), this.Yt = t.Yt);\n      }, Af.prototype.kc = function () {\n        var e = this;\n        if (!this.Yt) return [];\n        var n = this.yc;\n        this.yc = Ki(), this.bc.forEach(function (t) {\n          e.Oc(t.key) && (e.yc = e.yc.add(t.key));\n        });\n        var r = [];\n        return n.forEach(function (t) {\n          e.yc.has(t) || r.push(new pf(t));\n        }), this.yc.forEach(function (t) {\n          n.has(t) || r.push(new lf(t));\n        }), r;\n      }, Af.prototype.Mc = function (t) {\n        this.gc = t.gh, this.yc = Ki();\n        var e = this.Sc(t.documents);\n        return this.Un(e, !0);\n      }, Af.prototype.Lc = function () {\n        return to.Qt(this.query, this.bc, this.qt, 0 === this.Vc);\n      }, Af),\n          Nf = (Object.defineProperty(_f.prototype, \"el\", {\n        get: function get() {\n          return !0 === this.tl;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), _f.prototype.subscribe = function (t) {\n        this.Wc = t;\n      }, _f.prototype.listen = function (s) {\n        return g(this, void 0, void 0, function () {\n          var e, n, r, i, o;\n          return w(this, function (t) {\n            switch (t.label) {\n              case 0:\n                return this.nl(\"listen()\"), (r = this.jc.get(s)) ? (e = r.targetId, this.Uc.ec(e), n = r.view.Lc(), [3, 4]) : [3, 1];\n\n              case 1:\n                return [4, Sh(this.La, bu(s))];\n\n              case 2:\n                return i = t.sent(), o = this.Uc.ec(i.targetId), e = i.targetId, [4, this.sl(s, e, \"current\" === o)];\n\n              case 3:\n                n = t.sent(), this.el && this.Bc.listen(i), t.label = 4;\n\n              case 4:\n                return [2, n];\n            }\n          });\n        });\n      }, _f.prototype.sl = function (u, a, c) {\n        return g(this, void 0, void 0, function () {\n          var e, n, r, i, o, s;\n          return w(this, function (t) {\n            switch (t.label) {\n              case 0:\n                return [4, kh(this.La, u, !0)];\n\n              case 1:\n                return e = t.sent(), n = new Tf(u, e.gh), r = n.Sc(e.documents), i = no.Ht(a, c && \"Offline\" !== this.onlineState), o = n.Un(r, this.el, i), this.il(a, o.$c), s = new df(u, a, n), [2, (this.jc.set(u, s), this.Kc.has(a) ? this.Kc.get(a).push(u) : this.Kc.set(a, [u]), o.snapshot)];\n            }\n          });\n        });\n      }, _f.prototype.lu = function (i) {\n        return g(this, void 0, void 0, function () {\n          var e,\n              n,\n              r = this;\n          return w(this, function (t) {\n            switch (t.label) {\n              case 0:\n                return this.nl(\"unlisten()\"), e = this.jc.get(i), 1 < (n = this.Kc.get(e.targetId)).length ? [2, (this.Kc.set(e.targetId, n.filter(function (t) {\n                  return !Nu(t, i);\n                })), void this.jc.delete(i))] : this.el ? (this.Uc.sc(e.targetId), this.Uc.Yu(e.targetId) ? [3, 2] : [4, Dh(this.La, e.targetId, !1).then(function () {\n                  r.Uc.rc(e.targetId), r.Bc.lu(e.targetId), r.rl(e.targetId);\n                }).catch(Lh)]) : [3, 3];\n\n              case 1:\n                t.sent(), t.label = 2;\n\n              case 2:\n                return [3, 5];\n\n              case 3:\n                return this.rl(e.targetId), [4, Dh(this.La, e.targetId, !0)];\n\n              case 4:\n                t.sent(), t.label = 5;\n\n              case 5:\n                return [2];\n            }\n          });\n        });\n      }, _f.prototype.write = function (s, u) {\n        return g(this, void 0, void 0, function () {\n          var r, i, o;\n          return w(this, function (t) {\n            switch (t.label) {\n              case 0:\n                this.nl(\"write()\"), t.label = 1;\n\n              case 1:\n                return t.trys.push([1, 5,, 6]), [4, (e = this.La, c = s, f = e, l = ti.now(), n = c.reduce(function (t, e) {\n                  return t.add(e.key);\n                }, Ki()), f.persistence.runTransaction(\"Locally write mutations\", \"readwrite\", function (a) {\n                  return f.Rh.Zn(a, n).next(function (t) {\n                    h = t;\n\n                    for (var u, e, n = [], r = 0, i = c; r < i.length; r++) {\n                      var o = i[r],\n                          s = (u = o, e = h.get(o.key), u instanceof zs ? function (t) {\n                        for (var e = null, n = 0, r = u.fieldTransforms; n < r.length; n++) {\n                          var i = r[n],\n                              o = t instanceof uu ? t.field(i.field) : void 0,\n                              s = us(i.transform, o || null);\n                          null != s && (e = null == e ? new Js().set(i.field, s) : e.set(i.field, s));\n                        }\n\n                        return e ? e.ze() : null;\n                      }(e) : null);\n                      null != s && n.push(new Fs(o.key, s, function u(t) {\n                        var a = [];\n                        return Wr(t.fields || {}, function (t, e) {\n                          var n = new oi([t]);\n\n                          if (xo(e)) {\n                            var r = u(e.mapValue).fields;\n                            if (0 === r.length) a.push(n);else for (var i = 0, o = r; i < o.length; i++) {\n                              var s = o[i];\n                              a.push(n.child(s));\n                            }\n                          } else a.push(n);\n                        }), new Ns(a);\n                      }(s.proto.mapValue), Ds.exists(!0)));\n                    }\n\n                    return f.Gn.mr(a, l, n, c);\n                  });\n                }).then(function (t) {\n                  var e = t.An(h);\n                  return {\n                    batchId: t.batchId,\n                    Fn: e\n                  };\n                }))];\n\n              case 2:\n                return r = t.sent(), this.Uc.Ju(r.batchId), this.ol(r.batchId, u), [4, this.hl(r.Fn)];\n\n              case 3:\n                return t.sent(), [4, this.Bc.hu()];\n\n              case 4:\n                return t.sent(), [3, 6];\n\n              case 5:\n                return i = t.sent(), o = Wa(i, \"Failed to persist write\"), u.reject(o), [3, 6];\n\n              case 6:\n                return [2];\n            }\n\n            var e, c, h, f, l, n;\n          });\n        });\n      }, _f.prototype.Iu = function (n) {\n        return g(this, void 0, void 0, function () {\n          var e,\n              r = this;\n          return w(this, function (t) {\n            switch (t.label) {\n              case 0:\n                this.nl(\"applyRemoteEvent()\"), t.label = 1;\n\n              case 1:\n                return t.trys.push([1, 4,, 6]), [4, Ah(this.La, n)];\n\n              case 2:\n                return e = t.sent(), n.Wt.forEach(function (t, e) {\n                  var n = r.Hc.get(e);\n                  n && (Vr(t.Jt.size + t.Xt.size + t.Zt.size <= 1), 0 < t.Jt.size ? n.qc = !0 : 0 < t.Xt.size ? Vr(n.qc) : 0 < t.Zt.size && (Vr(n.qc), n.qc = !1));\n                }), [4, this.hl(e, n)];\n\n              case 3:\n                return t.sent(), [3, 6];\n\n              case 4:\n                return [4, Lh(t.sent())];\n\n              case 5:\n                return t.sent(), [3, 6];\n\n              case 6:\n                return [2];\n            }\n          });\n        });\n      }, _f.prototype.xc = function (r, t) {\n        var i;\n        (this.el && 0 === t || !this.el && 1 === t) && (this.nl(\"applyOnlineStateChange()\"), i = [], this.jc.forEach(function (t, e) {\n          var n = e.view.xc(r);\n          n.snapshot && i.push(n.snapshot);\n        }), this.Wc.al(r), this.Wc.Ea(i), this.onlineState = r, this.el && this.Uc.uc(r));\n      }, _f.prototype.mu = function (u, a) {\n        return g(this, void 0, void 0, function () {\n          var e,\n              n,\n              r,\n              i,\n              o,\n              s = this;\n          return w(this, function (t) {\n            switch (t.label) {\n              case 0:\n                return this.nl(\"rejectListens()\"), this.Uc.oc(u, \"rejected\", a), e = this.Hc.get(u), (n = e && e.key) ? (r = (r = new xi(si.P)).st(n, new au(n, ei.min())), i = Ki().add(n), o = new eo(ei.min(), new Map(), new Fi(Fr), r, i), [4, this.Iu(o)]) : [3, 2];\n\n              case 1:\n                return t.sent(), this.zc = this.zc.remove(n), this.Hc.delete(u), this.ul(), [3, 4];\n\n              case 2:\n                return [4, Dh(this.La, u, !1).then(function () {\n                  return s.rl(u, a);\n                }).catch(Lh)];\n\n              case 3:\n                t.sent(), t.label = 4;\n\n              case 4:\n                return [2];\n            }\n          });\n        });\n      }, _f.prototype.yu = function (r) {\n        return g(this, void 0, void 0, function () {\n          var e, n;\n          return w(this, function (t) {\n            switch (t.label) {\n              case 0:\n                this.nl(\"applySuccessfulWrite()\"), e = r.batch.batchId, t.label = 1;\n\n              case 1:\n                return t.trys.push([1, 4,, 6]), [4, Nh(this.La, r)];\n\n              case 2:\n                return n = t.sent(), this.cl(e, null), this.ll(e), this.Uc.Zu(e, \"acknowledged\"), [4, this.hl(n)];\n\n              case 3:\n                return t.sent(), [3, 6];\n\n              case 4:\n                return [4, Lh(t.sent())];\n\n              case 5:\n                return t.sent(), [3, 6];\n\n              case 6:\n                return [2];\n            }\n          });\n        });\n      }, _f.prototype.bu = function (o, s) {\n        return g(this, void 0, void 0, function () {\n          var n;\n          return w(this, function (t) {\n            switch (t.label) {\n              case 0:\n                this.nl(\"rejectFailedWrite()\"), t.label = 1;\n\n              case 1:\n                return t.trys.push([1, 4,, 6]), [4, (e = this.La, r = o, (i = e).persistence.runTransaction(\"Reject batch\", \"readwrite-primary\", function (e) {\n                  var n;\n                  return i.Gn.Rr(e, r).next(function (t) {\n                    return Vr(null !== t), n = t.keys(), i.Gn.br(e, t);\n                  }).next(function () {\n                    return i.Gn.Cr(e);\n                  }).next(function () {\n                    return i.Rh.Zn(e, n);\n                  });\n                }))];\n\n              case 2:\n                return n = t.sent(), this.cl(o, s), this.ll(o), this.Uc.Zu(o, \"rejected\", s), [4, this.hl(n)];\n\n              case 3:\n                return t.sent(), [3, 6];\n\n              case 4:\n                return [4, Lh(t.sent())];\n\n              case 5:\n                return t.sent(), [3, 6];\n\n              case 6:\n                return [2];\n            }\n\n            var e, r, i;\n          });\n        });\n      }, _f.prototype._l = function (u) {\n        return g(this, void 0, void 0, function () {\n          var r, i, o, s;\n          return w(this, function (t) {\n            switch (t.label) {\n              case 0:\n                this.Bc.Ga() || Lr(\"SyncEngine\", \"The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.\"), t.label = 1;\n\n              case 1:\n                return t.trys.push([1, 3,, 4]), [4, (e = this.La, (n = e).persistence.runTransaction(\"Get highest unacknowledged batch id\", \"readonly\", function (t) {\n                  return n.Gn.Vr(t);\n                }))];\n\n              case 2:\n                return -1 === (r = t.sent()) ? [2, void u.resolve()] : ((i = this.Xc.get(r) || []).push(u), this.Xc.set(r, i), [3, 4]);\n\n              case 3:\n                return o = t.sent(), s = Wa(o, \"Initialization of waitForPendingWrites() operation failed\"), u.reject(s), [3, 4];\n\n              case 4:\n                return [2];\n            }\n\n            var e, n;\n          });\n        });\n      }, _f.prototype.ll = function (t) {\n        (this.Xc.get(t) || []).forEach(function (t) {\n          t.resolve();\n        }), this.Xc.delete(t);\n      }, _f.prototype.fl = function (e) {\n        this.Xc.forEach(function (t) {\n          t.forEach(function (t) {\n            t.reject(new $r(Jr.CANCELLED, e));\n          });\n        }), this.Xc.clear();\n      }, _f.prototype.ol = function (t, e) {\n        var n = this.Jc[this.currentUser.$h()];\n        n = (n = n || new xi(Fr)).st(t, e), this.Jc[this.currentUser.$h()] = n;\n      }, _f.prototype.cl = function (t, e) {\n        var n,\n            r = this.Jc[this.currentUser.$h()];\n        r && ((n = r.get(t)) && (e ? n.reject(e) : n.resolve(), r = r.remove(t)), this.Jc[this.currentUser.$h()] = r);\n      }, _f.prototype.rl = function (t, e) {\n        var n = this;\n        void 0 === e && (e = null), this.Uc.sc(t);\n\n        for (var r = 0, i = this.Kc.get(t); r < i.length; r++) {\n          var o = i[r];\n          this.jc.delete(o), e && this.Wc.dl(o, e);\n        }\n\n        this.Kc.delete(t), this.el && this.Yc.Ch(t).forEach(function (t) {\n          n.Yc.Nr(t) || n.wl(t);\n        });\n      }, _f.prototype.wl = function (t) {\n        var e = this.zc.get(t);\n        null !== e && (this.Bc.lu(e), this.zc = this.zc.remove(t), this.Hc.delete(e), this.ul());\n      }, _f.prototype.il = function (t, e) {\n        for (var n = 0, r = e; n < r.length; n++) {\n          var i = r[n];\n          i instanceof lf ? (this.Yc.Eo(i.key, t), this.Tl(i)) : i instanceof pf ? (Lr(\"SyncEngine\", \"Document no longer in limbo: \" + i.key), this.Yc.mo(i.key, t), this.Yc.Nr(i.key) || this.wl(i.key)) : Cr();\n        }\n      }, _f.prototype.Tl = function (t) {\n        var e = t.key;\n        this.zc.get(e) || (Lr(\"SyncEngine\", \"New document in limbo: \" + e), this.Gc.push(e), this.ul());\n      }, _f.prototype.ul = function () {\n        for (; 0 < this.Gc.length && this.zc.size < this.Qc;) {\n          var t = this.Gc.shift(),\n              e = this.Zc.next();\n          this.Hc.set(e, new yf(t)), this.zc = this.zc.st(t, e), this.Bc.listen(new Di(bu(gu(t.path)), e, 2, pa.Es));\n        }\n      }, _f.prototype.El = function () {\n        return this.zc;\n      }, _f.prototype.Il = function () {\n        return this.Gc;\n      }, _f.prototype.hl = function (r, a) {\n        return g(this, void 0, void 0, function () {\n          var o,\n              s,\n              e,\n              u = this;\n          return w(this, function (t) {\n            switch (t.label) {\n              case 0:\n                return o = [], s = [], e = [], this.jc.forEach(function (t, i) {\n                  e.push(Promise.resolve().then(function () {\n                    var n = i.view.Sc(r);\n                    return n.Nc ? kh(u.La, i.query, !1).then(function (t) {\n                      var e = t.documents;\n                      return i.view.Sc(e, n);\n                    }) : n;\n                  }).then(function (t) {\n                    var e,\n                        n = a && a.Wt.get(i.targetId),\n                        r = i.view.Un(t, u.el, n);\n                    u.il(i.targetId, r.$c), r.snapshot && (u.el && u.Uc.oc(i.targetId, r.snapshot.fromCache ? \"not-current\" : \"current\"), o.push(r.snapshot), e = la._s(i.targetId, r.snapshot), s.push(e));\n                  }));\n                }), [4, Promise.all(e)];\n\n              case 1:\n                return t.sent(), this.Wc.Ea(o), [4, function (h, f) {\n                  return g(this, void 0, void 0, function () {\n                    var r, e, n, i, o, s, u, a, c;\n                    return w(this, function (t) {\n                      switch (t.label) {\n                        case 0:\n                          r = h, t.label = 1;\n\n                        case 1:\n                          return t.trys.push([1, 3,, 4]), [4, r.persistence.runTransaction(\"notifyLocalViewChanges\", \"readwrite\", function (n) {\n                            return ua.forEach(f, function (e) {\n                              return ua.forEach(e.cs, function (t) {\n                                return r.persistence.dr.Eo(n, e.targetId, t);\n                              }).next(function () {\n                                return ua.forEach(e.ls, function (t) {\n                                  return r.persistence.dr.mo(n, e.targetId, t);\n                                });\n                              });\n                            });\n                          })];\n\n                        case 2:\n                          return t.sent(), [3, 4];\n\n                        case 3:\n                          if (!xa(e = t.sent())) throw e;\n                          return Lr(\"LocalStore\", \"Failed to update sequence numbers: \" + e), [3, 4];\n\n                        case 4:\n                          for (n = 0, i = f; n < i.length; n++) {\n                            o = i[n], s = o.targetId, o.fromCache || (u = r.Eh.get(s), a = u.Z, c = u.nt(a), r.Eh = r.Eh.st(s, c));\n                          }\n\n                          return [2];\n                      }\n                    });\n                  });\n                }(this.La, s)];\n\n              case 2:\n                return t.sent(), [2];\n            }\n          });\n        });\n      }, _f.prototype.nl = function (t) {}, _f.prototype.vu = function (n) {\n        return g(this, void 0, void 0, function () {\n          var e;\n          return w(this, function (t) {\n            switch (t.label) {\n              case 0:\n                return this.currentUser.isEqual(n) ? [3, 3] : (Lr(\"SyncEngine\", \"User change. New user:\", n.$h()), [4, function (i, o) {\n                  return g(this, void 0, void 0, function () {\n                    var e, n, m, r;\n                    return w(this, function (t) {\n                      switch (t.label) {\n                        case 0:\n                          return n = (e = i).Gn, m = e.Rh, [4, e.persistence.runTransaction(\"Handle user change\", \"readonly\", function (v) {\n                            var g;\n                            return e.Gn.yr(v).next(function (t) {\n                              return g = t, n = e.persistence.oh(o), m = new fa(e.Ah, n, e.persistence.uh()), n.yr(v);\n                            }).next(function (t) {\n                              for (var e = [], n = [], r = Ki(), i = 0, o = g; i < o.length; i++) {\n                                var s = o[i];\n                                e.push(s.batchId);\n\n                                for (var u = 0, a = s.mutations; u < a.length; u++) {\n                                  var c = a[u],\n                                      r = r.add(c.key);\n                                }\n                              }\n\n                              for (var h = 0, f = t; h < f.length; h++) {\n                                var l = f[h];\n                                n.push(l.batchId);\n\n                                for (var p = 0, d = l.mutations; p < d.length; p++) {\n                                  var y = d[p];\n                                  r = r.add(y.key);\n                                }\n                              }\n\n                              return m.Zn(v, r).next(function (t) {\n                                return {\n                                  ml: t,\n                                  Al: e,\n                                  Rl: n\n                                };\n                              });\n                            });\n                          })];\n\n                        case 1:\n                          return r = t.sent(), [2, (e.Gn = n, e.Rh = m, e.Th.Ph(e.Rh), r)];\n                      }\n                    });\n                  });\n                }(this.La, n)]);\n\n              case 1:\n                return e = t.sent(), this.currentUser = n, this.fl(\"'waitForPendingWrites' promise is rejected due to a user change.\"), this.Uc.ac(n, e.Al, e.Rl), [4, this.hl(e.ml)];\n\n              case 2:\n                t.sent(), t.label = 3;\n\n              case 3:\n                return [2];\n            }\n          });\n        });\n      }, _f.prototype.Oe = function (t) {\n        var e = this.Hc.get(t);\n        if (e && e.qc) return Ki().add(e.key);\n        var n = Ki(),\n            r = this.Kc.get(t);\n        if (!r) return n;\n\n        for (var i = 0, o = r; i < o.length; i++) {\n          var s = o[i],\n              u = this.jc.get(s),\n              n = n.Nt(u.view.vc);\n        }\n\n        return n;\n      }, _f);\n\n      function _f(t, e, n, r, i, o) {\n        this.La = t, this.Bc = e, this.qa = n, this.Uc = r, this.currentUser = i, this.Qc = o, this.Wc = null, this.jc = new Zr(_u, Nu), this.Kc = new Map(), this.Gc = [], this.zc = new xi(si.P), this.Hc = new Map(), this.Yc = new xh(), this.Jc = {}, this.Xc = new Map(), this.Zc = rh.eo(), this.onlineState = \"Unknown\", this.tl = void 0;\n      }\n\n      function Af(t, e) {\n        this.query = t, this.gc = e, this.Vc = null, this.Yt = !1, this.yc = Ki(), this.qt = Ki(), this.pc = Du(t), this.bc = new Ji(this.pc);\n      }\n\n      function Sf() {\n        this.Rc = new bf(), this.Pc = {}, this.Da = null, this.fs = null;\n      }\n\n      function Df(t, e, n, r, i) {\n        this.window = t, this.Is = e, this.persistenceKey = n, this.ku = r, this.fu = null, this.Da = null, this.fs = null, this.$u = this.xu.bind(this), this.Ou = new xi(Fr), this.tr = !1, this.Mu = [];\n        var o = n.replace(/[.*+?^${}()|[\\]\\\\]/g, \"\\\\$&\");\n        this.storage = this.window.localStorage, this.currentUser = i, this.Lu = cf(this.persistenceKey, this.ku), this.qu = \"firestore_sequence_number_\" + this.persistenceKey, this.Ou = this.Ou.st(this.ku, new bf()), this.Bu = new RegExp(\"^firestore_clients_\" + o + \"_([^_]*)$\"), this.Uu = new RegExp(\"^firestore_mutations_\" + o + \"_(\\\\d+)(?:_(.*))?$\"), this.Qu = new RegExp(\"^firestore_targets_\" + o + \"_(\\\\d+)$\"), this.Wu = \"firestore_online_state_\" + this.persistenceKey, this.window.addEventListener(\"storage\", this.$u);\n      }\n\n      function kf() {\n        this.activeTargetIds = Yi;\n      }\n\n      function Rf(t, e) {\n        this.clientId = t, this.onlineState = e;\n      }\n\n      function Lf(t, e) {\n        this.clientId = t, this.activeTargetIds = e;\n      }\n\n      function xf(t, e, n) {\n        this.targetId = t, this.state = e, this.error = n;\n      }\n\n      function Of(t, e, n, r) {\n        this.user = t, this.batchId = e, this.state = n, this.error = r;\n      }\n\n      function Pf(u, a, c, h) {\n        return g(this, void 0, void 0, function () {\n          var o, s;\n          return w(this, function (t) {\n            switch (t.label) {\n              case 0:\n                return (o = u).nl(\"applyBatchState()\"), [4, (e = o.La, n = a, i = (r = e).Gn, r.persistence.runTransaction(\"Lookup mutation documents\", \"readonly\", function (e) {\n                  return i.Pr(e, n).next(function (t) {\n                    return t ? r.Rh.Zn(e, t) : ua.resolve(null);\n                  });\n                }))];\n\n              case 1:\n                return null === (s = t.sent()) ? [3, 6] : \"pending\" !== c ? [3, 3] : [4, o.Bc.hu()];\n\n              case 2:\n                return t.sent(), [3, 4];\n\n              case 3:\n                \"acknowledged\" === c || \"rejected\" === c ? (o.cl(a, h || null), o.La.Gn.Sr(a)) : Cr(), t.label = 4;\n\n              case 4:\n                return [4, o.hl(s)];\n\n              case 5:\n                return t.sent(), [3, 7];\n\n              case 6:\n                Lr(\"SyncEngine\", \"Cannot apply mutation batch with id: \" + a), t.label = 7;\n\n              case 7:\n                return [2];\n            }\n\n            var e, n, r, i;\n          });\n        });\n      }\n\n      function Cf(h, f) {\n        return g(this, void 0, void 0, function () {\n          var r, e, i, o, s, u, a, c;\n          return w(this, function (t) {\n            switch (t.label) {\n              case 0:\n                return r = h, !0 !== f || !0 === r.tl ? [3, 3] : (e = r.Uc.zu(), [4, Vf(r, e.N())]);\n\n              case 1:\n                return i = t.sent(), r.tl = !0, [4, r.Bc.Su(!0)];\n\n              case 2:\n                for (t.sent(), o = 0, s = i; o < s.length; o++) {\n                  u = s[o], r.Bc.listen(u);\n                }\n\n                return [3, 7];\n\n              case 3:\n                return !1 !== f || !1 === r.tl ? [3, 7] : (a = [], c = Promise.resolve(), r.Kc.forEach(function (t, e) {\n                  r.Uc.ic(e) ? a.push(e) : c = c.then(function () {\n                    return r.rl(e), Dh(r.La, e, !0);\n                  }), r.Bc.lu(e);\n                }), [4, c]);\n\n              case 4:\n                return t.sent(), [4, Vf(r, a)];\n\n              case 5:\n                return t.sent(), (n = r).Hc.forEach(function (t, e) {\n                  n.Bc.lu(e);\n                }), n.Yc.Nh(), n.Hc = new Map(), n.zc = new xi(si.P), r.tl = !1, [4, r.Bc.Su(!1)];\n\n              case 6:\n                t.sent(), t.label = 7;\n\n              case 7:\n                return [2];\n            }\n\n            var n;\n          });\n        });\n      }\n\n      function Vf(y, v) {\n        return g(this, void 0, void 0, function () {\n          var e, n, r, i, o, s, u, a, c, h, f, l, p, d;\n          return w(this, function (t) {\n            switch (t.label) {\n              case 0:\n                e = y, n = [], r = [], i = 0, o = v, t.label = 1;\n\n              case 1:\n                return i < o.length ? (s = o[i], u = void 0, (a = e.Kc.get(s)) && 0 !== a.length ? [4, Sh(e.La, bu(a[0]))] : [3, 7]) : [3, 13];\n\n              case 2:\n                u = t.sent(), c = 0, h = a, t.label = 3;\n\n              case 3:\n                return c < h.length ? (f = h[c], l = e.jc.get(f), [4, function (i, o) {\n                  return g(this, void 0, void 0, function () {\n                    var e, n, r;\n                    return w(this, function (t) {\n                      switch (t.label) {\n                        case 0:\n                          return [4, kh((e = i).La, o.query, !0)];\n\n                        case 1:\n                          return n = t.sent(), r = o.view.Mc(n), [2, (e.el && e.il(o.targetId, r.$c), r)];\n                      }\n                    });\n                  });\n                }(e, l)]) : [3, 6];\n\n              case 4:\n                (p = t.sent()).snapshot && r.push(p.snapshot), t.label = 5;\n\n              case 5:\n                return c++, [3, 3];\n\n              case 6:\n                return [3, 11];\n\n              case 7:\n                return [4, Rh(e.La, s)];\n\n              case 8:\n                return d = t.sent(), [4, Sh(e.La, d)];\n\n              case 9:\n                return u = t.sent(), [4, e.sl(Uf(d), s, !1)];\n\n              case 10:\n                t.sent(), t.label = 11;\n\n              case 11:\n                n.push(u), t.label = 12;\n\n              case 12:\n                return i++, [3, 1];\n\n              case 13:\n                return [2, (e.Wc.Ea(r), n)];\n            }\n          });\n        });\n      }\n\n      function Uf(t) {\n        return vu(t.path, t.collectionGroup, t.orderBy, t.filters, t.limit, \"F\", t.startAt, t.endAt);\n      }\n\n      function Mf(s, u, a, c) {\n        return g(this, void 0, void 0, function () {\n          var n, i, o;\n          return w(this, function (t) {\n            switch (t.label) {\n              case 0:\n                return (n = s).tl ? (Lr(\"SyncEngine\", \"Ignoring unexpected query state notification.\"), [3, 8]) : [3, 1];\n\n              case 1:\n                if (!n.Kc.has(u)) return [3, 8];\n\n                switch (a) {\n                  case \"current\":\n                  case \"not-current\":\n                    return [3, 2];\n\n                  case \"rejected\":\n                    return [3, 5];\n                }\n\n                return [3, 7];\n\n              case 2:\n                return [4, (r = n.La, e = r.Ah, r.persistence.runTransaction(\"Get new document changes\", \"readonly\", function (t) {\n                  return e.Ur(t, r.mh);\n                }).then(function (t) {\n                  var e = t.Qr,\n                      n = t.readTime;\n                  return r.mh = n, e;\n                }))];\n\n              case 3:\n                return i = t.sent(), o = eo.zt(u, \"current\" === a), [4, n.hl(i, o)];\n\n              case 4:\n                return t.sent(), [3, 8];\n\n              case 5:\n                return [4, Dh(n.La, u, !0)];\n\n              case 6:\n                return t.sent(), n.rl(u, c), [3, 8];\n\n              case 7:\n                Cr(), t.label = 8;\n\n              case 8:\n                return [2];\n            }\n\n            var r, e;\n          });\n        });\n      }\n\n      function Ff() {\n        this.Pl = void 0, this.listeners = [];\n      }\n\n      var qf,\n          jf = (Qf.prototype.listen = function (u) {\n        return g(this, void 0, void 0, function () {\n          var e, n, r, i, o, s;\n          return w(this, function (t) {\n            switch (t.label) {\n              case 0:\n                if (e = u.query, n = !1, (r = this.gl.get(e)) || (n = !0, r = new Ff()), !n) return [3, 4];\n                t.label = 1;\n\n              case 1:\n                return t.trys.push([1, 3,, 4]), i = r, [4, this.fu.listen(e)];\n\n              case 2:\n                return i.Pl = t.sent(), [3, 4];\n\n              case 3:\n                return o = t.sent(), s = Wa(o, \"Initialization of query '\" + Au(u.query) + \"' failed\"), [2, void u.onError(s)];\n\n              case 4:\n                return this.gl.set(e, r), r.listeners.push(u), u.xc(this.onlineState), r.Pl && u.yl(r.Pl) && this.pl(), [2];\n            }\n          });\n        });\n      }, Qf.prototype.lu = function (o) {\n        return g(this, void 0, void 0, function () {\n          var e, n, r, i;\n          return w(this, function (t) {\n            return e = o.query, n = !1, (r = this.gl.get(e)) && 0 <= (i = r.listeners.indexOf(o)) && (r.listeners.splice(i, 1), n = 0 === r.listeners.length), n ? [2, (this.gl.delete(e), this.fu.lu(e))] : [2];\n          });\n        });\n      }, Qf.prototype.Ea = function (t) {\n        for (var e = !1, n = 0, r = t; n < r.length; n++) {\n          var i = r[n],\n              o = i.query,\n              s = this.gl.get(o);\n\n          if (s) {\n            for (var u = 0, a = s.listeners; u < a.length; u++) {\n              a[u].yl(i) && (e = !0);\n            }\n\n            s.Pl = i;\n          }\n        }\n\n        e && this.pl();\n      }, Qf.prototype.dl = function (t, e) {\n        var n = this.gl.get(t);\n        if (n) for (var r = 0, i = n.listeners; r < i.length; r++) {\n          i[r].onError(e);\n        }\n        this.gl.delete(t);\n      }, Qf.prototype.al = function (i) {\n        this.onlineState = i;\n        var o = !1;\n        this.gl.forEach(function (t, e) {\n          for (var n = 0, r = e.listeners; n < r.length; n++) {\n            r[n].xc(i) && (o = !0);\n          }\n        }), o && this.pl();\n      }, Qf.prototype.bl = function (t) {\n        this.Vl.add(t), t.next();\n      }, Qf.prototype.vl = function (t) {\n        this.Vl.delete(t);\n      }, Qf.prototype.pl = function () {\n        this.Vl.forEach(function (t) {\n          t.next();\n        });\n      }, Qf),\n          Gf = (Xf.prototype.yl = function (t) {\n        if (!this.options.includeMetadataChanges) {\n          for (var e = [], n = 0, r = t.docChanges; n < r.length; n++) {\n            var i = r[n];\n            3 !== i.type && e.push(i);\n          }\n\n          t = new to(t.query, t.docs, t.Lt, e, t.qt, t.fromCache, t.Bt, !0);\n        }\n\n        var o = !1;\n        return this.Dl ? this.Nl(t) && (this.Sl.next(t), o = !0) : this.Fl(t, this.onlineState) && (this.kl(t), o = !0), this.Cl = t, o;\n      }, Xf.prototype.onError = function (t) {\n        this.Sl.error(t);\n      }, Xf.prototype.xc = function (t) {\n        this.onlineState = t;\n        var e = !1;\n        return this.Cl && !this.Dl && this.Fl(this.Cl, t) && (this.kl(this.Cl), e = !0), e;\n      }, Xf.prototype.Fl = function (t, e) {\n        if (!t.fromCache) return !0;\n        var n = \"Offline\" !== e;\n        return !(this.options.$l && n || t.docs._() && \"Offline\" !== e);\n      }, Xf.prototype.Nl = function (t) {\n        if (0 < t.docChanges.length) return !0;\n        var e = this.Cl && this.Cl.hasPendingWrites !== t.hasPendingWrites;\n        return !(!t.Bt && !e) && !0 === this.options.includeMetadataChanges;\n      }, Xf.prototype.kl = function (t) {\n        t = to.Qt(t.query, t.docs, t.qt, t.fromCache), this.Dl = !0, this.Sl.next(t);\n      }, Xf),\n          Bf = (Yf.prototype.Ph = function (t) {\n        this.xl = t;\n      }, Yf.prototype.ns = function (e, r, i, o) {\n        var s = this;\n        return r.hn() || i.isEqual(ei.min()) ? this.Ol(e, r) : this.xl.Zn(e, o).next(function (t) {\n          var n = s.Ml(r, t);\n          return (r.an() || r.un()) && s.Nc(r.nn, n, o, i) ? s.Ol(e, r) : (Rr() <= l.DEBUG && Lr(\"IndexFreeQueryEngine\", \"Re-using previous result from %s to execute query: %s\", i.toString(), Au(r)), s.xl.ns(e, r, i).next(function (e) {\n            return n.forEach(function (t) {\n              e = e.st(t.key, t);\n            }), e;\n          }));\n        });\n      }, Yf.prototype.Ml = function (n, t) {\n        var r = new Fi(Du(n));\n        return t.forEach(function (t, e) {\n          e instanceof uu && Su(n, e) && (r = r.add(e));\n        }), r;\n      }, Yf.prototype.Nc = function (t, e, n, r) {\n        if (n.size !== e.size) return !0;\n        var i = \"F\" === t ? e.last() : e.first();\n        return !!i && (i.hasPendingWrites || 0 < i.version.o(r));\n      }, Yf.prototype.Ol = function (t, e) {\n        return Rr() <= l.DEBUG && Lr(\"IndexFreeQueryEngine\", \"Using full collection scan to execute query:\", Au(e)), this.xl.ns(t, e, ei.min());\n      }, Yf),\n          zf = (Kf.prototype.Ir = function (t) {\n        return ua.resolve(0 === this.Gn.length);\n      }, Kf.prototype.mr = function (t, e, n, r) {\n        var i = this.Ll;\n        this.Ll++, 0 < this.Gn.length && this.Gn[this.Gn.length - 1];\n        var o = new oa(i, e, n, r);\n        this.Gn.push(o);\n\n        for (var s = 0, u = r; s < u.length; s++) {\n          var a = u[s];\n          this.ql = this.ql.add(new Oh(a.key, i)), this.zn.Ar(t, a.key.path.p());\n        }\n\n        return ua.resolve(o);\n      }, Kf.prototype.Rr = function (t, e) {\n        return ua.resolve(this.Bl(e));\n      }, Kf.prototype.gr = function (t, e) {\n        var n = e + 1,\n            r = this.Ul(n),\n            i = r < 0 ? 0 : r;\n        return ua.resolve(this.Gn.length > i ? this.Gn[i] : null);\n      }, Kf.prototype.Vr = function () {\n        return ua.resolve(0 === this.Gn.length ? -1 : this.Ll - 1);\n      }, Kf.prototype.yr = function (t) {\n        return ua.resolve(this.Gn.slice());\n      }, Kf.prototype.Yn = function (t, e) {\n        var n = this,\n            r = new Oh(e, 0),\n            i = new Oh(e, Number.POSITIVE_INFINITY),\n            o = [];\n        return this.ql.St([r, i], function (t) {\n          var e = n.Bl(t.kh);\n          o.push(e);\n        }), ua.resolve(o);\n      }, Kf.prototype.es = function (t, e) {\n        var r = this,\n            i = new Fi(Fr);\n        return e.forEach(function (t) {\n          var e = new Oh(t, 0),\n              n = new Oh(t, Number.POSITIVE_INFINITY);\n          r.ql.St([e, n], function (t) {\n            i = i.add(t.kh);\n          });\n        }), ua.resolve(this.Ql(i));\n      }, Kf.prototype.as = function (t, e) {\n        var n = e.path,\n            r = n.length + 1,\n            i = n;\n        si.j(i) || (i = i.child(\"\"));\n        var o = new Oh(new si(i), 0),\n            s = new Fi(Fr);\n        return this.ql.Dt(function (t) {\n          var e = t.key.path;\n          return !!n.D(e) && (e.length === r && (s = s.add(t.kh)), !0);\n        }, o), ua.resolve(this.Ql(s));\n      }, Kf.prototype.Ql = function (t) {\n        var n = this,\n            r = [];\n        return t.forEach(function (t) {\n          var e = n.Bl(t);\n          null !== e && r.push(e);\n        }), r;\n      }, Kf.prototype.br = function (n, r) {\n        var i = this;\n        Vr(0 === this.Wl(r.batchId, \"removed\")), this.Gn.shift();\n        var o = this.ql;\n        return ua.forEach(r.mutations, function (t) {\n          var e = new Oh(t.key, r.batchId);\n          return o = o.delete(e), i.dr.Dr(n, t.key);\n        }).next(function () {\n          i.ql = o;\n        });\n      }, Kf.prototype.Sr = function (t) {}, Kf.prototype.Nr = function (t, e) {\n        var n = new Oh(e, 0),\n            r = this.ql.Ct(n);\n        return ua.resolve(e.isEqual(r && r.key));\n      }, Kf.prototype.Cr = function (t) {\n        return this.Gn.length, ua.resolve();\n      }, Kf.prototype.Wl = function (t, e) {\n        return this.Ul(t);\n      }, Kf.prototype.Ul = function (t) {\n        return 0 === this.Gn.length ? 0 : t - this.Gn[0].batchId;\n      }, Kf.prototype.Bl = function (t) {\n        var e = this.Ul(t);\n        return e < 0 || e >= this.Gn.length ? null : this.Gn[e];\n      }, Kf),\n          Hf = (Wf.prototype.xn = function (t, e, n) {\n        var r = e.key,\n            i = this.docs.get(r),\n            o = i ? i.size : 0,\n            s = this.jl(e);\n        return this.docs = this.docs.st(r, {\n          Or: e,\n          size: s,\n          readTime: n\n        }), this.size += s - o, this.zn.Ar(t, r.path.p());\n      }, Wf.prototype.Mn = function (t) {\n        var e = this.docs.get(t);\n        e && (this.docs = this.docs.remove(t), this.size -= e.size);\n      }, Wf.prototype.Ln = function (t, e) {\n        var n = this.docs.get(e);\n        return ua.resolve(n ? n.Or : null);\n      }, Wf.prototype.getEntries = function (t, e) {\n        var n = this,\n            r = ji;\n        return e.forEach(function (t) {\n          var e = n.docs.get(t);\n          r = r.st(t, e ? e.Or : null);\n        }), ua.resolve(r);\n      }, Wf.prototype.ns = function (t, e, n) {\n        for (var r = zi, i = new si(e.path.child(\"\")), o = this.docs.ct(i); o.Tt();) {\n          var s = o.wt(),\n              u = s.key,\n              a = s.value,\n              c = a.Or,\n              h = a.readTime;\n          if (!e.path.D(u.path)) break;\n          h.o(n) <= 0 || c instanceof uu && Su(e, c) && (r = r.st(c.key, c));\n        }\n\n        return ua.resolve(r);\n      }, Wf.prototype.Kl = function (t, e) {\n        return ua.forEach(this.docs, function (t) {\n          return e(t);\n        });\n      }, Wf.prototype.jr = function (t) {\n        return new Wf.Kr(this);\n      }, Wf.prototype.zr = function (t) {\n        return ua.resolve(this.size);\n      }, Wf);\n\n      function Wf(t, e) {\n        this.zn = t, this.jl = e, this.docs = new xi(si.P), this.size = 0;\n      }\n\n      function Kf(t, e) {\n        this.zn = t, this.dr = e, this.Gn = [], this.Ll = 1, this.ql = new Fi(Oh.yh);\n      }\n\n      function Yf() {}\n\n      function Xf(t, e, n) {\n        this.query = t, this.Sl = e, this.Dl = !1, this.Cl = null, this.onlineState = \"Unknown\", this.options = n || {};\n      }\n\n      function Qf(t) {\n        this.fu = t, this.gl = new Zr(_u, Nu), this.onlineState = \"Unknown\", this.Vl = new Set(), this.fu.subscribe(this);\n      }\n\n      function Zf(t) {\n        var e = this;\n        return (e = qf.call(this) || this).Hr = t, e;\n      }\n\n      Hf.Kr = (o(Zf, qf = aa), Zf.prototype.Un = function (n) {\n        var r = this,\n            i = [];\n        return this.Fn.forEach(function (t, e) {\n          e ? i.push(r.Hr.xn(n, e, r.readTime)) : r.Hr.Mn(t);\n        }), ua.Cn(i);\n      }, Zf.prototype.qn = function (t, e) {\n        return this.Hr.Ln(t, e);\n      }, Zf.prototype.Bn = function (t, e) {\n        return this.Hr.getEntries(t, e);\n      }, Zf);\n      var Jf,\n          $f,\n          tl = (gl.prototype.be = function (t, n) {\n        return this.Gl.forEach(function (t, e) {\n          return n(e);\n        }), ua.resolve();\n      }, gl.prototype.ro = function (t) {\n        return ua.resolve(this.lastRemoteSnapshotVersion);\n      }, gl.prototype.oo = function (t) {\n        return ua.resolve(this.zl);\n      }, gl.prototype.no = function (t) {\n        return this.highestTargetId = this.Yl.next(), ua.resolve(this.highestTargetId);\n      }, gl.prototype.ho = function (t, e, n) {\n        return n && (this.lastRemoteSnapshotVersion = n), e > this.zl && (this.zl = e), ua.resolve();\n      }, gl.prototype.uo = function (t) {\n        this.Gl.set(t.target, t);\n        var e = t.targetId;\n        e > this.highestTargetId && (this.Yl = new rh(e), this.highestTargetId = e), t.sequenceNumber > this.zl && (this.zl = t.sequenceNumber);\n      }, gl.prototype.ao = function (t, e) {\n        return this.uo(e), this.targetCount += 1, ua.resolve();\n      }, gl.prototype.lo = function (t, e) {\n        return this.uo(e), ua.resolve();\n      }, gl.prototype._o = function (t, e) {\n        return this.Gl.delete(e.target), this.Hl.Ch(e.targetId), --this.targetCount, ua.resolve();\n      }, gl.prototype.hr = function (n, r, i) {\n        var o = this,\n            s = 0,\n            u = [];\n        return this.Gl.forEach(function (t, e) {\n          e.sequenceNumber <= r && null === i.get(e.targetId) && (o.Gl.delete(t), u.push(o.fo(n, e.targetId)), s++);\n        }), ua.Cn(u).next(function () {\n          return s;\n        });\n      }, gl.prototype.do = function (t) {\n        return ua.resolve(this.targetCount);\n      }, gl.prototype.wo = function (t, e) {\n        var n = this.Gl.get(e) || null;\n        return ua.resolve(n);\n      }, gl.prototype.To = function (t, e, n) {\n        return this.Hl.vh(e, n), ua.resolve();\n      }, gl.prototype.Io = function (e, t, n) {\n        this.Hl.Dh(t, n);\n        var r = this.persistence.dr,\n            i = [];\n        return r && t.forEach(function (t) {\n          i.push(r.Dr(e, t));\n        }), ua.Cn(i);\n      }, gl.prototype.fo = function (t, e) {\n        return this.Hl.Ch(e), ua.resolve();\n      }, gl.prototype.Ao = function (t, e) {\n        var n = this.Hl.Fh(e);\n        return ua.resolve(n);\n      }, gl.prototype.Nr = function (t, e) {\n        return ua.resolve(this.Hl.Nr(e));\n      }, gl),\n          el = (vl.prototype.start = function () {\n        return Promise.resolve();\n      }, vl.prototype.th = function () {\n        return this.po = !1, Promise.resolve();\n      }, Object.defineProperty(vl.prototype, \"tr\", {\n        get: function get() {\n          return this.po;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), vl.prototype.Bo = function () {}, vl.prototype.Uo = function () {}, vl.prototype.uh = function () {\n        return this.zn;\n      }, vl.prototype.oh = function (t) {\n        var e = this.Jl[t.$h()];\n        return e || (e = new zf(this.zn, this.dr), this.Jl[t.$h()] = e), e;\n      }, vl.prototype.hh = function () {\n        return this.ko;\n      }, vl.prototype.ah = function () {\n        return this.Kn;\n      }, vl.prototype.runTransaction = function (t, e, n) {\n        var r = this;\n        Lr(\"MemoryPersistence\", \"Starting transaction:\", t);\n        var i = new nl(this.yo.next());\n        return this.dr.Zl(), n(i).next(function (t) {\n          return r.dr.t_(i).next(function () {\n            return t;\n          });\n        }).Sn().then(function (t) {\n          return i.jn(), t;\n        });\n      }, vl.prototype.e_ = function (e, n) {\n        return ua.Nn(Object.values(this.Jl).map(function (t) {\n          return function () {\n            return t.Nr(e, n);\n          };\n        }));\n      }, vl),\n          nl = (o(yl, $f = ha), yl),\n          rl = (dl.i_ = function (t) {\n        return new dl(t);\n      }, Object.defineProperty(dl.prototype, \"r_\", {\n        get: function get() {\n          if (this.s_) return this.s_;\n          throw Cr();\n        },\n        enumerable: !1,\n        configurable: !0\n      }), dl.prototype.Eo = function (t, e, n) {\n        return this.n_.Eo(n, e), this.r_.delete(n.toString()), ua.resolve();\n      }, dl.prototype.mo = function (t, e, n) {\n        return this.n_.mo(n, e), this.r_.add(n.toString()), ua.resolve();\n      }, dl.prototype.Dr = function (t, e) {\n        return this.r_.add(e.toString()), ua.resolve();\n      }, dl.prototype.removeTarget = function (t, e) {\n        var n = this;\n        this.n_.Ch(e.targetId).forEach(function (t) {\n          return n.r_.add(t.toString());\n        });\n        var r = this.persistence.hh();\n        return r.Ao(t, e.targetId).next(function (t) {\n          t.forEach(function (t) {\n            return n.r_.add(t.toString());\n          });\n        }).next(function () {\n          return r._o(t, e);\n        });\n      }, dl.prototype.Zl = function () {\n        this.s_ = new Set();\n      }, dl.prototype.t_ = function (n) {\n        var r = this,\n            i = this.persistence.ah().jr();\n        return ua.forEach(this.r_, function (t) {\n          var e = si.B(t);\n          return r.o_(n, e).next(function (t) {\n            t || i.Mn(e);\n          });\n        }).next(function () {\n          return r.s_ = null, i.apply(n);\n        });\n      }, dl.prototype.wh = function (t, e) {\n        var n = this;\n        return this.o_(t, e).next(function (t) {\n          t ? n.r_.delete(e.toString()) : n.r_.add(e.toString());\n        });\n      }, dl.prototype.Xl = function (t) {\n        return 0;\n      }, dl.prototype.o_ = function (t, e) {\n        var n = this;\n        return ua.Nn([function () {\n          return ua.resolve(n.n_.Nr(e));\n        }, function () {\n          return n.persistence.hh().Nr(t, e);\n        }, function () {\n          return n.persistence.e_(t, e);\n        }]);\n      }, dl),\n          il = (pl.prototype.wa = function (t) {\n        this.u_ = t;\n      }, pl.prototype.ca = function (t) {\n        this.c_ = t;\n      }, pl.prototype.onMessage = function (t) {\n        this.l_ = t;\n      }, pl.prototype.close = function () {\n        this.a_();\n      }, pl.prototype.send = function (t) {\n        this.h_(t);\n      }, pl.prototype.__ = function () {\n        this.u_();\n      }, pl.prototype.f_ = function (t) {\n        this.c_(t);\n      }, pl.prototype.d_ = function (t) {\n        this.l_(t);\n      }, pl),\n          ol = {\n        BatchGetDocuments: \"batchGet\",\n        Commit: \"commit\",\n        RunQuery: \"runQuery\"\n      },\n          sl = (ll.prototype.va = function (e, t, n, r) {\n        var i = this.I_(e, t);\n        Lr(\"RestConnection\", \"Sending: \", i, n);\n        var o = {};\n        return this.m_(o, r), this.A_(e, i, o, n).then(function (t) {\n          return Lr(\"RestConnection\", \"Received: \", t), t;\n        }, function (t) {\n          throw Or(\"RestConnection\", e + \" failed with error: \", t, \"url: \", i, \"request:\", n), t;\n        });\n      }, ll.prototype.Sa = function (t, e, n, r) {\n        return this.va(t, e, n, r);\n      }, ll.prototype.m_ = function (t, e) {\n        if (t[\"X-Goog-Api-Client\"] = \"gl-js/ fire/7.19.1\", t[\"Content-Type\"] = \"text/plain\", e) for (var n in e.Mh) {\n          e.Mh.hasOwnProperty(n) && (t[n] = e.Mh[n]);\n        }\n      }, ll.prototype.I_ = function (t, e) {\n        var n = ol[t];\n        return this.T_ + \"/v1/\" + e + \":\" + n;\n      }, o(fl, Jf = ll), fl.prototype.A_ = function (a, e, n, r) {\n        return new Promise(function (o, s) {\n          var u = new Ar();\n          u.listenOnce(Nr.COMPLETE, function () {\n            try {\n              switch (u.getLastErrorCode()) {\n                case Tr.NO_ERROR:\n                  var t = u.getResponseJson();\n                  Lr(\"Connection\", \"XHR received:\", JSON.stringify(t)), o(t);\n                  break;\n\n                case Tr.TIMEOUT:\n                  Lr(\"Connection\", 'RPC \"' + a + '\" timed out'), s(new $r(Jr.DEADLINE_EXCEEDED, \"Request time out\"));\n                  break;\n\n                case Tr.HTTP_ERROR:\n                  var e,\n                      n,\n                      r = u.getStatus();\n                  Lr(\"Connection\", 'RPC \"' + a + '\" failed with status:', r, \"response text:\", u.getResponseText()), 0 < r ? (e = u.getResponseJson().error) && e.status && e.message ? (i = e.status.toLowerCase().replace(\"_\", \"-\"), n = 0 <= Object.values(Jr).indexOf(i) ? i : Jr.UNKNOWN, s(new $r(n, e.message))) : s(new $r(Jr.UNKNOWN, \"Server responded with status \" + u.getStatus())) : s(new $r(Jr.UNAVAILABLE, \"Connection failed.\"));\n                  break;\n\n                default:\n                  Cr();\n              }\n            } finally {\n              Lr(\"Connection\", 'RPC \"' + a + '\" completed.');\n            }\n\n            var i;\n          });\n          var t = JSON.stringify(r);\n          u.send(e, \"POST\", t, n, 15);\n        });\n      }, fl.prototype.Ta = function (t, e) {\n        var n,\n            r,\n            i = [this.T_, \"/\", \"google.firestore.v1.Firestore\", \"/\", t, \"/channel\"],\n            o = Ir(),\n            s = {\n          httpSessionIdParam: \"gsessionid\",\n          initMessageHeaders: {},\n          messageUrlParams: {\n            database: \"projects/\" + this.s.projectId + \"/databases/\" + this.s.database\n          },\n          sendRawJson: !0,\n          supportsCrossDomainXhr: !0,\n          internalChannelParams: {\n            forwardChannelRequestTimeoutMs: 6e5\n          },\n          forceLongPolling: this.forceLongPolling\n        };\n        this.m_(s.initMessageHeaders, e), \"undefined\" != typeof window && (window.cordova || window.phonegap || window.PhoneGap) && /ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(y()) || \"object\" == typeof navigator && \"ReactNative\" === navigator.product || 0 <= y().indexOf(\"Electron/\") || 0 <= (r = y()).indexOf(\"MSIE \") || 0 <= r.indexOf(\"Trident/\") || 0 <= y().indexOf(\"MSAppHost/\") || \"object\" == typeof (n = \"object\" == typeof chrome ? chrome.runtime : \"object\" == typeof browser ? browser.runtime : void 0) && void 0 !== n.id || (s.httpHeadersOverwriteParam = \"$httpHeaders\");\n        var u = i.join(\"\");\n\n        function a(t, e) {\n          c.listen(t, function (t) {\n            try {\n              e(t);\n            } catch (t) {\n              setTimeout(function () {\n                throw t;\n              }, 0);\n            }\n          });\n        }\n\n        Lr(\"Connection\", \"Creating WebChannel: \" + u, s);\n        var c = o.createWebChannel(u, s),\n            h = !1,\n            f = !1,\n            l = new il({\n          h_: function h_(t) {\n            f ? Lr(\"Connection\", \"Not sending because WebChannel is closed:\", t) : (h || (Lr(\"Connection\", \"Opening WebChannel transport.\"), c.open(), h = !0), Lr(\"Connection\", \"WebChannel sending:\", t), c.send(t));\n          },\n          a_: function a_() {\n            return c.close();\n          }\n        });\n        return a(_r.EventType.OPEN, function () {\n          f || Lr(\"Connection\", \"WebChannel transport opened.\");\n        }), a(_r.EventType.CLOSE, function () {\n          f || (f = !0, Lr(\"Connection\", \"WebChannel transport closed\"), l.f_());\n        }), a(_r.EventType.ERROR, function (t) {\n          f || (f = !0, Or(\"Connection\", \"WebChannel transport errored:\", t), l.f_(new $r(Jr.UNAVAILABLE, \"The operation could not be completed\")));\n        }), a(_r.EventType.MESSAGE, function (t) {\n          var e, n, r, i, o, s;\n          f || (Vr(!!(n = t.data[0])), (r = n.error || (null === (e = n[0]) || void 0 === e ? void 0 : e.error)) ? (Lr(\"Connection\", \"WebChannel received error:\", r), i = r.status, o = function () {\n            var t = Ai[i];\n            if (void 0 !== t) return Li(t);\n          }(), s = r.message, void 0 === o && (o = Jr.INTERNAL, s = \"Unknown error status: \" + i + \" with message \" + r.message), f = !0, l.f_(new $r(o, s)), c.close()) : (Lr(\"Connection\", \"WebChannel received:\", n), l.d_(n)));\n        }), setTimeout(function () {\n          l.__();\n        }, 0), l;\n      }, fl),\n          ul = (hl.prototype.Ka = function (t) {\n        this.y_.push(t);\n      }, hl.prototype.th = function () {\n        window.removeEventListener(\"online\", this.R_), window.removeEventListener(\"offline\", this.g_);\n      }, hl.prototype.p_ = function () {\n        window.addEventListener(\"online\", this.R_), window.addEventListener(\"offline\", this.g_);\n      }, hl.prototype.P_ = function () {\n        Lr(\"ConnectivityMonitor\", \"Network connectivity changed: AVAILABLE\");\n\n        for (var t = 0, e = this.y_; t < e.length; t++) {\n          (0, e[t])(0);\n        }\n      }, hl.prototype.V_ = function () {\n        Lr(\"ConnectivityMonitor\", \"Network connectivity changed: UNAVAILABLE\");\n\n        for (var t = 0, e = this.y_; t < e.length; t++) {\n          (0, e[t])(1);\n        }\n      }, hl.ks = function () {\n        return \"undefined\" != typeof window && void 0 !== window.addEventListener && void 0 !== window.removeEventListener;\n      }, hl),\n          al = (cl.prototype.Ka = function (t) {}, cl.prototype.th = function () {}, cl);\n\n      function cl() {}\n\n      function hl() {\n        var t = this;\n        this.R_ = function () {\n          return t.P_();\n        }, this.g_ = function () {\n          return t.V_();\n        }, this.y_ = [], this.p_();\n      }\n\n      function fl(t) {\n        var e = this;\n        return (e = Jf.call(this, t) || this).forceLongPolling = t.forceLongPolling, e;\n      }\n\n      function ll(t) {\n        this.w_ = t, this.s = t.s;\n        var e = t.ssl ? \"https\" : \"http\";\n        this.T_ = e + \"://\" + t.host, this.E_ = \"projects/\" + this.s.projectId + \"/databases/\" + this.s.database + \"/documents\";\n      }\n\n      function pl(t) {\n        this.h_ = t.h_, this.a_ = t.a_;\n      }\n\n      function dl(t) {\n        this.persistence = t, this.n_ = new xh(), this.s_ = null;\n      }\n\n      function yl(t) {\n        var e = this;\n        return (e = $f.call(this) || this).Ro = t, e;\n      }\n\n      function vl(t) {\n        var e = this;\n        this.Jl = {}, this.yo = new pa(0), this.po = !1, this.po = !0, this.dr = t(this), this.ko = new tl(this), this.zn = new Lc(), this.Kn = new Hf(this.zn, function (t) {\n          return e.dr.Xl(t);\n        });\n      }\n\n      function gl(t) {\n        this.persistence = t, this.Gl = new Zr(bi, Ei), this.lastRemoteSnapshotVersion = ei.min(), this.highestTargetId = 0, this.zl = 0, this.Hl = new xh(), this.targetCount = 0, this.Yl = rh.to();\n      }\n\n      function ml(t) {\n        return new Co(t, !0);\n      }\n\n      var wl,\n          bl,\n          El = \"You are using the memory-only build of Firestore. Persistence support is only available via the @firebase/firestore bundle or the firebase-firestore.js build.\",\n          Il = (Dl.prototype.initialize = function (e) {\n        return g(this, void 0, void 0, function () {\n          return w(this, function (t) {\n            switch (t.label) {\n              case 0:\n                return this.Uc = this.b_(e), this.persistence = this.v_(e), [4, this.persistence.start()];\n\n              case 1:\n                return t.sent(), this.S_ = this.D_(e), this.La = this.C_(e), [2];\n            }\n          });\n        });\n      }, Dl.prototype.D_ = function (t) {\n        return null;\n      }, Dl.prototype.C_ = function (t) {\n        return e = this.persistence, n = new Bf(), r = t.N_, new Ih(e, n, r);\n        var e, n, r;\n      }, Dl.prototype.v_ = function (t) {\n        if (t.k_.F_) throw new $r(Jr.FAILED_PRECONDITION, El);\n        return new el(rl.i_);\n      }, Dl.prototype.b_ = function (t) {\n        return new If();\n      }, Dl.prototype.terminate = function () {\n        return g(this, void 0, void 0, function () {\n          return w(this, function (t) {\n            switch (t.label) {\n              case 0:\n                return this.S_ && this.S_.stop(), [4, this.Uc.th()];\n\n              case 1:\n                return t.sent(), [4, this.persistence.th()];\n\n              case 2:\n                return t.sent(), [2];\n            }\n          });\n        });\n      }, Dl.prototype.clearPersistence = function (t, e) {\n        throw new $r(Jr.FAILED_PRECONDITION, El);\n      }, Dl),\n          Tl = (o(Sl, bl = Il), Sl.prototype.initialize = function (e) {\n        return g(this, void 0, void 0, function () {\n          return w(this, function (t) {\n            switch (t.label) {\n              case 0:\n                return [4, bl.prototype.initialize.call(this, e)];\n\n              case 1:\n                return t.sent(), [4, function (r) {\n                  return g(this, void 0, void 0, function () {\n                    var e, n;\n                    return w(this, function (t) {\n                      return n = (e = r).Ah, [2, e.persistence.runTransaction(\"Synchronize last document change read time\", \"readonly\", function (t) {\n                        return n.Wr(t);\n                      }).then(function (t) {\n                        e.mh = t;\n                      })];\n                    });\n                  });\n                }(this.La)];\n\n              case 2:\n                return t.sent(), [2];\n            }\n          });\n        });\n      }, Sl.prototype.D_ = function (t) {\n        var e = this.persistence.dr.Yi;\n        return new $a(e, t.ei);\n      }, Sl.prototype.v_ = function (t) {\n        var e = Eh(t.w_.s, t.w_.persistenceKey),\n            n = ml(t.w_.s);\n        return new ph(t.k_.synchronizeTabs, e, t.clientId, Qa.Ui(t.k_.cacheSizeBytes), t.ei, qa(), ja(), n, this.Uc, t.k_.Vo);\n      }, Sl.prototype.b_ = function (t) {\n        return new If();\n      }, Sl.prototype.clearPersistence = function (t, e) {\n        return function (n) {\n          return g(this, void 0, void 0, function () {\n            var e;\n            return w(this, function (t) {\n              switch (t.label) {\n                case 0:\n                  return _a.ks() ? (e = n + \"main\", [4, _a.delete(e)]) : [2, Promise.resolve()];\n\n                case 1:\n                  return t.sent(), [2];\n              }\n            });\n          });\n        }(Eh(t, e));\n      }, o(Al, wl = Sl), Al.prototype.initialize = function (r) {\n        return g(this, void 0, void 0, function () {\n          var e,\n              n = this;\n          return w(this, function (t) {\n            switch (t.label) {\n              case 0:\n                return [4, wl.prototype.initialize.call(this, r)];\n\n              case 1:\n                return t.sent(), [4, this.x_.initialize(this, r)];\n\n              case 2:\n                return t.sent(), e = this.x_.fu, this.Uc instanceof Ef ? (this.Uc.fu = {\n                  Ic: Pf.bind(null, e),\n                  mc: Mf.bind(null, e),\n                  Ac: function (f, l, p) {\n                    return g(this, void 0, void 0, function () {\n                      var n, e, r, i, o, s, u, a, c, h;\n                      return w(this, function (t) {\n                        switch (t.label) {\n                          case 0:\n                            if (!(n = f).tl) return [3, 10];\n                            e = 0, r = l, t.label = 1;\n\n                          case 1:\n                            return e < r.length ? (i = r[e], n.Kc.has(i) ? (Lr(\"SyncEngine\", \"Adding an already active target \" + i), [3, 5]) : [4, Rh(n.La, i)]) : [3, 6];\n\n                          case 2:\n                            return o = t.sent(), [4, Sh(n.La, o)];\n\n                          case 3:\n                            return s = t.sent(), [4, n.sl(Uf(o), s.targetId, !1)];\n\n                          case 4:\n                            t.sent(), n.Bc.listen(s), t.label = 5;\n\n                          case 5:\n                            return e++, [3, 1];\n\n                          case 6:\n                            u = function u(e) {\n                              return w(this, function (t) {\n                                switch (t.label) {\n                                  case 0:\n                                    return n.Kc.has(e) ? [4, Dh(n.La, e, !1).then(function () {\n                                      n.Bc.lu(e), n.rl(e);\n                                    }).catch(Lh)] : [3, 2];\n\n                                  case 1:\n                                    t.sent(), t.label = 2;\n\n                                  case 2:\n                                    return [2];\n                                }\n                              });\n                            }, a = 0, c = p, t.label = 7;\n\n                          case 7:\n                            return a < c.length ? (h = c[a], [5, u(h)]) : [3, 10];\n\n                          case 8:\n                            t.sent(), t.label = 9;\n\n                          case 9:\n                            return a++, [3, 7];\n\n                          case 10:\n                            return [2];\n                        }\n                      });\n                    });\n                  }.bind(null, e),\n                  rh: function (t) {\n                    return t.La.persistence.rh();\n                  }.bind(null, e)\n                }, [4, this.Uc.start()]) : [3, 4];\n\n              case 3:\n                t.sent(), t.label = 4;\n\n              case 4:\n                return [4, this.persistence.qo(function (e) {\n                  return g(n, void 0, void 0, function () {\n                    return w(this, function (t) {\n                      switch (t.label) {\n                        case 0:\n                          return [4, Cf(this.x_.fu, e)];\n\n                        case 1:\n                          return t.sent(), this.S_ && (e && !this.S_.tr ? this.S_.start(this.La) : e || this.S_.stop()), [2];\n                      }\n                    });\n                  });\n                })];\n\n              case 5:\n                return t.sent(), [2];\n            }\n          });\n        });\n      }, Al.prototype.b_ = function (t) {\n        if (t.k_.F_ && t.k_.synchronizeTabs) {\n          var e = qa();\n          if (!Ef.ks(e)) throw new $r(Jr.UNIMPLEMENTED, \"IndexedDB persistence is only available on platforms that support LocalStorage.\");\n          var n = Eh(t.w_.s, t.w_.persistenceKey);\n          return new Ef(e, t.ei, n, t.clientId, t.N_);\n        }\n\n        return new If();\n      }, Al),\n          Nl = (_l.prototype.initialize = function (n, r) {\n        return g(this, void 0, void 0, function () {\n          var e = this;\n          return w(this, function (t) {\n            switch (t.label) {\n              case 0:\n                return this.La ? [3, 3] : (this.La = n.La, this.Uc = n.Uc, this.qa = this.O_(r), this.Bc = this.M_(r), this.fu = this.L_(r), this.q_ = this.B_(r), this.Uc.Da = function (t) {\n                  return e.fu.xc(t, 1);\n                }, this.Bc.fu = this.fu, [4, this.Bc.start()]);\n\n              case 1:\n                return t.sent(), [4, this.Bc.Su(this.fu.el)];\n\n              case 2:\n                t.sent(), t.label = 3;\n\n              case 3:\n                return [2];\n            }\n          });\n        });\n      }, _l.prototype.B_ = function (t) {\n        return new jf(this.fu);\n      }, _l.prototype.O_ = function (t) {\n        var e,\n            n,\n            r = ml(t.w_.s),\n            i = (e = t.w_, new sl(e));\n        return n = t.credentials, new Xh(n, i, r);\n      }, _l.prototype.M_ = function (t) {\n        var e = this;\n        return new Zh(this.La, this.qa, t.ei, function (t) {\n          return e.fu.xc(t, 0);\n        }, new (ul.ks() ? ul : al)());\n      }, _l.prototype.L_ = function (t) {\n        return e = this.La, n = this.Bc, r = this.qa, i = this.Uc, o = t.N_, s = t.Qc, u = !t.k_.F_ || !t.k_.synchronizeTabs, a = new Nf(e, n, r, i, o, s), u && (a.tl = !0), a;\n        var e, n, r, i, o, s, u, a;\n      }, _l.prototype.terminate = function () {\n        return this.Bc.th();\n      }, _l);\n\n      function _l() {}\n\n      function Al(t) {\n        var e = this;\n        return (e = wl.call(this) || this).x_ = t, e;\n      }\n\n      function Sl() {\n        return null !== bl && bl.apply(this, arguments) || this;\n      }\n\n      function Dl() {}\n\n      function kl(i) {\n        return function () {\n          if (\"object\" == typeof i && null !== i) for (var t = i, e = 0, n = [\"next\", \"error\", \"complete\"]; e < n.length; e++) {\n            var r = n[e];\n            if (r in t && \"function\" == typeof t[r]) return 1;\n          }\n        }();\n      }\n\n      var Rl = (Ll.prototype.next = function (t) {\n        this.observer.next && this.U_(this.observer.next, t);\n      }, Ll.prototype.error = function (t) {\n        this.observer.error ? this.U_(this.observer.error, t) : console.error(\"Uncaught Error in snapshot listener:\", t);\n      }, Ll.prototype.Q_ = function () {\n        this.muted = !0;\n      }, Ll.prototype.U_ = function (t, e) {\n        var n = this;\n        this.muted || setTimeout(function () {\n          n.muted || t(e);\n        }, 0);\n      }, Ll);\n\n      function Ll(t) {\n        this.observer = t, this.muted = !1;\n      }\n\n      function xl(t, e) {\n        if (0 !== e.length) throw new $r(Jr.INVALID_ARGUMENT, \"Function \" + t + \"() does not support arguments, but was called with \" + Ql(e.length, \"argument\") + \".\");\n      }\n\n      function Ol(t, e, n) {\n        if (e.length !== n) throw new $r(Jr.INVALID_ARGUMENT, \"Function \" + t + \"() requires \" + Ql(n, \"argument\") + \", but was called with \" + Ql(e.length, \"argument\") + \".\");\n      }\n\n      function Pl(t, e, n) {\n        if (e.length < n) throw new $r(Jr.INVALID_ARGUMENT, \"Function \" + t + \"() requires at least \" + Ql(n, \"argument\") + \", but was called with \" + Ql(e.length, \"argument\") + \".\");\n      }\n\n      function Cl(t, e, n, r) {\n        if (e.length < n || e.length > r) throw new $r(Jr.INVALID_ARGUMENT, \"Function \" + t + \"() requires between \" + n + \" and \" + r + \" arguments, but was called with \" + Ql(e.length, \"argument\") + \".\");\n      }\n\n      function Vl(t, e, n, r) {\n        Gl(t, e, Xl(n) + \" argument\", r);\n      }\n\n      function Ul(t, e, n, r) {\n        void 0 !== r && Vl(t, e, n, r);\n      }\n\n      function Ml(t, e, n, r) {\n        Gl(t, e, n + \" option\", r);\n      }\n\n      function Fl(t, e, n, r) {\n        void 0 !== r && Ml(t, e, n, r);\n      }\n\n      function ql(t, e, n, r, a) {\n        void 0 !== r && function (t, e, n) {\n          for (var r = [], i = 0, o = a; i < o.length; i++) {\n            var s = o[i];\n            if (s === n) return;\n            r.push(zl(s));\n          }\n\n          var u = zl(n);\n          throw new $r(Jr.INVALID_ARGUMENT, \"Invalid value \" + u + \" provided to function \" + t + '() for option \"' + e + '\". Acceptable values: ' + r.join(\", \"));\n        }(t, n, r);\n      }\n\n      function jl(t, e, n, r) {\n        if (!e.some(function (t) {\n          return t === r;\n        })) throw new $r(Jr.INVALID_ARGUMENT, \"Invalid value \" + zl(r) + \" provided to function \" + t + \"() for its \" + Xl(n) + \" argument. Acceptable values: \" + e.join(\", \"));\n        return r;\n      }\n\n      function Gl(t, e, n, r) {\n        if (!(\"object\" === e ? Bl(r) : \"non-empty string\" === e ? \"string\" == typeof r && \"\" !== r : typeof r === e)) {\n          var i = zl(r);\n          throw new $r(Jr.INVALID_ARGUMENT, \"Function \" + t + \"() requires its \" + n + \" to be of type \" + e + \", but it was: \" + i);\n        }\n      }\n\n      function Bl(t) {\n        return \"object\" == typeof t && null !== t && (Object.getPrototypeOf(t) === Object.prototype || null === Object.getPrototypeOf(t));\n      }\n\n      function zl(e) {\n        if (void 0 === e) return \"undefined\";\n        if (null === e) return \"null\";\n        if (\"string\" == typeof e) return 20 < e.length && (e = e.substring(0, 20) + \"...\"), JSON.stringify(e);\n        if (\"number\" == typeof e || \"boolean\" == typeof e) return \"\" + e;\n        if (\"object\" != typeof e) return \"function\" == typeof e ? \"a function\" : Cr();\n        if (e instanceof Array) return \"an array\";\n\n        var t = function () {\n          if (e.constructor) {\n            var t = /function\\s+([^\\s(]+)\\s*\\(/.exec(e.constructor.toString());\n            if (t && 1 < t.length) return t[1];\n          }\n\n          return null;\n        }();\n\n        return t ? \"a custom \" + t + \" object\" : \"an object\";\n      }\n\n      function Hl(t, e, n) {\n        if (void 0 === n) throw new $r(Jr.INVALID_ARGUMENT, \"Function \" + t + \"() requires a valid \" + Xl(e) + \" argument, but it was undefined.\");\n      }\n\n      function Wl(n, t, r) {\n        Wr(t, function (t, e) {\n          if (r.indexOf(t) < 0) throw new $r(Jr.INVALID_ARGUMENT, \"Unknown option '\" + t + \"' passed to function \" + n + \"(). Available options: \" + r.join(\", \"));\n        });\n      }\n\n      function Kl(t, e, n, r) {\n        var i = zl(r);\n        return new $r(Jr.INVALID_ARGUMENT, \"Function \" + t + \"() requires its \" + Xl(n) + \" argument to be a \" + e + \", but it was: \" + i);\n      }\n\n      function Yl(t, e, n) {\n        if (n <= 0) throw new $r(Jr.INVALID_ARGUMENT, \"Function \" + t + \"() requires its \" + Xl(e) + \" argument to be a positive number, but it was: \" + n + \".\");\n      }\n\n      function Xl(t) {\n        switch (t) {\n          case 1:\n            return \"first\";\n\n          case 2:\n            return \"second\";\n\n          case 3:\n            return \"third\";\n\n          default:\n            return t + \"th\";\n        }\n      }\n\n      function Ql(t, e) {\n        return t + \" \" + e + (1 === t ? \"\" : \"s\");\n      }\n\n      function Zl() {\n        if (\"undefined\" == typeof Uint8Array) throw new $r(Jr.UNIMPLEMENTED, \"Uint8Arrays are not available in this environment.\");\n      }\n\n      function Jl() {\n        if (\"undefined\" == typeof atob) throw new $r(Jr.UNIMPLEMENTED, \"Blobs are unavailable in Firestore in this environment.\");\n      }\n\n      var $l,\n          tp,\n          ep = (cp.fromBase64String = function (t) {\n        Ol(\"Blob.fromBase64String\", arguments, 1), Vl(\"Blob.fromBase64String\", \"string\", 1, t), Jl();\n\n        try {\n          return new cp(Ti.fromBase64String(t));\n        } catch (t) {\n          throw new $r(Jr.INVALID_ARGUMENT, \"Failed to construct Blob from Base64 string: \" + t);\n        }\n      }, cp.fromUint8Array = function (t) {\n        if (Ol(\"Blob.fromUint8Array\", arguments, 1), Zl(), !(t instanceof Uint8Array)) throw Kl(\"Blob.fromUint8Array\", \"Uint8Array\", 1, t);\n        return new cp(Ti.fromUint8Array(t));\n      }, cp.prototype.toBase64 = function () {\n        return Ol(\"Blob.toBase64\", arguments, 0), Jl(), this.W_.toBase64();\n      }, cp.prototype.toUint8Array = function () {\n        return Ol(\"Blob.toUint8Array\", arguments, 0), Zl(), this.W_.toUint8Array();\n      }, cp.prototype.toString = function () {\n        return \"Blob(base64: \" + this.toBase64() + \")\";\n      }, cp.prototype.isEqual = function (t) {\n        return this.W_.isEqual(t.W_);\n      }, cp),\n          np = function np(t) {\n        !function () {\n          if (!(t instanceof Array) || t.length < 1) throw new $r(Jr.INVALID_ARGUMENT, \"Function FieldPath() requires its fieldNames argument to be an array with at least 1 element.\");\n        }();\n\n        for (var e = 0; e < t.length; ++e) {\n          if (Vl(\"FieldPath\", \"string\", e, t[e]), 0 === t[e].length) throw new $r(Jr.INVALID_ARGUMENT, \"Invalid field name at argument $(i + 1). Field names must not be empty.\");\n        }\n\n        this.j_ = new oi(t);\n      },\n          rp = (o(ap, tp = np), ap.documentId = function () {\n        return new ap(oi.L().F());\n      }, ap.prototype.isEqual = function (t) {\n        if (!(t instanceof ap)) throw Kl(\"isEqual\", \"FieldPath\", 1, t);\n        return this.j_.isEqual(t.j_);\n      }, ap),\n          ip = new RegExp(\"[~\\\\*/\\\\[\\\\]]\"),\n          op = function op() {\n        this.K_ = this;\n      },\n          sp = (o(up, $l = op), up.prototype.z_ = function (t) {\n        if (2 !== t.H_) throw 1 === t.H_ ? t.Y_(this.G_ + \"() can only appear at the top level of your update data\") : t.Y_(this.G_ + \"() cannot be used with set() unless you pass {merge:true}\");\n        return t.qe.push(t.path), null;\n      }, up.prototype.isEqual = function (t) {\n        return t instanceof up;\n      }, up);\n\n      function up(t) {\n        var e = this;\n        return (e = $l.call(this) || this).G_ = t, e;\n      }\n\n      function ap() {\n        for (var t = [], e = 0; e < arguments.length; e++) {\n          t[e] = arguments[e];\n        }\n\n        return tp.call(this, t) || this;\n      }\n\n      function cp(t) {\n        Jl(), this.W_ = t;\n      }\n\n      function hp(t, e, n) {\n        return new Mp({\n          H_: 3,\n          J_: e.settings.J_,\n          methodName: t.G_,\n          X_: n\n        }, e.s, e.serializer, e.ignoreUndefinedProperties);\n      }\n\n      var fp,\n          lp,\n          pp,\n          dp,\n          yp,\n          vp,\n          gp = (o(Vp, vp = op), Vp.prototype.z_ = function (t) {\n        return new _s(t.path, new hs());\n      }, Vp.prototype.isEqual = function (t) {\n        return t instanceof Vp;\n      }, Vp),\n          mp = (o(Cp, yp = op), Cp.prototype.z_ = function (t) {\n        var e = hp(this, t, !0),\n            n = this.Z_.map(function (t) {\n          return Wp(t, e);\n        }),\n            r = new fs(n);\n        return new _s(t.path, r);\n      }, Cp.prototype.isEqual = function (t) {\n        return this === t;\n      }, Cp),\n          wp = (o(Pp, dp = op), Pp.prototype.z_ = function (t) {\n        var e = hp(this, t, !0),\n            n = this.Z_.map(function (t) {\n          return Wp(t, e);\n        }),\n            r = new vs(n);\n        return new _s(t.path, r);\n      }, Pp.prototype.isEqual = function (t) {\n        return this === t;\n      }, Pp),\n          bp = (o(Op, pp = op), Op.prototype.z_ = function (t) {\n        var e = new bs(t.serializer, Mo(t.serializer, this.tf));\n        return new _s(t.path, e);\n      }, Op.prototype.isEqual = function (t) {\n        return this === t;\n      }, Op),\n          Ep = (o(xp, lp = op), xp.delete = function () {\n        return xl(\"FieldValue.delete\", arguments), new Ip(new sp(\"FieldValue.delete\"));\n      }, xp.serverTimestamp = function () {\n        return xl(\"FieldValue.serverTimestamp\", arguments), new Ip(new gp(\"FieldValue.serverTimestamp\"));\n      }, xp.arrayUnion = function () {\n        for (var t = [], e = 0; e < arguments.length; e++) {\n          t[e] = arguments[e];\n        }\n\n        return Pl(\"FieldValue.arrayUnion\", arguments, 1), new Ip(new mp(\"FieldValue.arrayUnion\", t));\n      }, xp.arrayRemove = function () {\n        for (var t = [], e = 0; e < arguments.length; e++) {\n          t[e] = arguments[e];\n        }\n\n        return Pl(\"FieldValue.arrayRemove\", arguments, 1), new Ip(new wp(\"FieldValue.arrayRemove\", t));\n      }, xp.increment = function (t) {\n        return Vl(\"FieldValue.increment\", \"number\", 1, t), Ol(\"FieldValue.increment\", arguments, 1), new Ip(new bp(\"FieldValue.increment\", t));\n      }, xp),\n          Ip = (o(Lp, fp = Ep), Lp.prototype.z_ = function (t) {\n        return this.K_.z_(t);\n      }, Lp.prototype.isEqual = function (t) {\n        return t instanceof Lp && this.K_.isEqual(t.K_);\n      }, Lp),\n          Tp = (Object.defineProperty(Rp.prototype, \"latitude\", {\n        get: function get() {\n          return this.ef;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(Rp.prototype, \"longitude\", {\n        get: function get() {\n          return this.nf;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Rp.prototype.isEqual = function (t) {\n        return this.ef === t.ef && this.nf === t.nf;\n      }, Rp.prototype.toJSON = function () {\n        return {\n          latitude: this.ef,\n          longitude: this.nf\n        };\n      }, Rp.prototype.T = function (t) {\n        return Fr(this.ef, t.ef) || Fr(this.nf, t.nf);\n      }, Rp),\n          Np = /^__.*__$/,\n          _p = function _p(t, e, n) {\n        this.sf = t, this.if = e, this.rf = n;\n      },\n          Ap = (kp.prototype.hf = function (t, e) {\n        var n = [];\n        return null !== this.qe ? n.push(new Fs(t, this.data, this.qe, e)) : n.push(new Ms(t, this.data, e)), 0 < this.fieldTransforms.length && n.push(new zs(t, this.fieldTransforms)), n;\n      }, kp),\n          Sp = (Dp.prototype.hf = function (t, e) {\n        var n = [new Fs(t, this.data, this.qe, e)];\n        return 0 < this.fieldTransforms.length && n.push(new zs(t, this.fieldTransforms)), n;\n      }, Dp);\n\n      function Dp(t, e, n) {\n        this.data = t, this.qe = e, this.fieldTransforms = n;\n      }\n\n      function kp(t, e, n) {\n        this.data = t, this.qe = e, this.fieldTransforms = n;\n      }\n\n      function Rp(t, e) {\n        if (Ol(\"GeoPoint\", arguments, 2), Vl(\"GeoPoint\", \"number\", 1, t), Vl(\"GeoPoint\", \"number\", 2, e), !isFinite(t) || t < -90 || 90 < t) throw new $r(Jr.INVALID_ARGUMENT, \"Latitude must be a number between -90 and 90, but was: \" + t);\n        if (!isFinite(e) || e < -180 || 180 < e) throw new $r(Jr.INVALID_ARGUMENT, \"Longitude must be a number between -180 and 180, but was: \" + e);\n        this.ef = t, this.nf = e;\n      }\n\n      function Lp(t) {\n        var e = this;\n        return (e = fp.call(this) || this).K_ = t, e.G_ = t.G_, e;\n      }\n\n      function xp() {\n        return lp.call(this) || this;\n      }\n\n      function Op(t, e) {\n        var n = this;\n        return (n = pp.call(this) || this).G_ = t, n.tf = e, n;\n      }\n\n      function Pp(t, e) {\n        var n = this;\n        return (n = dp.call(this) || this).G_ = t, n.Z_ = e, n;\n      }\n\n      function Cp(t, e) {\n        var n = this;\n        return (n = yp.call(this) || this).G_ = t, n.Z_ = e, n;\n      }\n\n      function Vp(t) {\n        var e = this;\n        return (e = vp.call(this) || this).G_ = t, e;\n      }\n\n      function Up(t) {\n        switch (t) {\n          case 0:\n          case 2:\n          case 1:\n            return 1;\n\n          case 3:\n          case 4:\n            return;\n\n          default:\n            throw Cr();\n        }\n      }\n\n      var Mp = (Object.defineProperty(jp.prototype, \"path\", {\n        get: function get() {\n          return this.settings.path;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(jp.prototype, \"H_\", {\n        get: function get() {\n          return this.settings.H_;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), jp.prototype.uf = function (t) {\n        return new jp(Object.assign(Object.assign({}, this.settings), t), this.s, this.serializer, this.ignoreUndefinedProperties, this.fieldTransforms, this.qe);\n      }, jp.prototype.cf = function (t) {\n        var e,\n            n = null === (e = this.path) || void 0 === e ? void 0 : e.child(t),\n            r = this.uf({\n          path: n,\n          X_: !1\n        });\n        return r.lf(t), r;\n      }, jp.prototype._f = function (t) {\n        var e,\n            n = null === (e = this.path) || void 0 === e ? void 0 : e.child(t),\n            r = this.uf({\n          path: n,\n          X_: !1\n        });\n        return r.af(), r;\n      }, jp.prototype.ff = function (t) {\n        return this.uf({\n          path: void 0,\n          X_: !0\n        });\n      }, jp.prototype.Y_ = function (t) {\n        return Jp(t, this.settings.methodName, this.settings.df || !1, this.path, this.settings.J_);\n      }, jp.prototype.contains = function (e) {\n        return void 0 !== this.qe.find(function (t) {\n          return e.D(t);\n        }) || void 0 !== this.fieldTransforms.find(function (t) {\n          return e.D(t.field);\n        });\n      }, jp.prototype.af = function () {\n        if (this.path) for (var t = 0; t < this.path.length; t++) {\n          this.lf(this.path.get(t));\n        }\n      }, jp.prototype.lf = function (t) {\n        if (0 === t.length) throw this.Y_(\"Document fields must not be empty\");\n        if (Up(this.H_) && Np.test(t)) throw this.Y_('Document fields cannot begin and end with \"__\"');\n      }, jp),\n          Fp = (qp.prototype.wf = function (t, e, n, r) {\n        return void 0 === r && (r = !1), new Mp({\n          H_: t,\n          methodName: e,\n          J_: n,\n          path: oi.$(),\n          X_: !1,\n          df: r\n        }, this.s, this.serializer, this.ignoreUndefinedProperties);\n      }, qp);\n\n      function qp(t, e, n) {\n        this.s = t, this.ignoreUndefinedProperties = e, this.serializer = n || ml(t);\n      }\n\n      function jp(t, e, n, r, i, o) {\n        this.settings = t, this.s = e, this.serializer = n, this.ignoreUndefinedProperties = r, void 0 === i && this.af(), this.fieldTransforms = i || [], this.qe = o || [];\n      }\n\n      function Gp(t, e, n, r, i, o) {\n        void 0 === o && (o = {});\n        var s = t.wf(o.merge || o.mergeFields ? 2 : 0, e, n, i);\n        Xp(\"Data must be an object, but it was:\", s, r);\n        var u,\n            a,\n            c = Kp(r, s);\n        if (o.merge) u = new Ns(s.qe), a = s.fieldTransforms;else if (o.mergeFields) {\n          for (var h = [], f = 0, l = o.mergeFields; f < l.length; f++) {\n            var p = l[f],\n                d = void 0;\n            if (p instanceof np) d = p.j_;else {\n              if (\"string\" != typeof p) throw Cr();\n              d = Zp(e, p, n);\n            }\n            if (!s.contains(d)) throw new $r(Jr.INVALID_ARGUMENT, \"Field '\" + d + \"' is specified in your field mask but missing from your input data.\");\n            $p(h, d) || h.push(d);\n          }\n\n          u = new Ns(h), a = s.fieldTransforms.filter(function (t) {\n            return u.Ke(t.field);\n          });\n        } else u = null, a = s.fieldTransforms;\n        return new Ap(new Zs(c), u, a);\n      }\n\n      function Bp(t, o, s, e) {\n        var u = t.wf(1, o, s);\n        Xp(\"Data must be an object, but it was:\", u, e);\n        var a = [],\n            c = new Js();\n        Wr(e, function (t, e) {\n          var n,\n              r = Zp(o, t, s),\n              i = u._f(r);\n\n          e instanceof op && e.K_ instanceof sp ? a.push(r) : null != (n = Wp(e, i)) && (a.push(r), c.set(r, n));\n        });\n        var n = new Ns(a);\n        return new Sp(c.ze(), n, u.fieldTransforms);\n      }\n\n      function zp(t, e, n, r, i, o) {\n        var s = t.wf(1, e, n),\n            u = [Qp(e, r, n)],\n            a = [i];\n        if (o.length % 2 != 0) throw new $r(Jr.INVALID_ARGUMENT, \"Function \" + e + \"() needs to be called with an even number of arguments that alternate between field names and values.\");\n\n        for (var c = 0; c < o.length; c += 2) {\n          u.push(Qp(e, o[c])), a.push(o[c + 1]);\n        }\n\n        for (var h, f, l, p, d = [], y = new Js(), v = u.length - 1; 0 <= v; --v) {\n          $p(d, u[v]) || (h = u[v], f = a[v], l = s._f(h), f instanceof op && f.K_ instanceof sp ? d.push(h) : null != (p = Wp(f, l)) && (d.push(h), y.set(h, p)));\n        }\n\n        var g = new Ns(d);\n        return new Sp(y.ze(), g, s.fieldTransforms);\n      }\n\n      function Hp(t, e, n, r) {\n        return void 0 === r && (r = !1), Wp(n, t.wf(r ? 4 : 3, e));\n      }\n\n      function Wp(s, t) {\n        if (Yp(s)) return Xp(\"Unsupported field value:\", t, s), Kp(s, t);\n        if (s instanceof op) return function (t, e) {\n          if (!Up(e.H_)) throw e.Y_(t.G_ + \"() can only be used with update() and set()\");\n          if (!e.path) throw e.Y_(t.G_ + \"() is not currently supported inside arrays\");\n          var n = t.z_(e);\n          n && e.fieldTransforms.push(n);\n        }(s, t), null;\n\n        if (t.path && t.qe.push(t.path), s instanceof Array) {\n          if (t.settings.X_ && 4 !== t.H_) throw t.Y_(\"Nested arrays are not supported\");\n          return function (t) {\n            for (var e = [], n = 0, r = 0, i = s; r < i.length; r++) {\n              var o = Wp(i[r], t.ff(n));\n              null == o && (o = {\n                nullValue: \"NULL_VALUE\"\n              }), e.push(o), n++;\n            }\n\n            return {\n              arrayValue: {\n                values: e\n              }\n            };\n          }(t);\n        }\n\n        return function (t, e) {\n          if (null === t) return {\n            nullValue: \"NULL_VALUE\"\n          };\n          if (\"number\" == typeof t) return Mo(e.serializer, t);\n          if (\"boolean\" == typeof t) return {\n            booleanValue: t\n          };\n          if (\"string\" == typeof t) return {\n            stringValue: t\n          };\n\n          if (t instanceof Date) {\n            var n = ti.fromDate(t);\n            return {\n              timestampValue: Fo(e.serializer, n)\n            };\n          }\n\n          if (t instanceof ti) {\n            var r = new ti(t.seconds, 1e3 * Math.floor(t.nanoseconds / 1e3));\n            return {\n              timestampValue: Fo(e.serializer, r)\n            };\n          }\n\n          if (t instanceof Tp) return {\n            geoPointValue: {\n              latitude: t.latitude,\n              longitude: t.longitude\n            }\n          };\n          if (t instanceof ep) return {\n            bytesValue: qo(e.serializer, t)\n          };\n\n          if (t instanceof _p) {\n            var i = e.s,\n                o = t.sf;\n            if (!o.isEqual(i)) throw e.Y_(\"Document reference is for database \" + o.projectId + \"/\" + o.database + \" but should be for database \" + i.projectId + \"/\" + i.database);\n            return {\n              referenceValue: Go(t.sf || e.s, t.if.path)\n            };\n          }\n\n          if (void 0 === t && e.ignoreUndefinedProperties) return null;\n          throw e.Y_(\"Unsupported field value: \" + zl(t));\n        }(s, t);\n      }\n\n      function Kp(t, r) {\n        var i = {};\n        return Kr(t) ? r.path && 0 < r.path.length && r.qe.push(r.path) : Wr(t, function (t, e) {\n          var n = Wp(e, r.cf(t));\n          null != n && (i[t] = n);\n        }), {\n          mapValue: {\n            fields: i\n          }\n        };\n      }\n\n      function Yp(t) {\n        return !(\"object\" != typeof t || null === t || t instanceof Array || t instanceof Date || t instanceof ti || t instanceof Tp || t instanceof ep || t instanceof _p || t instanceof op);\n      }\n\n      function Xp(t, e, n) {\n        if (!Yp(n) || !Bl(n)) {\n          var r = zl(n);\n          throw \"an object\" === r ? e.Y_(t + \" a custom object\") : e.Y_(t + \" \" + r);\n        }\n      }\n\n      function Qp(t, e, n) {\n        if (e instanceof np) return e.j_;\n        if (\"string\" == typeof e) return Zp(t, e);\n        throw Jp(\"Field path arguments must be of type string or FieldPath.\", t, !1, void 0, n);\n      }\n\n      function Zp(t, e, n) {\n        try {\n          return function (e) {\n            if (0 <= e.search(ip)) throw new $r(Jr.INVALID_ARGUMENT, \"Invalid field path (\" + e + \"). Paths must not contain '~', '*', '/', '[', or ']'\");\n\n            try {\n              return new (rp.bind.apply(rp, s([void 0], e.split(\".\"))))();\n            } catch (t) {\n              throw new $r(Jr.INVALID_ARGUMENT, \"Invalid field path (\" + e + \"). Paths must not be empty, begin with '.', end with '.', or contain '..'\");\n            }\n          }(e).j_;\n        } catch (e) {\n          throw Jp(e instanceof Error ? e.message : e.toString(), t, !1, void 0, n);\n        }\n      }\n\n      function Jp(t, e, n, r, i) {\n        var o = r && !r._(),\n            s = void 0 !== i,\n            u = \"Function \" + e + \"() called with invalid data\";\n        n && (u += \" (via `toFirestore()`)\");\n        var a = \"\";\n        return (o || s) && (a += \" (found\", o && (a += \" in field \" + r), s && (a += \" in document \" + i), a += \")\"), new $r(Jr.INVALID_ARGUMENT, (u += \". \") + t + a);\n      }\n\n      function $p(t, e) {\n        return t.some(function (t) {\n          return t.isEqual(e);\n        });\n      }\n\n      var td = (od.prototype.Af = function (r) {\n        return g(this, void 0, void 0, function () {\n          var e,\n              n = this;\n          return w(this, function (t) {\n            switch (t.label) {\n              case 0:\n                if (this.Rf(), 0 < this.mutations.length) throw new $r(Jr.INVALID_ARGUMENT, \"Firestore transactions require all reads to be executed before all writes.\");\n                return [4, function (u, a) {\n                  return g(this, void 0, void 0, function () {\n                    var i, e, n, r, o, s;\n                    return w(this, function (t) {\n                      switch (t.label) {\n                        case 0:\n                          return e = Yo((i = u).serializer) + \"/documents\", n = {\n                            documents: a.map(function (t) {\n                              return zo(i.serializer, t);\n                            })\n                          }, [4, i.Sa(\"BatchGetDocuments\", e, n)];\n\n                        case 1:\n                          return r = t.sent(), o = new Map(), r.forEach(function (t) {\n                            var e,\n                                n,\n                                r = (e = i.serializer, \"found\" in (n = t) ? function (t, e) {\n                              Vr(!!e.found), e.found.name, e.found.updateTime;\n                              var n = Ho(t, e.found.name),\n                                  r = jo(e.found.updateTime),\n                                  i = new Zs({\n                                mapValue: {\n                                  fields: e.found.fields\n                                }\n                              });\n                              return new uu(n, r, i, {});\n                            }(e, n) : \"missing\" in n ? function (t, e) {\n                              Vr(!!e.missing), Vr(!!e.readTime);\n                              var n = Ho(t, e.missing),\n                                  r = jo(e.readTime);\n                              return new au(n, r);\n                            }(e, n) : Cr());\n                            o.set(r.key.toString(), r);\n                          }), s = [], [2, (a.forEach(function (t) {\n                            var e = o.get(t.toString());\n                            Vr(!!e), s.push(e);\n                          }), s)];\n                      }\n                    });\n                  });\n                }(this.qa, r)];\n\n              case 1:\n                return [2, ((e = t.sent()).forEach(function (t) {\n                  t instanceof au || t instanceof uu ? n.Pf(t) : Cr();\n                }), e)];\n            }\n          });\n        });\n      }, od.prototype.set = function (t, e) {\n        this.write(e.hf(t, this.Qe(t))), this.mf.add(t.toString());\n      }, od.prototype.update = function (t, e) {\n        try {\n          this.write(e.hf(t, this.gf(t)));\n        } catch (t) {\n          this.If = t;\n        }\n\n        this.mf.add(t.toString());\n      }, od.prototype.delete = function (t) {\n        this.write([new Xs(t, this.Qe(t))]), this.mf.add(t.toString());\n      }, od.prototype.commit = function () {\n        return g(this, void 0, void 0, function () {\n          var e,\n              r = this;\n          return w(this, function (t) {\n            switch (t.label) {\n              case 0:\n                if (this.Rf(), this.If) throw this.If;\n                return e = this.Tf, this.mutations.forEach(function (t) {\n                  e.delete(t.key.toString());\n                }), e.forEach(function (t, e) {\n                  var n = si.B(e);\n                  r.mutations.push(new Qs(n, r.Qe(n)));\n                }), [4, function (i, o) {\n                  return g(this, void 0, void 0, function () {\n                    var e, n, r;\n                    return w(this, function (t) {\n                      switch (t.label) {\n                        case 0:\n                          return n = Yo((e = i).serializer) + \"/documents\", r = {\n                            writes: o.map(function (t) {\n                              return Zo(e.serializer, t);\n                            })\n                          }, [4, e.va(\"Commit\", n, r)];\n\n                        case 1:\n                          return t.sent(), [2];\n                      }\n                    });\n                  });\n                }(this.qa, this.mutations)];\n\n              case 1:\n                return t.sent(), this.Ef = !0, [2];\n            }\n          });\n        });\n      }, od.prototype.Pf = function (t) {\n        var e;\n        if (t instanceof uu) e = t.version;else {\n          if (!(t instanceof au)) throw Cr();\n          e = ei.min();\n        }\n        var n = this.Tf.get(t.key.toString());\n\n        if (n) {\n          if (!e.isEqual(n)) throw new $r(Jr.ABORTED, \"Document version changed between two reads.\");\n        } else this.Tf.set(t.key.toString(), e);\n      }, od.prototype.Qe = function (t) {\n        var e = this.Tf.get(t.toString());\n        return !this.mf.has(t.toString()) && e ? Ds.updateTime(e) : Ds.We();\n      }, od.prototype.gf = function (t) {\n        var e = this.Tf.get(t.toString());\n        if (this.mf.has(t.toString()) || !e) return Ds.exists(!0);\n        if (e.isEqual(ei.min())) throw new $r(Jr.INVALID_ARGUMENT, \"Can't update a document that doesn't exist.\");\n        return Ds.updateTime(e);\n      }, od.prototype.write = function (t) {\n        this.Rf(), this.mutations = this.mutations.concat(t);\n      }, od.prototype.Rf = function () {}, od),\n          ed = (id.prototype.run = function () {\n        this.yf();\n      }, id.prototype.yf = function () {\n        var t = this;\n        this.Ti.bs(function () {\n          return g(t, void 0, void 0, function () {\n            var e,\n                n,\n                r = this;\n            return w(this, function (t) {\n              return e = new td(this.qa), (n = this.pf(e)) && n.then(function (t) {\n                r.ei.ai(function () {\n                  return e.commit().then(function () {\n                    r.ii.resolve(t);\n                  }).catch(function (t) {\n                    r.bf(t);\n                  });\n                });\n              }).catch(function (t) {\n                r.bf(t);\n              }), [2];\n            });\n          });\n        });\n      }, id.prototype.pf = function (t) {\n        try {\n          var e = this.updateFunction(t);\n          return !yi(e) && e.catch && e.then ? e : (this.ii.reject(Error(\"Transaction callback must return a Promise\")), null);\n        } catch (t) {\n          return this.ii.reject(t), null;\n        }\n      }, id.prototype.bf = function (t) {\n        var e = this;\n        0 < this.Vf && this.vf(t) ? (--this.Vf, this.ei.ai(function () {\n          return e.yf(), Promise.resolve();\n        })) : this.ii.reject(t);\n      }, id.prototype.vf = function (t) {\n        if (\"FirebaseError\" !== t.name) return !1;\n        var e = t.code;\n        return \"aborted\" === e || \"failed-precondition\" === e || !Ri(e);\n      }, id),\n          nd = (rd.prototype.start = function (t, e, n, r) {\n        var i = this;\n        this.Df(), this.w_ = t;\n        var o = new Ia(),\n            s = !1;\n        return this.credentials.Bh(function (t) {\n          return s ? void i.ei.gi(function () {\n            return i.Bc.vu(t);\n          }) : (s = !0, Lr(\"FirestoreClient\", \"Initializing. user=\", t.uid), i.Cf(e, n, r, t, o).then(i.Sf.resolve, i.Sf.reject));\n        }), this.ei.ai(function () {\n          return i.Sf.promise;\n        }), o.promise;\n      }, rd.prototype.enableNetwork = function () {\n        var t = this;\n        return this.Df(), this.ei.enqueue(function () {\n          return t.persistence.Uo(!0), t.Bc.enableNetwork();\n        });\n      }, rd.prototype.Cf = function (i, o, s, u, a) {\n        return g(this, void 0, void 0, function () {\n          var e,\n              n,\n              r = this;\n          return w(this, function (t) {\n            switch (t.label) {\n              case 0:\n                return t.trys.push([0, 3,, 4]), e = {\n                  ei: this.ei,\n                  w_: this.w_,\n                  clientId: this.clientId,\n                  credentials: this.credentials,\n                  N_: u,\n                  Qc: 100,\n                  k_: s\n                }, [4, i.initialize(e)];\n\n              case 1:\n                return t.sent(), [4, o.initialize(i, e)];\n\n              case 2:\n                return t.sent(), this.persistence = i.persistence, this.Uc = i.Uc, this.La = i.La, this.S_ = i.S_, this.qa = o.qa, this.Bc = o.Bc, this.fu = o.fu, this.Nf = o.q_, this.persistence.Bo(function () {\n                  return g(r, void 0, void 0, function () {\n                    return w(this, function (t) {\n                      switch (t.label) {\n                        case 0:\n                          return [4, this.terminate()];\n\n                        case 1:\n                          return t.sent(), [2];\n                      }\n                    });\n                  });\n                }), a.resolve(), [3, 4];\n\n              case 3:\n                if (n = t.sent(), a.reject(n), !this.Ff(n)) throw n;\n                return [2, (console.warn(\"Error enabling offline persistence. Falling back to persistence disabled: \" + n), this.Cf(new Il(), new Nl(), {\n                  F_: !1\n                }, u, a))];\n\n              case 4:\n                return [2];\n            }\n          });\n        });\n      }, rd.prototype.Ff = function (t) {\n        return \"FirebaseError\" === t.name ? t.code === Jr.FAILED_PRECONDITION || t.code === Jr.UNIMPLEMENTED : !(\"undefined\" != typeof DOMException && t instanceof DOMException) || 22 === t.code || 20 === t.code || 11 === t.code;\n      }, rd.prototype.Df = function () {\n        if (this.ei.Ii) throw new $r(Jr.FAILED_PRECONDITION, \"The client has already been terminated.\");\n      }, rd.prototype.disableNetwork = function () {\n        var t = this;\n        return this.Df(), this.ei.enqueue(function () {\n          return t.persistence.Uo(!1), t.Bc.disableNetwork();\n        });\n      }, rd.prototype.terminate = function () {\n        var t = this;\n        this.ei.Pi();\n        var r = new Ia();\n        return this.ei.mi(function () {\n          return g(t, void 0, void 0, function () {\n            var e, n;\n            return w(this, function (t) {\n              switch (t.label) {\n                case 0:\n                  return t.trys.push([0, 4,, 5]), this.S_ && this.S_.stop(), [4, this.Bc.th()];\n\n                case 1:\n                  return t.sent(), [4, this.Uc.th()];\n\n                case 2:\n                  return t.sent(), [4, this.persistence.th()];\n\n                case 3:\n                  return t.sent(), this.credentials.Uh(), r.resolve(), [3, 5];\n\n                case 4:\n                  return e = t.sent(), n = Wa(e, \"Failed to shutdown persistence\"), r.reject(n), [3, 5];\n\n                case 5:\n                  return [2];\n              }\n            });\n          });\n        }), r.promise;\n      }, rd.prototype.waitForPendingWrites = function () {\n        var t = this;\n        this.Df();\n        var e = new Ia();\n        return this.ei.ai(function () {\n          return t.fu._l(e);\n        }), e.promise;\n      }, rd.prototype.listen = function (t, e, n) {\n        var r = this;\n        this.Df();\n        var i = new Rl(n),\n            o = new Gf(t, i, e);\n        return this.ei.ai(function () {\n          return r.Nf.listen(o);\n        }), function () {\n          i.Q_(), r.ei.ai(function () {\n            return r.Nf.lu(o);\n          });\n        };\n      }, rd.prototype.kf = function (e) {\n        return g(this, void 0, void 0, function () {\n          return w(this, function (t) {\n            switch (t.label) {\n              case 0:\n                return this.Df(), [4, this.Sf.promise];\n\n              case 1:\n                return [2, (t.sent(), function (n, u, a) {\n                  return g(this, void 0, void 0, function () {\n                    var s,\n                        e = this;\n                    return w(this, function (t) {\n                      switch (t.label) {\n                        case 0:\n                          return s = new Ia(), [4, n.enqueue(function () {\n                            return g(e, void 0, void 0, function () {\n                              var r, i, o;\n                              return w(this, function (t) {\n                                switch (t.label) {\n                                  case 0:\n                                    return t.trys.push([0, 2,, 3]), [4, (e = a, (n = u).persistence.runTransaction(\"read document\", \"readonly\", function (t) {\n                                      return n.Rh.Hn(t, e);\n                                    }))];\n\n                                  case 1:\n                                    return (r = t.sent()) instanceof uu ? s.resolve(r) : r instanceof au ? s.resolve(null) : s.reject(new $r(Jr.UNAVAILABLE, \"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)\")), [3, 3];\n\n                                  case 2:\n                                    return i = t.sent(), o = Wa(i, \"Failed to get document '\" + a + \" from cache\"), s.reject(o), [3, 3];\n\n                                  case 3:\n                                    return [2];\n                                }\n\n                                var e, n;\n                              });\n                            });\n                          })];\n\n                        case 1:\n                          return [2, (t.sent(), s.promise)];\n                      }\n                    });\n                  });\n                }(this.ei, this.La, e))];\n            }\n          });\n        });\n      }, rd.prototype.$f = function (u, a) {\n        return g(this, void 0, void 0, function () {\n          return w(this, function (t) {\n            switch (t.label) {\n              case 0:\n                return this.Df(), [4, this.Sf.promise];\n\n              case 1:\n                return [2, (t.sent(), e = this.ei, n = this.Nf, r = u, i = a, o = new Ia(), s = sd(e, n, gu(r.path), {\n                  includeMetadataChanges: !0,\n                  $l: !0\n                }, {\n                  next: function next(t) {\n                    s();\n                    var e = t.docs.has(r);\n                    !e && t.fromCache ? o.reject(new $r(Jr.UNAVAILABLE, \"Failed to get document because the client is offline.\")) : e && t.fromCache && i && \"server\" === i.source ? o.reject(new $r(Jr.UNAVAILABLE, 'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to \"server\" to retrieve the cached document.)')) : o.resolve(t);\n                  },\n                  error: function error(t) {\n                    return o.reject(t);\n                  }\n                }), o.promise)];\n            }\n\n            var e, n, r, i, o, s;\n          });\n        });\n      }, rd.prototype.xf = function (e) {\n        return g(this, void 0, void 0, function () {\n          return w(this, function (t) {\n            switch (t.label) {\n              case 0:\n                return this.Df(), [4, this.Sf.promise];\n\n              case 1:\n                return [2, (t.sent(), function (n, a, c) {\n                  return g(this, void 0, void 0, function () {\n                    var u,\n                        e = this;\n                    return w(this, function (t) {\n                      switch (t.label) {\n                        case 0:\n                          return u = new Ia(), [4, n.enqueue(function () {\n                            return g(e, void 0, void 0, function () {\n                              var e, n, r, i, o, s;\n                              return w(this, function (t) {\n                                switch (t.label) {\n                                  case 0:\n                                    return t.trys.push([0, 2,, 3]), [4, kh(a, c, !0)];\n\n                                  case 1:\n                                    return e = t.sent(), n = new Tf(c, e.gh), r = n.Sc(e.documents), i = n.Un(r, !1), u.resolve(i.snapshot), [3, 3];\n\n                                  case 2:\n                                    return o = t.sent(), s = Wa(o, \"Failed to execute query '\" + c + \" against cache\"), u.reject(s), [3, 3];\n\n                                  case 3:\n                                    return [2];\n                                }\n                              });\n                            });\n                          })];\n\n                        case 1:\n                          return [2, (t.sent(), u.promise)];\n                      }\n                    });\n                  });\n                }(this.ei, this.La, e))];\n            }\n          });\n        });\n      }, rd.prototype.Of = function (u, a) {\n        return g(this, void 0, void 0, function () {\n          return w(this, function (t) {\n            switch (t.label) {\n              case 0:\n                return this.Df(), [4, this.Sf.promise];\n\n              case 1:\n                return [2, (t.sent(), e = this.ei, n = this.Nf, r = u, i = a, o = new Ia(), s = sd(e, n, r, {\n                  includeMetadataChanges: !0,\n                  $l: !0\n                }, {\n                  next: function next(t) {\n                    s(), t.fromCache && i && \"server\" === i.source ? o.reject(new $r(Jr.UNAVAILABLE, 'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to \"server\" to retrieve the cached documents.)')) : o.resolve(t);\n                  },\n                  error: function error(t) {\n                    return o.reject(t);\n                  }\n                }), o.promise)];\n            }\n\n            var e, n, r, i, o, s;\n          });\n        });\n      }, rd.prototype.write = function (t) {\n        var e = this;\n        this.Df();\n        var n = new Ia();\n        return this.ei.ai(function () {\n          return e.fu.write(t, n);\n        }), n.promise;\n      }, rd.prototype.s = function () {\n        return this.w_.s;\n      }, rd.prototype.bl = function (t) {\n        var e = this;\n        this.Df();\n        var n = new Rl(t);\n        return this.ei.ai(function () {\n          return g(e, void 0, void 0, function () {\n            return w(this, function (t) {\n              return [2, this.Nf.bl(n)];\n            });\n          });\n        }), function () {\n          n.Q_(), e.ei.ai(function () {\n            return g(e, void 0, void 0, function () {\n              return w(this, function (t) {\n                return [2, this.Nf.vl(n)];\n              });\n            });\n          });\n        };\n      }, Object.defineProperty(rd.prototype, \"Mf\", {\n        get: function get() {\n          return this.ei.Ii;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), rd.prototype.transaction = function (t) {\n        var e = this;\n        this.Df();\n        var n = new Ia();\n        return this.ei.ai(function () {\n          return new ed(e.ei, e.qa, t, n).run(), Promise.resolve();\n        }), n.promise;\n      }, rd);\n\n      function rd(t, e) {\n        this.credentials = t, this.ei = e, this.clientId = Ur.t(), this.Sf = new Ia();\n      }\n\n      function id(t, e, n, r) {\n        this.ei = t, this.qa = e, this.updateFunction = n, this.ii = r, this.Vf = 5, this.Ti = new Na(this.ei, \"transaction_retry\");\n      }\n\n      function od(t) {\n        this.qa = t, this.Tf = new Map(), this.mutations = [], this.Ef = !1, this.If = null, this.mf = new Set();\n      }\n\n      function sd(t, e, n, r, i) {\n        var o = new Rl(i),\n            s = new Gf(n, o, r);\n        return t.ai(function () {\n          return e.listen(s);\n        }), function () {\n          o.Q_(), t.ai(function () {\n            return e.lu(s);\n          });\n        };\n      }\n\n      var ud,\n          ad,\n          cd = (Sd.prototype.Bf = function (t) {\n        switch (mo(t)) {\n          case 0:\n            return null;\n\n          case 1:\n            return t.booleanValue;\n\n          case 2:\n            return _o(t.integerValue || t.doubleValue);\n\n          case 3:\n            return this.Uf(t.timestampValue);\n\n          case 4:\n            return this.Qf(t);\n\n          case 5:\n            return t.stringValue;\n\n          case 6:\n            return new ep(Ao(t.bytesValue));\n\n          case 7:\n            return this.Wf(t.referenceValue);\n\n          case 8:\n            return this.jf(t.geoPointValue);\n\n          case 9:\n            return this.Kf(t.arrayValue);\n\n          case 10:\n            return this.Gf(t.mapValue);\n\n          default:\n            throw Cr();\n        }\n      }, Sd.prototype.Gf = function (t) {\n        var n = this,\n            r = {};\n        return Wr(t.fields || {}, function (t, e) {\n          r[t] = n.Bf(e);\n        }), r;\n      }, Sd.prototype.jf = function (t) {\n        return new Tp(_o(t.latitude), _o(t.longitude));\n      }, Sd.prototype.Kf = function (t) {\n        var e = this;\n        return (t.values || []).map(function (t) {\n          return e.Bf(t);\n        });\n      }, Sd.prototype.Qf = function (t) {\n        switch (this.Lf) {\n          case \"previous\":\n            var e = function t(e) {\n              var n = e.mapValue.fields.__previous_value__;\n              return yo(n) ? t(n) : n;\n            }(t);\n\n            return null == e ? null : this.Bf(e);\n\n          case \"estimate\":\n            return this.Uf(vo(t));\n\n          default:\n            return null;\n        }\n      }, Sd.prototype.Uf = function (t) {\n        var e = No(t),\n            n = new ti(e.seconds, e.nanos);\n        return this.timestampsInSnapshots ? n : n.toDate();\n      }, Sd.prototype.Wf = function (t) {\n        var e = ri.k(t);\n        Vr(os(e));\n        var n = new Br(e.get(1), e.get(3)),\n            r = new si(e.V(5));\n        return n.isEqual(this.s) || xr(\"Document \" + r + \" contains a document reference within a different database (\" + n.projectId + \"/\" + n.database + \") which is not supported. It will be treated as a reference in the current database (\" + this.s.projectId + \"/\" + this.s.database + \") instead.\"), this.qf(r);\n      }, Sd),\n          hd = Qa.ji,\n          fd = (Ad.prototype.isEqual = function (t) {\n        return this.host === t.host && this.ssl === t.ssl && this.timestampsInSnapshots === t.timestampsInSnapshots && this.credentials === t.credentials && this.cacheSizeBytes === t.cacheSizeBytes && this.experimentalForceLongPolling === t.experimentalForceLongPolling && this.ignoreUndefinedProperties === t.ignoreUndefinedProperties;\n      }, Ad),\n          ld = (Object.defineProperty(_d.prototype, \"rd\", {\n        get: function get() {\n          return this.od || (this.od = new Fp(this.sf, this.sd.ignoreUndefinedProperties)), this.od;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), _d.prototype.settings = function (t) {\n        Ol(\"Firestore.settings\", arguments, 1), Vl(\"Firestore.settings\", \"object\", 1, t), t.merge && delete (t = Object.assign(Object.assign({}, this.sd), t)).merge;\n        var e = new fd(t);\n        if (this.Zf && !this.sd.isEqual(e)) throw new $r(Jr.FAILED_PRECONDITION, \"Firestore has already been started and its settings can no longer be changed. You can only call settings() before calling any other methods on a Firestore object.\");\n        void 0 !== (this.sd = e).credentials && (this.nd = function (t) {\n          if (!t) return new Gh();\n\n          switch (t.type) {\n            case \"gapi\":\n              var e = t.hd;\n              return Vr(!(\"object\" != typeof e || null === e || !e.auth || !e.auth.getAuthHeaderValueForFirstParty)), new Hh(e, t.zh || \"0\");\n\n            case \"provider\":\n              return t.hd;\n\n            default:\n              throw new $r(Jr.INVALID_ARGUMENT, \"makeCredentialsProvider failed due to invalid credential type\");\n          }\n        }(e.credentials));\n      }, _d.prototype.enableNetwork = function () {\n        return this.Xf(), this.Zf.enableNetwork();\n      }, _d.prototype.disableNetwork = function () {\n        return this.Xf(), this.Zf.disableNetwork();\n      }, _d.prototype.enablePersistence = function (t) {\n        var e, n;\n        if (this.Zf) throw new $r(Jr.FAILED_PRECONDITION, \"Firestore has already been started and persistence can no longer be enabled. You can only call enablePersistence() before calling any other methods on a Firestore object.\");\n        var r = !1,\n            i = !1;\n        if (t && (void 0 !== t.experimentalTabSynchronization && xr(\"The 'experimentalTabSynchronization' setting will be removed. Use 'synchronizeTabs' instead.\"), r = null !== (n = null !== (e = t.synchronizeTabs) && void 0 !== e ? e : t.experimentalTabSynchronization) && void 0 !== n && n, i = !!t.experimentalForceOwningTab && t.experimentalForceOwningTab, r && i)) throw new $r(Jr.INVALID_ARGUMENT, \"The 'experimentalForceOwningTab' setting cannot be used with 'synchronizeTabs'.\");\n        return this.ad(this.zf, this.Hf, {\n          F_: !0,\n          cacheSizeBytes: this.sd.cacheSizeBytes,\n          synchronizeTabs: r,\n          Vo: i\n        });\n      }, _d.prototype.clearPersistence = function () {\n        return g(this, void 0, void 0, function () {\n          var n,\n              e = this;\n          return w(this, function (t) {\n            if (void 0 !== this.Zf && !this.Zf.Mf) throw new $r(Jr.FAILED_PRECONDITION, \"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.\");\n            return n = new Ia(), [2, (this.Jf.mi(function () {\n              return g(e, void 0, void 0, function () {\n                var e;\n                return w(this, function (t) {\n                  switch (t.label) {\n                    case 0:\n                      return t.trys.push([0, 2,, 3]), [4, this.zf.clearPersistence(this.sf, this.ed)];\n\n                    case 1:\n                      return t.sent(), n.resolve(), [3, 3];\n\n                    case 2:\n                      return e = t.sent(), n.reject(e), [3, 3];\n\n                    case 3:\n                      return [2];\n                  }\n                });\n              });\n            }), n.promise)];\n          });\n        });\n      }, _d.prototype.terminate = function () {\n        return this.app._removeServiceInstance(\"firestore\"), this.INTERNAL.delete();\n      }, Object.defineProperty(_d.prototype, \"ud\", {\n        get: function get() {\n          return this.Xf(), this.Zf.Mf;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), _d.prototype.waitForPendingWrites = function () {\n        return this.Xf(), this.Zf.waitForPendingWrites();\n      }, _d.prototype.onSnapshotsInSync = function (t) {\n        if (this.Xf(), kl(t)) return this.Zf.bl(t);\n        Vl(\"Firestore.onSnapshotsInSync\", \"function\", 1, t);\n        var e = {\n          next: t\n        };\n        return this.Zf.bl(e);\n      }, _d.prototype.Xf = function () {\n        return this.Zf || this.ad(new Il(), new Nl(), {\n          F_: !1\n        }), this.Zf;\n      }, _d.prototype.ld = function () {\n        return new Gr(this.sf, this.ed, this.sd.host, this.sd.ssl, this.sd.experimentalForceLongPolling);\n      }, _d.prototype.ad = function (t, e, n) {\n        var r = this.ld();\n        return this.Zf = new nd(this.nd, this.Jf), this.Zf.start(r, t, e, n);\n      }, _d.td = function (t) {\n        if (e = t.options, !Object.prototype.hasOwnProperty.call(e, \"projectId\")) throw new $r(Jr.INVALID_ARGUMENT, '\"projectId\" not provided in firebase.initializeApp.');\n        var e,\n            n = t.options.projectId;\n        if (!n || \"string\" != typeof n) throw new $r(Jr.INVALID_ARGUMENT, \"projectId must be a string in FirebaseApp.options\");\n        return new Br(n);\n      }, Object.defineProperty(_d.prototype, \"app\", {\n        get: function get() {\n          if (!this.Yf) throw new $r(Jr.FAILED_PRECONDITION, \"Firestore was not initialized using the Firebase SDK. 'app' is not available\");\n          return this.Yf;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), _d.prototype.collection = function (t) {\n        return Ol(\"Firestore.collection\", arguments, 1), Vl(\"Firestore.collection\", \"non-empty string\", 1, t), this.Xf(), new Cd(ri.k(t), this, null);\n      }, _d.prototype.doc = function (t) {\n        return Ol(\"Firestore.doc\", arguments, 1), Vl(\"Firestore.doc\", \"non-empty string\", 1, t), this.Xf(), yd._d(ri.k(t), this, null);\n      }, _d.prototype.collectionGroup = function (t) {\n        if (Ol(\"Firestore.collectionGroup\", arguments, 1), Vl(\"Firestore.collectionGroup\", \"non-empty string\", 1, t), 0 <= t.indexOf(\"/\")) throw new $r(Jr.INVALID_ARGUMENT, \"Invalid collection ID '\" + t + \"' passed to function Firestore.collectionGroup(). Collection IDs must not contain '/'.\");\n        return this.Xf(), new Od((e = t, new du(ri.$(), e)), this, null);\n        var e;\n      }, _d.prototype.runTransaction = function (e) {\n        var n = this;\n        return Ol(\"Firestore.runTransaction\", arguments, 1), Vl(\"Firestore.runTransaction\", \"function\", 1, e), this.Xf().transaction(function (t) {\n          return e(new pd(n, t));\n        });\n      }, _d.prototype.batch = function () {\n        return this.Xf(), new dd(this);\n      }, Object.defineProperty(_d, \"logLevel\", {\n        get: function get() {\n          switch (Rr()) {\n            case l.DEBUG:\n              return \"debug\";\n\n            case l.ERROR:\n              return \"error\";\n\n            case l.SILENT:\n              return \"silent\";\n\n            case l.WARN:\n              return \"warn\";\n\n            case l.INFO:\n              return \"info\";\n\n            case l.VERBOSE:\n              return \"verbose\";\n\n            default:\n              return \"error\";\n          }\n        },\n        enumerable: !1,\n        configurable: !0\n      }), _d.setLogLevel = function (t) {\n        Ol(\"Firestore.setLogLevel\", arguments, 1), jl(\"setLogLevel\", [\"debug\", \"error\", \"silent\", \"warn\", \"info\", \"verbose\"], 1, t), kr.setLogLevel(t);\n      }, _d.prototype.fd = function () {\n        return this.sd.timestampsInSnapshots;\n      }, _d.prototype.dd = function () {\n        return this.sd;\n      }, _d),\n          pd = (Nd.prototype.get = function (t) {\n        var n = this;\n        Ol(\"Transaction.get\", arguments, 1);\n        var r = Gd(\"Transaction.get\", t, this.wd);\n        return this.Td.Af([r.if]).then(function (t) {\n          if (!t || 1 !== t.length) return Cr();\n          var e = t[0];\n          if (e instanceof au) return new gd(n.wd, r.if, null, !1, !1, r.rf);\n          if (e instanceof uu) return new gd(n.wd, r.if, e, !1, !1, r.rf);\n          throw Cr();\n        });\n      }, Nd.prototype.set = function (t, e, n) {\n        Cl(\"Transaction.set\", arguments, 2, 3);\n        var r = Gd(\"Transaction.set\", t, this.wd);\n        n = Fd(\"Transaction.set\", n);\n        var i = Bd(r.rf, e, n),\n            o = Gp(this.wd.rd, \"Transaction.set\", r.if, i, null !== r.rf, n);\n        return this.Td.set(r.if, o), this;\n      }, Nd.prototype.update = function (t, e, n) {\n        for (var r, i, o = [], s = 3; s < arguments.length; s++) {\n          o[s - 3] = arguments[s];\n        }\n\n        return i = \"string\" == typeof e || e instanceof rp ? (Pl(\"Transaction.update\", arguments, 3), r = Gd(\"Transaction.update\", t, this.wd), zp(this.wd.rd, \"Transaction.update\", r.if, e, n, o)) : (Ol(\"Transaction.update\", arguments, 2), r = Gd(\"Transaction.update\", t, this.wd), Bp(this.wd.rd, \"Transaction.update\", r.if, e)), this.Td.update(r.if, i), this;\n      }, Nd.prototype.delete = function (t) {\n        Ol(\"Transaction.delete\", arguments, 1);\n        var e = Gd(\"Transaction.delete\", t, this.wd);\n        return this.Td.delete(e.if), this;\n      }, Nd),\n          dd = (Td.prototype.set = function (t, e, n) {\n        Cl(\"WriteBatch.set\", arguments, 2, 3), this.md();\n        var r = Gd(\"WriteBatch.set\", t, this.wd);\n        n = Fd(\"WriteBatch.set\", n);\n        var i = Bd(r.rf, e, n),\n            o = Gp(this.wd.rd, \"WriteBatch.set\", r.if, i, null !== r.rf, n);\n        return this.Ed = this.Ed.concat(o.hf(r.if, Ds.We())), this;\n      }, Td.prototype.update = function (t, e, n) {\n        for (var r, i, o = [], s = 3; s < arguments.length; s++) {\n          o[s - 3] = arguments[s];\n        }\n\n        return this.md(), i = \"string\" == typeof e || e instanceof rp ? (Pl(\"WriteBatch.update\", arguments, 3), r = Gd(\"WriteBatch.update\", t, this.wd), zp(this.wd.rd, \"WriteBatch.update\", r.if, e, n, o)) : (Ol(\"WriteBatch.update\", arguments, 2), r = Gd(\"WriteBatch.update\", t, this.wd), Bp(this.wd.rd, \"WriteBatch.update\", r.if, e)), this.Ed = this.Ed.concat(i.hf(r.if, Ds.exists(!0))), this;\n      }, Td.prototype.delete = function (t) {\n        Ol(\"WriteBatch.delete\", arguments, 1), this.md();\n        var e = Gd(\"WriteBatch.delete\", t, this.wd);\n        return this.Ed = this.Ed.concat(new Xs(e.if, Ds.We())), this;\n      }, Td.prototype.commit = function () {\n        return this.md(), this.Id = !0, 0 < this.Ed.length ? this.wd.Xf().write(this.Ed) : Promise.resolve();\n      }, Td.prototype.md = function () {\n        if (this.Id) throw new $r(Jr.FAILED_PRECONDITION, \"A write batch can no longer be used after commit() has been called.\");\n      }, Td),\n          yd = (o(Id, ad = _p), Id._d = function (t, e, n) {\n        if (t.length % 2 != 0) throw new $r(Jr.INVALID_ARGUMENT, \"Invalid document reference. Document references must have an even number of segments, but \" + t.F() + \" has \" + t.length);\n        return new Id(new si(t), e, n);\n      }, Object.defineProperty(Id.prototype, \"id\", {\n        get: function get() {\n          return this.if.path.S();\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(Id.prototype, \"parent\", {\n        get: function get() {\n          return new Cd(this.if.path.p(), this.firestore, this.rf);\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(Id.prototype, \"path\", {\n        get: function get() {\n          return this.if.path.F();\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Id.prototype.collection = function (t) {\n        if (Ol(\"DocumentReference.collection\", arguments, 1), Vl(\"DocumentReference.collection\", \"non-empty string\", 1, t), !t) throw new $r(Jr.INVALID_ARGUMENT, \"Must provide a non-empty collection name to collection()\");\n        var e = ri.k(t);\n        return new Cd(this.if.path.child(e), this.firestore, null);\n      }, Id.prototype.isEqual = function (t) {\n        if (!(t instanceof Id)) throw Kl(\"isEqual\", \"DocumentReference\", 1, t);\n        return this.firestore === t.firestore && this.if.isEqual(t.if) && this.rf === t.rf;\n      }, Id.prototype.set = function (t, e) {\n        Cl(\"DocumentReference.set\", arguments, 1, 2), e = Fd(\"DocumentReference.set\", e);\n        var n = Bd(this.rf, t, e),\n            r = Gp(this.firestore.rd, \"DocumentReference.set\", this.if, n, null !== this.rf, e);\n        return this.Zf.write(r.hf(this.if, Ds.We()));\n      }, Id.prototype.update = function (t, e) {\n        for (var n, r = [], i = 2; i < arguments.length; i++) {\n          r[i - 2] = arguments[i];\n        }\n\n        return n = \"string\" == typeof t || t instanceof rp ? (Pl(\"DocumentReference.update\", arguments, 2), zp(this.firestore.rd, \"DocumentReference.update\", this.if, t, e, r)) : (Ol(\"DocumentReference.update\", arguments, 1), Bp(this.firestore.rd, \"DocumentReference.update\", this.if, t)), this.Zf.write(n.hf(this.if, Ds.exists(!0)));\n      }, Id.prototype.delete = function () {\n        return Ol(\"DocumentReference.delete\", arguments, 0), this.Zf.write([new Xs(this.if, Ds.We())]);\n      }, Id.prototype.onSnapshot = function () {\n        for (var t, e, n, r = this, i = [], o = 0; o < arguments.length; o++) {\n          i[o] = arguments[o];\n        }\n\n        Cl(\"DocumentReference.onSnapshot\", arguments, 1, 4);\n        var s = {\n          includeMetadataChanges: !1\n        },\n            u = 0;\n        \"object\" != typeof i[u] || kl(i[u]) || (Wl(\"DocumentReference.onSnapshot\", s = i[u], [\"includeMetadataChanges\"]), Fl(\"DocumentReference.onSnapshot\", \"boolean\", \"includeMetadataChanges\", s.includeMetadataChanges), u++);\n        var a,\n            c = {\n          includeMetadataChanges: s.includeMetadataChanges\n        };\n        kl(i[u]) ? (a = i[u], i[u] = null === (t = a.next) || void 0 === t ? void 0 : t.bind(a), i[u + 1] = null === (e = a.error) || void 0 === e ? void 0 : e.bind(a), i[u + 2] = null === (n = a.complete) || void 0 === n ? void 0 : n.bind(a)) : (Vl(\"DocumentReference.onSnapshot\", \"function\", u, i[u]), Ul(\"DocumentReference.onSnapshot\", \"function\", u + 1, i[u + 1]), Ul(\"DocumentReference.onSnapshot\", \"function\", u + 2, i[u + 2]));\n        var h = {\n          next: function next(t) {\n            i[u] && i[u](r.Ad(t));\n          },\n          error: i[u + 1],\n          complete: i[u + 2]\n        };\n        return this.Zf.listen(gu(this.if.path), c, h);\n      }, Id.prototype.get = function (t) {\n        var e = this;\n        Cl(\"DocumentReference.get\", arguments, 0, 1), jd(\"DocumentReference.get\", t);\n        var n = this.firestore.Xf();\n        return t && \"cache\" === t.source ? n.kf(this.if).then(function (t) {\n          return new gd(e.firestore, e.if, t, !0, t instanceof uu && t.Ge, e.rf);\n        }) : n.$f(this.if, t).then(function (t) {\n          return e.Ad(t);\n        });\n      }, Id.prototype.withConverter = function (t) {\n        return new Id(this.if, this.firestore, t);\n      }, Id.prototype.Ad = function (t) {\n        var e = t.docs.get(this.if);\n        return new gd(this.firestore, this.if, e, t.fromCache, t.hasPendingWrites, this.rf);\n      }, Id),\n          vd = (Ed.prototype.isEqual = function (t) {\n        return this.hasPendingWrites === t.hasPendingWrites && this.fromCache === t.fromCache;\n      }, Ed),\n          gd = (bd.prototype.data = function (t) {\n        var e = this;\n\n        if (Cl(\"DocumentSnapshot.data\", arguments, 0, 1), t = qd(\"DocumentSnapshot.data\", t), this.Rd) {\n          if (this.rf) {\n            var n = new md(this.wd, this.if, this.Rd, this.Pd, this.gd, null);\n            return this.rf.fromFirestore(n, t);\n          }\n\n          return new cd(this.wd.sf, this.wd.fd(), t.serverTimestamps || \"none\", function (t) {\n            return new yd(t, e.wd, null);\n          }).Bf(this.Rd.tn());\n        }\n      }, bd.prototype.get = function (t, e) {\n        var n = this;\n\n        if (Cl(\"DocumentSnapshot.get\", arguments, 1, 2), e = qd(\"DocumentSnapshot.get\", e), this.Rd) {\n          var r = this.Rd.data().field(Qp(\"DocumentSnapshot.get\", t, this.if));\n          if (null !== r) return new cd(this.wd.sf, this.wd.fd(), e.serverTimestamps || \"none\", function (t) {\n            return new yd(t, n.wd, n.rf);\n          }).Bf(r);\n        }\n      }, Object.defineProperty(bd.prototype, \"id\", {\n        get: function get() {\n          return this.if.path.S();\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(bd.prototype, \"ref\", {\n        get: function get() {\n          return new yd(this.if, this.wd, this.rf);\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(bd.prototype, \"exists\", {\n        get: function get() {\n          return null !== this.Rd;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(bd.prototype, \"metadata\", {\n        get: function get() {\n          return new vd(this.gd, this.Pd);\n        },\n        enumerable: !1,\n        configurable: !0\n      }), bd.prototype.isEqual = function (t) {\n        if (!(t instanceof bd)) throw Kl(\"isEqual\", \"DocumentSnapshot\", 1, t);\n        return this.wd === t.wd && this.Pd === t.Pd && this.if.isEqual(t.if) && (null === this.Rd ? null === t.Rd : this.Rd.isEqual(t.Rd)) && this.rf === t.rf;\n      }, bd),\n          md = (o(wd, ud = gd), wd.prototype.data = function (t) {\n        return ud.prototype.data.call(this, t);\n      }, wd);\n\n      function wd() {\n        return null !== ud && ud.apply(this, arguments) || this;\n      }\n\n      function bd(t, e, n, r, i, o) {\n        this.wd = t, this.if = e, this.Rd = n, this.Pd = r, this.gd = i, this.rf = o;\n      }\n\n      function Ed(t, e) {\n        this.hasPendingWrites = t, this.fromCache = e;\n      }\n\n      function Id(t, e, n) {\n        var r = this;\n        return (r = ad.call(this, e.sf, t, n) || this).if = t, r.firestore = e, r.rf = n, r.Zf = r.firestore.Xf(), r;\n      }\n\n      function Td(t) {\n        this.wd = t, this.Ed = [], this.Id = !1;\n      }\n\n      function Nd(t, e) {\n        this.wd = t, this.Td = e;\n      }\n\n      function _d(t, e, n, r) {\n        var i = this;\n\n        if (void 0 === n && (n = new Il()), void 0 === r && (r = new Nl()), this.zf = n, this.Hf = r, this.Yf = null, this.Jf = new Ba(), this.INTERNAL = {\n          delete: function _delete() {\n            return g(i, void 0, void 0, function () {\n              return w(this, function (t) {\n                switch (t.label) {\n                  case 0:\n                    return this.Xf(), [4, this.Zf.terminate()];\n\n                  case 1:\n                    return t.sent(), [2];\n                }\n              });\n            });\n          }\n        }, \"object\" == typeof t.options) {\n          var o = t;\n          this.Yf = o, this.sf = _d.td(o), this.ed = o.name, this.nd = new Bh(e);\n        } else {\n          var s = t;\n          if (!s.projectId) throw new $r(Jr.INVALID_ARGUMENT, \"Must provide projectId\");\n          this.sf = new Br(s.projectId, s.database), this.ed = \"[DEFAULT]\", this.nd = new Gh();\n        }\n\n        this.sd = new fd({});\n      }\n\n      function Ad(t) {\n        var e, n, r, i;\n\n        if (void 0 === t.host) {\n          if (void 0 !== t.ssl) throw new $r(Jr.INVALID_ARGUMENT, \"Can't provide ssl option if host option is not set\");\n          this.host = \"firestore.googleapis.com\", this.ssl = !0;\n        } else Ml(\"settings\", \"non-empty string\", \"host\", t.host), this.host = t.host, Fl(\"settings\", \"boolean\", \"ssl\", t.ssl), this.ssl = null === (e = t.ssl) || void 0 === e || e;\n\n        if (Wl(\"settings\", t, [\"host\", \"ssl\", \"credentials\", \"timestampsInSnapshots\", \"cacheSizeBytes\", \"experimentalForceLongPolling\", \"ignoreUndefinedProperties\"]), Fl(\"settings\", \"object\", \"credentials\", t.credentials), this.credentials = t.credentials, Fl(\"settings\", \"boolean\", \"timestampsInSnapshots\", t.timestampsInSnapshots), Fl(\"settings\", \"boolean\", \"ignoreUndefinedProperties\", t.ignoreUndefinedProperties), !0 === t.timestampsInSnapshots ? xr(\"The setting 'timestampsInSnapshots: true' is no longer required and should be removed.\") : !1 === t.timestampsInSnapshots && xr(\"Support for 'timestampsInSnapshots: false' will be removed soon. You must update your code to handle Timestamp objects.\"), this.timestampsInSnapshots = null === (n = t.timestampsInSnapshots) || void 0 === n || n, this.ignoreUndefinedProperties = null !== (r = t.ignoreUndefinedProperties) && void 0 !== r && r, Fl(\"settings\", \"number\", \"cacheSizeBytes\", t.cacheSizeBytes), void 0 === t.cacheSizeBytes) this.cacheSizeBytes = Qa.Gi;else {\n          if (t.cacheSizeBytes !== hd && t.cacheSizeBytes < Qa.Ki) throw new $r(Jr.INVALID_ARGUMENT, \"cacheSizeBytes must be at least \" + Qa.Ki);\n          this.cacheSizeBytes = t.cacheSizeBytes;\n        }\n        Fl(\"settings\", \"boolean\", \"experimentalForceLongPolling\", t.experimentalForceLongPolling), this.experimentalForceLongPolling = null !== (i = t.experimentalForceLongPolling) && void 0 !== i && i;\n      }\n\n      function Sd(t, e, n, r) {\n        this.s = t, this.timestampsInSnapshots = e, this.Lf = n, this.qf = r;\n      }\n\n      function Dd(t, e, n) {\n        if (\"string\" == typeof n) {\n          if (\"\" === n) throw new $r(Jr.INVALID_ARGUMENT, \"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.\");\n          if (!mu(e) && -1 !== n.indexOf(\"/\")) throw new $r(Jr.INVALID_ARGUMENT, \"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '\" + n + \"' contains a '/' character.\");\n          var r = e.path.child(ri.k(n));\n          if (!si.j(r)) throw new $r(Jr.INVALID_ARGUMENT, \"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '\" + r + \"' is not because it has an odd number of segments (\" + r.length + \").\");\n          return So(t, new si(r));\n        }\n\n        if (n instanceof _p) return So(t, n.if);\n        throw new $r(Jr.INVALID_ARGUMENT, \"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: \" + zl(n) + \".\");\n      }\n\n      function kd(t, e) {\n        if (!Array.isArray(t) || 0 === t.length) throw new $r(Jr.INVALID_ARGUMENT, \"Invalid Query. A non-empty array is required for '\" + e.toString() + \"' filters.\");\n        if (10 < t.length) throw new $r(Jr.INVALID_ARGUMENT, \"Invalid Query. '\" + e.toString() + \"' filters support a maximum of 10 elements in the value array.\");\n\n        if (\"in\" === e || \"array-contains-any\" === e) {\n          if (0 <= t.indexOf(null)) throw new $r(Jr.INVALID_ARGUMENT, \"Invalid Query. '\" + e.toString() + \"' filters cannot contain 'null' in the value array.\");\n          if (0 < t.filter(function (t) {\n            return Number.isNaN(t);\n          }).length) throw new $r(Jr.INVALID_ARGUMENT, \"Invalid Query. '\" + e.toString() + \"' filters cannot contain 'NaN' in the value array.\");\n        }\n      }\n\n      function Rd(t, e, n) {\n        if (!n.isEqual(e)) throw new $r(Jr.INVALID_ARGUMENT, \"Invalid query. You have a where filter with an inequality (<, <=, >, or >=) on field '\" + e.toString() + \"' and so you must also use '\" + e.toString() + \"' as your first orderBy(), but your first orderBy() is on field '\" + n.toString() + \"' instead.\");\n      }\n\n      function Ld(t) {\n        if (t.un() && 0 === t.en.length) throw new $r(Jr.UNIMPLEMENTED, \"limitToLast() queries require specifying at least one orderBy() clause\");\n      }\n\n      var xd,\n          Od = (Md.prototype.where = function (t, e, n) {\n        var r;\n        Ol(\"Query.where\", arguments, 3), Hl(\"Query.where\", 3, n), r = \"not-in\" === e || \"!=\" === e ? e : jl(\"Query.where\", [\"<\", \"<=\", \"==\", \">=\", \">\", \"array-contains\", \"in\", \"array-contains-any\"], 2, e);\n\n        var i,\n            o,\n            s = Qp(\"Query.where\", t),\n            u = function (t, e, n, r, i, o, s) {\n          var u;\n\n          if (i.M()) {\n            if (\"array-contains\" === o || \"array-contains-any\" === o) throw new $r(Jr.INVALID_ARGUMENT, \"Invalid Query. You can't perform '\" + o + \"' queries on FieldPath.documentId().\");\n\n            if (\"in\" === o || \"not-in\" === o) {\n              kd(s, o);\n\n              for (var a = [], c = 0, h = s; c < h.length; c++) {\n                var f = h[c];\n                a.push(Dd(r, t, f));\n              }\n\n              u = {\n                arrayValue: {\n                  values: a\n                }\n              };\n            } else u = Dd(r, t, s);\n          } else \"in\" !== o && \"not-in\" !== o && \"array-contains-any\" !== o || kd(s, o), u = Hp(n, e, s, \"in\" === o || \"not-in\" === o);\n\n          var l = Ru.create(i, o, u);\n          return function (t, e) {\n            if (e._n()) {\n              var n = t.ln();\n              if (null !== n && !n.isEqual(e.field)) throw new $r(Jr.INVALID_ARGUMENT, \"Invalid query. All where filters with an inequality (<, <=, >, or >=) must be on the same field. But you have inequality filters on '\" + n.toString() + \"' and '\" + e.field.toString() + \"'\");\n              var r = t.cn();\n              null !== r && Rd(0, e.field, r);\n            }\n\n            var i = t.fn(function () {\n              switch (e.op) {\n                case \"!=\":\n                  return [\"!=\", \"not-in\"];\n\n                case \"array-contains\":\n                  return [\"array-contains\", \"array-contains-any\", \"not-in\"];\n\n                case \"in\":\n                  return [\"array-contains-any\", \"in\", \"not-in\"];\n\n                case \"array-contains-any\":\n                  return [\"array-contains\", \"array-contains-any\", \"in\", \"not-in\"];\n\n                case \"not-in\":\n                  return [\"array-contains\", \"array-contains-any\", \"in\", \"not-in\", \"!=\"];\n\n                default:\n                  return [];\n              }\n            }());\n            if (null !== i) throw i === e.op ? new $r(Jr.INVALID_ARGUMENT, \"Invalid query. You cannot use more than one '\" + e.op.toString() + \"' filter.\") : new $r(Jr.INVALID_ARGUMENT, \"Invalid query. You cannot use '\" + e.op.toString() + \"' filters with '\" + i.toString() + \"' filters.\");\n          }(t, l), l;\n        }(this.Vd, \"Query.where\", this.firestore.rd, this.firestore.sf, s, r, n);\n\n        return new Md((i = this.Vd, o = i.filters.concat([u]), new du(i.path, i.collectionGroup, i.en.slice(), o, i.limit, i.nn, i.startAt, i.endAt)), this.firestore, this.rf);\n      }, Md.prototype.orderBy = function (t, e) {\n        var n;\n        if (Cl(\"Query.orderBy\", arguments, 1, 2), Ul(\"Query.orderBy\", \"non-empty string\", 2, e), void 0 === e || \"asc\" === e) n = \"asc\";else {\n          if (\"desc\" !== e) throw new $r(Jr.INVALID_ARGUMENT, \"Function Query.orderBy() has unknown direction '\" + e + \"', expected 'asc' or 'desc'.\");\n          n = \"desc\";\n        }\n\n        var r,\n            i,\n            o = Qp(\"Query.orderBy\", t),\n            s = function (t, e, n) {\n          if (null !== t.startAt) throw new $r(Jr.INVALID_ARGUMENT, \"Invalid query. You must not call startAt() or startAfter() before calling orderBy().\");\n          if (null !== t.endAt) throw new $r(Jr.INVALID_ARGUMENT, \"Invalid query. You must not call endAt() or endBefore() before calling orderBy().\");\n          var r,\n              i,\n              o,\n              s = new ia(e, n);\n          return i = s, null !== (r = t).cn() || null !== (o = r.ln()) && Rd(0, o, i.field), s;\n        }(this.Vd, o, n);\n\n        return new Md((r = this.Vd, i = r.en.concat([s]), new du(r.path, r.collectionGroup, i, r.filters.slice(), r.limit, r.nn, r.startAt, r.endAt)), this.firestore, this.rf);\n      }, Md.prototype.limit = function (t) {\n        return Ol(\"Query.limit\", arguments, 1), Vl(\"Query.limit\", \"number\", 1, t), Yl(\"Query.limit\", 1, t), new Md(Eu(this.Vd, t, \"F\"), this.firestore, this.rf);\n      }, Md.prototype.limitToLast = function (t) {\n        return Ol(\"Query.limitToLast\", arguments, 1), Vl(\"Query.limitToLast\", \"number\", 1, t), Yl(\"Query.limitToLast\", 1, t), new Md(Eu(this.Vd, t, \"L\"), this.firestore, this.rf);\n      }, Md.prototype.startAt = function (t) {\n        for (var e = [], n = 1; n < arguments.length; n++) {\n          e[n - 1] = arguments[n];\n        }\n\n        Pl(\"Query.startAt\", arguments, 1);\n        var r = this.yd(\"Query.startAt\", t, e, !0);\n        return new Md(Iu(this.Vd, r), this.firestore, this.rf);\n      }, Md.prototype.startAfter = function (t) {\n        for (var e = [], n = 1; n < arguments.length; n++) {\n          e[n - 1] = arguments[n];\n        }\n\n        Pl(\"Query.startAfter\", arguments, 1);\n        var r = this.yd(\"Query.startAfter\", t, e, !1);\n        return new Md(Iu(this.Vd, r), this.firestore, this.rf);\n      }, Md.prototype.endBefore = function (t) {\n        for (var e = [], n = 1; n < arguments.length; n++) {\n          e[n - 1] = arguments[n];\n        }\n\n        Pl(\"Query.endBefore\", arguments, 1);\n        var r = this.yd(\"Query.endBefore\", t, e, !0);\n        return new Md(Tu(this.Vd, r), this.firestore, this.rf);\n      }, Md.prototype.endAt = function (t) {\n        for (var e = [], n = 1; n < arguments.length; n++) {\n          e[n - 1] = arguments[n];\n        }\n\n        Pl(\"Query.endAt\", arguments, 1);\n        var r = this.yd(\"Query.endAt\", t, e, !1);\n        return new Md(Tu(this.Vd, r), this.firestore, this.rf);\n      }, Md.prototype.isEqual = function (t) {\n        if (!(t instanceof Md)) throw Kl(\"isEqual\", \"Query\", 1, t);\n        return this.firestore === t.firestore && Nu(this.Vd, t.Vd) && this.rf === t.rf;\n      }, Md.prototype.withConverter = function (t) {\n        return new Md(this.Vd, this.firestore, t);\n      }, Md.prototype.yd = function (h, t, e, n) {\n        if (Hl(h, 1, t), t instanceof gd) return Ol(h, s([t], e), 1), function (t, e, n, r) {\n          if (!n) throw new $r(Jr.NOT_FOUND, \"Can't use a DocumentSnapshot that doesn't exist for \" + h + \"().\");\n\n          for (var i = [], o = 0, s = wu(t); o < s.length; o++) {\n            var u = s[o];\n            if (u.field.M()) i.push(So(e, n.key));else {\n              var a = n.field(u.field);\n              if (yo(a)) throw new $r(Jr.INVALID_ARGUMENT, 'Invalid query. You are trying to start or end a query using a document for which the field \"' + u.field + '\" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');\n\n              if (null === a) {\n                var c = u.field.F();\n                throw new $r(Jr.INVALID_ARGUMENT, \"Invalid query. You are trying to start or end a query using a document for which the field '\" + c + \"' (used as the orderBy) does not exist.\");\n              }\n\n              i.push(a);\n            }\n          }\n\n          return new Qu(i, r);\n        }(this.Vd, this.firestore.sf, t.Rd, n);\n        var r = [t].concat(e);\n        return function (t, e, n, r, i, o) {\n          var s = t.en;\n          if (i.length > s.length) throw new $r(Jr.INVALID_ARGUMENT, \"Too many arguments provided to \" + r + \"(). The number of arguments must be less than or equal to the number of orderBy() clauses\");\n\n          for (var u = [], a = 0; a < i.length; a++) {\n            var c = i[a];\n\n            if (s[a].field.M()) {\n              if (\"string\" != typeof c) throw new $r(Jr.INVALID_ARGUMENT, \"Invalid query. Expected a string for document ID in \" + r + \"(), but got a \" + typeof c);\n              if (!mu(t) && -1 !== c.indexOf(\"/\")) throw new $r(Jr.INVALID_ARGUMENT, \"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to \" + r + \"() must be a plain document ID, but '\" + c + \"' contains a slash.\");\n              var h = t.path.child(ri.k(c));\n              if (!si.j(h)) throw new $r(Jr.INVALID_ARGUMENT, \"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to \" + r + \"() must result in a valid document path, but '\" + h + \"' is not because it contains an odd number of segments.\");\n              var f = new si(h);\n              u.push(So(e, f));\n            } else {\n              var l = Hp(n, r, c);\n              u.push(l);\n            }\n          }\n\n          return new Qu(u, o);\n        }(this.Vd, this.firestore.sf, this.firestore.rd, h, r, n);\n      }, Md.prototype.onSnapshot = function () {\n        for (var t, e, n, r = this, i = [], o = 0; o < arguments.length; o++) {\n          i[o] = arguments[o];\n        }\n\n        Cl(\"Query.onSnapshot\", arguments, 1, 4);\n        var s,\n            u = {},\n            a = 0;\n        \"object\" != typeof i[a] || kl(i[a]) || (Wl(\"Query.onSnapshot\", u = i[a], [\"includeMetadataChanges\"]), Fl(\"Query.onSnapshot\", \"boolean\", \"includeMetadataChanges\", u.includeMetadataChanges), a++), kl(i[a]) ? (s = i[a], i[a] = null === (t = s.next) || void 0 === t ? void 0 : t.bind(s), i[a + 1] = null === (e = s.error) || void 0 === e ? void 0 : e.bind(s), i[a + 2] = null === (n = s.complete) || void 0 === n ? void 0 : n.bind(s)) : (Vl(\"Query.onSnapshot\", \"function\", a, i[a]), Ul(\"Query.onSnapshot\", \"function\", a + 1, i[a + 1]), Ul(\"Query.onSnapshot\", \"function\", a + 2, i[a + 2]));\n        var c = {\n          next: function next(t) {\n            i[a] && i[a](new Pd(r.firestore, r.Vd, t, r.rf));\n          },\n          error: i[a + 1],\n          complete: i[a + 2]\n        };\n        return Ld(this.Vd), this.firestore.Xf().listen(this.Vd, u, c);\n      }, Md.prototype.get = function (t) {\n        var e = this;\n        Cl(\"Query.get\", arguments, 0, 1), jd(\"Query.get\", t), Ld(this.Vd);\n        var n = this.firestore.Xf();\n        return (t && \"cache\" === t.source ? n.xf(this.Vd) : n.Of(this.Vd, t)).then(function (t) {\n          return new Pd(e.firestore, e.Vd, t, e.rf);\n        });\n      }, Md),\n          Pd = (Object.defineProperty(Ud.prototype, \"docs\", {\n        get: function get() {\n          var e = [];\n          return this.forEach(function (t) {\n            return e.push(t);\n          }), e;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(Ud.prototype, \"empty\", {\n        get: function get() {\n          return this.bd.docs._();\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(Ud.prototype, \"size\", {\n        get: function get() {\n          return this.bd.docs.size;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Ud.prototype.forEach = function (e, n) {\n        var r = this;\n        Cl(\"QuerySnapshot.forEach\", arguments, 1, 2), Vl(\"QuerySnapshot.forEach\", \"function\", 1, e), this.bd.docs.forEach(function (t) {\n          e.call(n, r.Dd(t, r.metadata.fromCache, r.bd.qt.has(t.key)));\n        });\n      }, Object.defineProperty(Ud.prototype, \"query\", {\n        get: function get() {\n          return new Od(this.pd, this.wd, this.rf);\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Ud.prototype.docChanges = function (t) {\n        t && (Wl(\"QuerySnapshot.docChanges\", t, [\"includeMetadataChanges\"]), Fl(\"QuerySnapshot.docChanges\", \"boolean\", \"includeMetadataChanges\", t.includeMetadataChanges));\n        var e = !(!t || !t.includeMetadataChanges);\n        if (e && this.bd.Ut) throw new $r(Jr.INVALID_ARGUMENT, \"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().\");\n        return this.vd && this.Sd === e || (this.vd = function (i, e, o) {\n          if (i.Lt._()) {\n            var n = 0;\n            return i.docChanges.map(function (t) {\n              var e = o(t.doc, i.fromCache, i.qt.has(t.doc.key));\n              return t.doc, {\n                type: \"added\",\n                doc: e,\n                oldIndex: -1,\n                newIndex: n++\n              };\n            });\n          }\n\n          var s = i.Lt;\n          return i.docChanges.filter(function (t) {\n            return e || 3 !== t.type;\n          }).map(function (t) {\n            var e = o(t.doc, i.fromCache, i.qt.has(t.doc.key)),\n                n = -1,\n                r = -1;\n            return 0 !== t.type && (n = s.indexOf(t.doc.key), s = s.delete(t.doc.key)), 1 !== t.type && (r = (s = s.add(t.doc)).indexOf(t.doc.key)), {\n              type: function (t) {\n                switch (t) {\n                  case 0:\n                    return \"added\";\n\n                  case 2:\n                  case 3:\n                    return \"modified\";\n\n                  case 1:\n                    return \"removed\";\n\n                  default:\n                    return Cr();\n                }\n              }(t.type),\n              doc: e,\n              oldIndex: n,\n              newIndex: r\n            };\n          });\n        }(this.bd, e, this.Dd.bind(this)), this.Sd = e), this.vd;\n      }, Ud.prototype.isEqual = function (t) {\n        if (!(t instanceof Ud)) throw Kl(\"isEqual\", \"QuerySnapshot\", 1, t);\n        return this.wd === t.wd && Nu(this.pd, t.pd) && this.bd.isEqual(t.bd) && this.rf === t.rf;\n      }, Ud.prototype.Dd = function (t, e, n) {\n        return new md(this.wd, t.key, t, e, n, this.rf);\n      }, Ud),\n          Cd = (o(Vd, xd = Od), Object.defineProperty(Vd.prototype, \"id\", {\n        get: function get() {\n          return this.Vd.path.S();\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(Vd.prototype, \"parent\", {\n        get: function get() {\n          var t = this.Vd.path.p();\n          return t._() ? null : new yd(new si(t), this.firestore, null);\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(Vd.prototype, \"path\", {\n        get: function get() {\n          return this.Vd.path.F();\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Vd.prototype.doc = function (t) {\n        Cl(\"CollectionReference.doc\", arguments, 0, 1), 0 === arguments.length && (t = Ur.t()), Vl(\"CollectionReference.doc\", \"non-empty string\", 1, t);\n        var e = ri.k(t);\n        return yd._d(this.Vd.path.child(e), this.firestore, this.rf);\n      }, Vd.prototype.add = function (t) {\n        Ol(\"CollectionReference.add\", arguments, 1), Vl(\"CollectionReference.add\", \"object\", 1, this.rf ? this.rf.toFirestore(t) : t);\n        var e = this.doc();\n        return e.set(t).then(function () {\n          return e;\n        });\n      }, Vd.prototype.withConverter = function (t) {\n        return new Vd(this.Cd, this.firestore, t);\n      }, Vd);\n\n      function Vd(t, e, n) {\n        var r = this;\n        if (((r = xd.call(this, gu(t), e, n) || this).Cd = t).length % 2 != 1) throw new $r(Jr.INVALID_ARGUMENT, \"Invalid collection reference. Collection references must have an odd number of segments, but \" + t.F() + \" has \" + t.length);\n        return r;\n      }\n\n      function Ud(t, e, n, r) {\n        this.wd = t, this.pd = e, this.bd = n, this.rf = r, this.vd = null, this.Sd = null, this.metadata = new vd(n.hasPendingWrites, n.fromCache);\n      }\n\n      function Md(t, e, n) {\n        this.Vd = t, this.firestore = e, this.rf = n;\n      }\n\n      function Fd(t, e) {\n        if (void 0 === e) return {\n          merge: !1\n        };\n        if (Wl(t, e, [\"merge\", \"mergeFields\"]), Fl(t, \"boolean\", \"merge\", e.merge), void 0 !== (n = e.mergeFields) && function (t, e, n, r) {\n          if (!(n instanceof Array)) throw new $r(Jr.INVALID_ARGUMENT, \"Function \" + t + \"() requires its \" + e + \" option to be an array, but it was: \" + zl(n));\n\n          for (var i = 0; i < n.length; ++i) {\n            if (!r(n[i])) throw new $r(Jr.INVALID_ARGUMENT, \"Function \" + t + \"() requires all \" + e + \" elements to be a string or a FieldPath, but the value at index \" + i + \" was: \" + zl(n[i]));\n          }\n        }(t, \"mergeFields\", n, function (t) {\n          return \"string\" == typeof t || t instanceof rp;\n        }), void 0 !== e.mergeFields && void 0 !== e.merge) throw new $r(Jr.INVALID_ARGUMENT, \"Invalid options passed to function \" + t + '(): You cannot specify both \"merge\" and \"mergeFields\".');\n        var n;\n        return e;\n      }\n\n      function qd(t, e) {\n        return void 0 === e ? {} : (Wl(t, e, [\"serverTimestamps\"]), ql(t, 0, \"serverTimestamps\", e.serverTimestamps, [\"estimate\", \"previous\", \"none\"]), e);\n      }\n\n      function jd(t, e) {\n        Ul(t, \"object\", 1, e), e && (Wl(t, e, [\"source\"]), ql(t, 0, \"source\", e.source, [\"default\", \"server\", \"cache\"]));\n      }\n\n      function Gd(t, e, n) {\n        if (e instanceof _p) {\n          if (e.firestore !== n) throw new $r(Jr.INVALID_ARGUMENT, \"Provided document reference is from a different Firestore instance.\");\n          return e;\n        }\n\n        throw Kl(t, \"DocumentReference\", 1, e);\n      }\n\n      function Bd(t, e, n) {\n        return t ? n && (n.merge || n.mergeFields) ? t.toFirestore(e, n) : t.toFirestore(e) : e;\n      }\n\n      var zd,\n          Hd = {\n        Firestore: ld,\n        GeoPoint: Tp,\n        Timestamp: ti,\n        Blob: ep,\n        Transaction: pd,\n        WriteBatch: dd,\n        DocumentReference: yd,\n        DocumentSnapshot: gd,\n        Query: Od,\n        QueryDocumentSnapshot: md,\n        QuerySnapshot: Pd,\n        CollectionReference: Cd,\n        FieldPath: rp,\n        FieldValue: Ep,\n        setLogLevel: ld.setLogLevel,\n        CACHE_SIZE_UNLIMITED: hd\n      };\n      (zd = r.default).INTERNAL.registerComponent(new Sr(\"firestore\", function (t) {\n        return e = t.getProvider(\"app\").getImmediate(), n = t.getProvider(\"auth-internal\"), r = new Nl(), i = new Tl(r), new ld(e, n, i, r);\n        var e, n, r, i;\n      }, \"PUBLIC\").setServiceProps(Object.assign({}, Hd))), zd.registerVersion(\"@firebase/firestore\", \"1.16.6\");\n    }).apply(this, arguments);\n  } catch (t) {\n    throw console.error(t), new Error(\"Cannot instantiate firebase-firestore.js - be sure to load firebase-app.js first.\");\n  }\n});","map":null,"metadata":{},"sourceType":"script"}